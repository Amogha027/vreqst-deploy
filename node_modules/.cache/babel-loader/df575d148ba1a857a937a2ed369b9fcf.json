{"ast":null,"code":"import _regeneratorRuntime from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState}from\"react\";import AceEditor from\"react-ace\";import{Box,Breadcrumb,BreadcrumbItem,BreadcrumbLink,Button,Center,Flex,FormControl,FormLabel,Input,Radio,RadioGroup,Stack,useToast,Switch}from\"@chakra-ui/react\";import\"ace-builds/src-noconflict/ext-language_tools\";import\"ace-builds/src-noconflict/mode-json\";import\"ace-builds/src-noconflict/theme-terminal\";import{FaSave}from\"react-icons/fa\";import{Link,useHistory}from\"react-router-dom\";import{backend}from\"../../server_urls\";import isJson from\"../../utils/checkjson\";import{ChevronRightIcon}from\"@chakra-ui/icons\";var AddFile=function AddFile(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filename=_useState2[0],setfilename=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setdata=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _React$useState=React.useState(\"scene\"),_React$useState2=_slicedToArray(_React$useState,2),grammarfor=_React$useState2[0],setGrammarfor=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),privateFile=_React$useState4[0],setPrivateFile=_React$useState4[1];var history=useHistory();var toast=useToast();function onChange(newValue){setdata(newValue);}var submitform=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var jwttoken,requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:jwttoken=localStorage.getItem(\"jwtToken\");setLoading(true);_context.prev=2;requestOptions={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};//  if (grammarfor==\"scene\"){ let url =\"http://localhost:5002/api/json/upload\";}\n//  if (grammarfor==\"action\"){ let url =\"http://localhost:5002/api/json/upload\";}\n//  if (grammarfor==\"asset\"){ let url =\"http://localhost:5002/api/json/upload\";}\n//  if (grammarfor==\"custom\"){ let url =\"http://localhost:5002/api/json/upload\";}\n//  if (grammarfor==\"timeline\"){ let url =\"http://localhost:5002/api/json/upload\";}\n_context.next=6;return axios.post(// \"http://localhost:5002/api/json/upload\",\nbackend+\"/api/json/upload\",{name:filename,private:privateFile},requestOptions);case 6:history.push(\"/myfiles\");setLoading(false);toast({title:\"File saved successfully\",status:\"success\",duration:10000,isClosable:true,position:\"top\"});_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.log(_context.t0);if(_context.t0.response.data.message=='JSON file with this name already exists'){toast({title:\"File with this name already exists\",status:\"error\",duration:10000,isClosable:true,position:\"top\"});setLoading(false);}case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function submitform(){return _ref.apply(this,arguments);};}();return React.createElement(React.Fragment,null,React.createElement(Breadcrumb,{spacing:\"8px\",pt:5,pl:5,separator:React.createElement(ChevronRightIcon,{color:\"gray.500\"})},React.createElement(BreadcrumbItem,null,React.createElement(BreadcrumbLink,{as:Link,to:\"/myfiles\"},\"My Validators\")),React.createElement(BreadcrumbItem,{isCurrentPage:true},React.createElement(BreadcrumbLink,null,\"Add Validator\"))),React.createElement(Flex,{backgroundColor:\"white\",flexDir:\"column\",justifyContent:\"center\",alignItems:\"center\",py:\"100px\"},React.createElement(Flex,{boxShadow:\"xl\",p:8,rounded:\"xl\",align:\"center\",borderWidth:\"1px\",borderColor:\"gray.400\",mb:5},React.createElement(Flex,{justifyContent:\"center\",flexDir:\"column\",backgroundColor:\"white\"},React.createElement(Box,{p:\"2\"},React.createElement(Input,{colorScheme:\"yellow\",placeholder:\"Validator Name\",isRequired:true,onChange:function onChange(e){return setfilename(e.target.value);},value:filename})),React.createElement(FormControl,{display:\"flex\",justifyContent:\"center\",pb:2},React.createElement(FormLabel,{htmlFor:\"public-file\",mb:\"0\"},\"Private\"),React.createElement(Switch,{id:\"public-file\",defaultChecked:privateFile,onChange:function onChange(){setPrivateFile(!privateFile);if(!privateFile){toast({title:\"Enabled! The File will be only visible to you.\",status:\"success\",duration:10000,isClosable:true,position:\"top\"});}else{toast({title:\"Disabled! File is publicly visible.\",status:\"success\",duration:10000,isClosable:true,position:\"top\"});}}})))),React.createElement(Box,{mx:\"40px\"}),React.createElement(Center,{minW:\"max-content\",justifyContent:\"center\",my:\"20px\"},React.createElement(Button,{leftIcon:React.createElement(FaSave,null),colorScheme:\"yellow\",onClick:submitform,isLoading:loading,isDisabled:!filename},\"Create Validator\"))));};export default AddFile;","map":{"version":3,"sources":["/home/amogha/btp/deploy/deployed/vreqst/src/Components/AddFile/AddFile.jsx"],"names":["axios","React","useState","AceEditor","Box","Breadcrumb","BreadcrumbItem","BreadcrumbLink","Button","Center","Flex","FormControl","FormLabel","Input","Radio","RadioGroup","Stack","useToast","Switch","FaSave","Link","useHistory","backend","isJson","ChevronRightIcon","AddFile","filename","setfilename","data","setdata","loading","setLoading","grammarfor","setGrammarfor","privateFile","setPrivateFile","history","toast","onChange","newValue","submitform","jwttoken","localStorage","getItem","requestOptions","headers","token","post","name","private","push","title","status","duration","isClosable","position","console","log","response","message","e","target","value"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport AceEditor from \"react-ace\";\nimport {\n  Box,\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  Button,\n  Center,\n  Flex,\n  FormControl,\n  FormLabel,\n  Input,\n  Radio,\n  RadioGroup,\n  Stack,\n  useToast,\n  Switch,\n} from \"@chakra-ui/react\";\n\nimport \"ace-builds/src-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/mode-json\";\nimport \"ace-builds/src-noconflict/theme-terminal\";\nimport { FaSave } from \"react-icons/fa\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { backend } from \"../../server_urls\";\n\nimport isJson from \"../../utils/checkjson\";\nimport { ChevronRightIcon } from \"@chakra-ui/icons\";\n\nconst AddFile = () => {\n  const [filename, setfilename] = useState(\"\");\n  const [data, setdata] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [grammarfor, setGrammarfor] = React.useState(\"scene\");\n  const [privateFile, setPrivateFile] = React.useState(false);\n  const history = useHistory();\n  const toast = useToast();\n\n  function onChange(newValue) {\n    setdata(newValue);\n  }\n\n  const submitform = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n    setLoading(true);\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      //  if (grammarfor==\"scene\"){ let url =\"http://localhost:5002/api/json/upload\";}\n      //  if (grammarfor==\"action\"){ let url =\"http://localhost:5002/api/json/upload\";}\n      //  if (grammarfor==\"asset\"){ let url =\"http://localhost:5002/api/json/upload\";}\n      //  if (grammarfor==\"custom\"){ let url =\"http://localhost:5002/api/json/upload\";}\n      //  if (grammarfor==\"timeline\"){ let url =\"http://localhost:5002/api/json/upload\";}\n\n\n      await axios.post(\n        // \"http://localhost:5002/api/json/upload\",\n        backend + \"/api/json/upload\",\n        { name: filename, private: privateFile },\n        requestOptions\n      );\n      history.push(\"/myfiles\");\n      setLoading(false);\n      toast({\n        title: \"File saved successfully\",\n        status: \"success\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n    } catch (error) {\n      console.log(error);\n      if (error.response.data.message == 'JSON file with this name already exists') {\n        toast({\n          title: \"File with this name already exists\",\n          status: \"error\",\n          duration: 10000,\n          isClosable: true,\n          position: \"top\",\n        });\n        setLoading(false);\n      }\n    }\n  };\n\n  return (\n    <>\n      <Breadcrumb\n        spacing=\"8px\"\n        pt={5}\n        pl={5}\n        separator={<ChevronRightIcon color=\"gray.500\" />}\n      >\n        <BreadcrumbItem>\n          <BreadcrumbLink as={Link} to=\"/myfiles\">\n            My Validators\n          </BreadcrumbLink>\n        </BreadcrumbItem>\n\n        <BreadcrumbItem isCurrentPage>\n          <BreadcrumbLink>Add Validator</BreadcrumbLink>\n        </BreadcrumbItem>\n      </Breadcrumb>\n      <Flex\n        backgroundColor={\"white\"}\n        flexDir={\"column\"}\n        justifyContent={\"center\"}\n        alignItems=\"center\"\n        py=\"100px\"\n      >\n        <Flex\n          boxShadow={\"xl\"}\n          p={8}\n          rounded={\"xl\"}\n          align={\"center\"}\n          borderWidth={\"1px\"}\n          borderColor=\"gray.400\"\n          mb={5}\n        >\n          <Flex justifyContent=\"center\" flexDir={\"column\"} backgroundColor={\"white\"}>\n            <Box p=\"2\">\n              <Input\n                colorScheme=\"yellow\"\n                placeholder=\"Validator Name\"\n                isRequired\n                onChange={(e) => setfilename(e.target.value)}\n                value={filename}\n              />\n            </Box>\n            <FormControl display=\"flex\" justifyContent=\"center\" pb={2}>\n              <FormLabel htmlFor=\"public-file\" mb=\"0\">\n                Private\n              </FormLabel>\n              <Switch\n                id=\"public-file\"\n                defaultChecked={privateFile}\n                onChange={() => {\n                  setPrivateFile(!privateFile);\n                  if (!privateFile) {\n                    toast({\n                      title: \"Enabled! The File will be only visible to you.\",\n                      status: \"success\",\n                      duration: 10000,\n                      isClosable: true,\n                      position: \"top\",\n                    })\n                  }\n                  else\n                  {\n                    toast({\n                      title: \"Disabled! File is publicly visible.\",\n                      status: \"success\",\n                      duration: 10000,\n                      isClosable: true,\n                      position: \"top\",\n                    })\n                  }\n                }}\n              />\n            </FormControl>\n          </Flex>\n        </Flex>\n        <Box mx={\"40px\"}>\n        </Box>\n        <Center minW=\"max-content\" justifyContent={\"center\"} my={\"20px\"}>\n          <Button\n            leftIcon={<FaSave />}\n            colorScheme=\"yellow\"\n            onClick={submitform}\n            isLoading={loading}\n            isDisabled={!filename}\n          >\n            Create Validator\n          </Button>\n        </Center>\n      </Flex>\n    </>\n  );\n};\n\nexport default AddFile;\n"]},"metadata":{},"sourceType":"module"}