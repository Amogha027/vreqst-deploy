{"ast":null,"code":"var _jsxFileName = \"/home/amogha/btp/temp/VReqST-main/VReqST/frontend/client/src/Components/Project/Project.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Flex, Spinner, useToast, useDisclosure, Modal, ModalOverlay, ModalContent, ModalHeader, ModalCloseButton, ModalFooter, Input, FormControl, FormLabel, Box, Stack, Heading, Center, Image, Select } from \"@chakra-ui/react\";\nimport axios from \"axios\";\nimport { backend } from \"../../server_urls\";\nimport ProjectRow from \"./ProjectRow\";\nimport { FaPlus } from \"react-icons/fa\";\n\nconst Project = () => {\n  const [data, setdata] = useState([]);\n  const [files, setfiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const toast = useToast();\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const [projectName, setProjectName] = useState(\"\");\n  const [grammarName, setGrammarName] = useState(\"\");\n  const [submitLoading, setSubmitLoading] = useState(false);\n\n  const onCreate = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n    setSubmitLoading(true);\n\n    try {\n      const requestOptions = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: jwttoken\n        }\n      };\n      const res = await axios.post(\"api/project/new\", {\n        name: projectName,\n        grammarName: grammarName\n      }, requestOptions);\n      setdata(olddata => [...olddata, res.data]);\n      setProjectName(\"\");\n      setGrammarName(\"\");\n      onClose();\n      setSubmitLoading(false);\n      toast({\n        title: \"Project created successfully\",\n        status: \"success\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top-right\"\n      });\n    } catch (error) {\n      setSubmitLoading(false);\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\"\n      });\n      console.log(error);\n    }\n  };\n\n  const getmyprojects = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n\n    try {\n      const requestOptions = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: jwttoken\n        }\n      };\n      const res = await axios.get( // \"http://localhost:5002/api/project/my\",\n      backend + \"/api/project/my\", requestOptions);\n      setdata(res.data); // console.log(data);\n    } catch (error) {\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\"\n      });\n      console.log(error);\n    }\n  };\n\n  const getfiles = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\"); // let url = `http://localhost:5002/api/json/timeline`;\n\n    let url = backend + `/api/json/timeline`;\n\n    try {\n      const requestOptions = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: jwttoken\n        }\n      };\n      const res = await axios.get(url, requestOptions); // console.log(res);\n\n      setfiles(res.data); // alert(files)\n    } catch (error) {\n      toast({\n        title: \"Something went wrong 1\",\n        //Goes wrong\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\"\n      });\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    const f = async () => {\n      setLoading(true);\n      await getmyprojects();\n      await getfiles();\n      setLoading(false);\n    };\n\n    f();\n  }, []);\n\n  const handleGrammar = e => {\n    setGrammarName(e.target.value);\n  };\n\n  return loading ? React.createElement(React.Fragment, null, React.createElement(Flex, {\n    width: \"100vw\",\n    height: \"85vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(Spinner, {\n    thickness: \"4px\",\n    speed: \"0.65s\",\n    emptyColor: \"gray.200\",\n    color: \"blue.500\",\n    size: \"xl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }))) : React.createElement(Box, {\n    minH: \"85vh\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Flex, {\n    justifyContent: \"space-between\",\n    mx: \"60px\",\n    py: \"30px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(Heading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"My Projects\"), React.createElement(Button, {\n    leftIcon: React.createElement(FaPlus, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }),\n    colorScheme: \"gray\",\n    onClick: onOpen,\n    border: \"1px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Create Project\")), React.createElement(Flex, {\n    direction: \"column\",\n    mx: \"60px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, data.length > 0 ? data.map(row => {\n    return React.createElement(ProjectRow, {\n      key: row._id,\n      name: row.name,\n      organization: row.ownerid.organization,\n      owner: row.ownerid.name,\n      projid: row._id,\n      isFinished: row.isFinished,\n      grammarName: row.grammarName,\n      scene: row.scene,\n      asset: row.asset,\n      action: row.action,\n      custom: row.custom,\n      timeline: row.timeline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    });\n  }) : React.createElement(Center, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(Image, {\n    src: \"/assets/empty.png\",\n    maxW: \"300px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }))), React.createElement(Modal, {\n    onClose: onClose,\n    isOpen: isOpen,\n    isCentered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(ModalOverlay, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }), React.createElement(ModalContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, React.createElement(ModalHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, \"Create new project\"), React.createElement(ModalCloseButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }), React.createElement(Box, {\n    p: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    isRequired: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, \"Project Name\"), React.createElement(Input, {\n    value: projectName,\n    onChange: e => setProjectName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  })), React.createElement(FormControl, {\n    isRequired: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, \"Model Template Validator\"), React.createElement(Select, {\n    value: grammarName,\n    onChange: handleGrammar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"Select\"), files.map((p, index) => React.createElement(\"option\", {\n    key: index,\n    value: p.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, p.name))))), React.createElement(ModalFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(Stack, {\n    spacing: 2,\n    direction: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: onCreate,\n    disabled: submitLoading || !projectName || !grammarName,\n    isLoading: submitLoading,\n    loadingText: \"Creating\",\n    colorScheme: \"whatsapp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, \"Create\"), React.createElement(Button, {\n    onClick: onClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, \"Close\"))))));\n};\n\nexport default Project;","map":{"version":3,"sources":["/home/amogha/btp/temp/VReqST-main/VReqST/frontend/client/src/Components/Project/Project.jsx"],"names":["React","useState","useEffect","Button","Flex","Spinner","useToast","useDisclosure","Modal","ModalOverlay","ModalContent","ModalHeader","ModalCloseButton","ModalFooter","Input","FormControl","FormLabel","Box","Stack","Heading","Center","Image","Select","axios","backend","ProjectRow","FaPlus","Project","data","setdata","files","setfiles","loading","setLoading","toast","isOpen","onOpen","onClose","projectName","setProjectName","grammarName","setGrammarName","submitLoading","setSubmitLoading","onCreate","jwttoken","localStorage","getItem","requestOptions","headers","token","res","post","name","olddata","title","status","duration","isClosable","position","error","console","log","getmyprojects","get","getfiles","url","f","handleGrammar","e","target","value","length","map","row","_id","ownerid","organization","isFinished","scene","asset","action","custom","timeline","p","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Button,\n  Flex,\n  Spinner,\n  useToast,\n  useDisclosure,\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalCloseButton,\n  ModalFooter,\n  Input,\n  FormControl,\n  FormLabel,\n  Box,\n  Stack,\n  Heading,\n  Center,\n  Image,\n  Select,\n} from \"@chakra-ui/react\";\nimport axios from \"axios\";\nimport { backend } from \"../../server_urls\";\n\nimport ProjectRow from \"./ProjectRow\";\nimport { FaPlus } from \"react-icons/fa\";\n\nconst Project = () => {\n  const [data, setdata] = useState([]);\n  const [files, setfiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const toast = useToast();\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const [projectName, setProjectName] = useState(\"\");\n  const [grammarName, setGrammarName] = useState(\"\");\n  const [submitLoading, setSubmitLoading] = useState(false);\n\n  const onCreate = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n    setSubmitLoading(true);\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await axios.post(\n        \"api/project/new\",\n        { name: projectName, grammarName: grammarName },\n        requestOptions\n      );\n      setdata((olddata) => [...olddata, res.data]);\n      setProjectName(\"\")\n      setGrammarName(\"\")\n      onClose();\n      setSubmitLoading(false);\n      toast({\n        title: \"Project created successfully\",\n        status: \"success\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n    } catch (error) {\n      setSubmitLoading(false);\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n  };\n\n  const getmyprojects = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await axios.get(\n        // \"http://localhost:5002/api/project/my\",\n        backend + \"/api/project/my\",\n        requestOptions\n      );\n\n      setdata(res.data);\n      // console.log(data);\n    } catch (error) {\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n  };\n\n  const getfiles = async () => {\n    const jwttoken = localStorage.getItem(\"jwtToken\");\n    // let url = `http://localhost:5002/api/json/timeline`;\n    let url = backend + `/api/json/timeline`;\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await axios.get(url, requestOptions);\n      // console.log(res);\n\n      setfiles(res.data);\n      // alert(files)\n    } catch (error) {\n      toast({\n        title: \"Something went wrong 1\",  //Goes wrong\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    const f = async () => {\n      setLoading(true);\n      await getmyprojects();\n      await getfiles();\n      setLoading(false);\n    };\n    f();\n  }, []);\n\n  const handleGrammar = (e) => {\n    setGrammarName(e.target.value)\n  }\n\n  return loading ? (\n    <>\n      <Flex\n        width={\"100vw\"}\n        height={\"85vh\"}\n        justifyContent=\"center\"\n        alignItems={\"center\"}\n      >\n        <Spinner\n          thickness=\"4px\"\n          speed=\"0.65s\"\n          emptyColor=\"gray.200\"\n          color=\"blue.500\"\n          size=\"xl\"\n        />\n      </Flex>\n    </>\n  ) : (\n    <Box minH=\"85vh\">\n      <Flex justifyContent={\"space-between\"} mx={\"60px\"} py={\"30px\"}>\n        <Heading>My Projects</Heading>\n        <Button leftIcon={<FaPlus />} colorScheme=\"gray\" onClick={onOpen} border=\"1px\">\n          Create Project\n        </Button>\n      </Flex>\n      <Flex direction=\"column\" mx={\"60px\"}>\n        {data.length > 0 ? (\n          data.map((row) => {\n            return (\n              <ProjectRow\n                key={row._id}\n                name={row.name}\n                organization={row.ownerid.organization}\n                owner={row.ownerid.name}\n                projid={row._id}\n                isFinished={row.isFinished}\n                grammarName={row.grammarName}\n                scene={row.scene}\n                asset={row.asset}\n                action={row.action}\n                custom={row.custom}\n                timeline={row.timeline}\n              />\n            );\n          })\n        ) : (\n          <Center>\n            <Image src=\"/assets/empty.png\" maxW=\"300px\" />\n          </Center>\n        )}\n      </Flex>\n\n      <Modal onClose={onClose} isOpen={isOpen} isCentered>\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Create new project</ModalHeader>\n          <ModalCloseButton />\n          <Box p={10}>\n            <FormControl isRequired>\n              <FormLabel>Project Name</FormLabel>\n              <Input\n                value={projectName}\n                onChange={(e) => setProjectName(e.target.value)}\n              />\n            </FormControl>\n            <FormControl isRequired>\n              <FormLabel>Model Template Validator</FormLabel>\n              <Select value={grammarName} onChange={handleGrammar}>\n                <option value=\"\">Select</option>\n                {files.map((p, index) => (\n                  <option key={index} value={p.name}>\n                    {p.name}\n                  </option>\n                ))}\n              </Select>\n            </FormControl>\n          </Box>\n          <ModalFooter>\n            <Stack spacing={2} direction=\"row\">\n              <Button\n                onClick={onCreate}\n                disabled={submitLoading || !projectName || !grammarName}\n                isLoading={submitLoading}\n                loadingText=\"Creating\"\n                colorScheme={\"whatsapp\"}\n              >\n                Create\n              </Button>\n              <Button onClick={onClose}>Close</Button>\n            </Stack>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    </Box>\n  );\n};\n\nexport default Project;\n"]},"metadata":{},"sourceType":"module"}