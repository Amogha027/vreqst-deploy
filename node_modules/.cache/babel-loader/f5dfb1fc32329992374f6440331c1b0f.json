{"ast":null,"code":"import _objectWithoutProperties from\"/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _regeneratorRuntime from\"/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box,Button// Divider,\n,Flex,Grid,GridItem,Heading,Input,List,ListIcon,ListItem,Modal,ModalBody,ModalCloseButton,ModalContent,ModalFooter,ModalOverlay// Select,\n,Spinner,Stack,Tag,Text// Tooltip,\n,useDisclosure,useToast,Tabs,TabList,TabPanels,Tab,TabPanel,FormControl// Textarea,\n// VStack\n}from\"@chakra-ui/react\";import Axios from\"axios\";import React,{useEffect,useState}from\"react\";import AceEditor from\"react-ace\";import{FaExclamationCircle}from\"react-icons/fa\";import{BiDownload}from\"react-icons/bi\";import{CheckCircleIcon}from\"@chakra-ui/icons\";import{useParams}from\"react-router-dom\";import{useDrop}from'react-dnd';import{validation_server,backend}from\"../../server_urls\";import isJson from\"../../utils/checkjson\";import e from\"cors\";import semantics from\"../../utils/syntax.json\";import Behaviour from\"./Behaviour\";import{Link}from\"react-router-dom\";var errors=[];var rules=[];var valid_rule=[];var grammarDataArray=[];var flag=false;var fl=false;var tipcolors={number:\"orange\",object:\"green\",boolean:\"red\",string:\"yellow\",array:\"blue\"};var jsonValidator=function jsonValidator(grammar,validating){var keys=Object.keys(grammar);var keys22=Object.keys(validating);var grammarArray=Object.keys(grammar).filter(function(value){return!Object.keys(validating).includes(value);});var extraEntries=Object.keys(validating).filter(function(value){return!Object.keys(grammar).includes(value);});extraEntries.map(function(en){var app=1;for(var i=0;i<keys.length;i++){if(keys[i]===en||grammar[keys[i]].root===en||grammar[keys[i]].proot===en)app=0;}if(app){errors.push(\"\\\"\".concat(en,\"\\\" is invalid key in the JSON\"));}});grammarArray.map(function(en){var app=1;for(var i=0;i<keys22.length;i++){if(en===keys22[i]||grammar[en].root===keys22[i]||grammar[en].proot===keys22[i]){app=0;}}if(app===1){errors.push(\"\\\"\".concat(en,\"\\\" is a mandatory field! Please add the field with \").concat(grammar[en].typeof,\" type\"));}});for(var i=0;i<keys.length;i++){var key=keys[i];if(grammar[key].hasOwnProperty('proot')){var a=validating[grammar[key].proot];for(var _i=0;_i<a.length;_i++){var c=a[_i];if(c.hasOwnProperty(grammar[key].root)){if(typeof c[grammar[key].root][key]===grammar[key].typeof){}else{if(typeof c[grammar[key].root][key]===\"undefined\"){errors.push(\"\\\"\".concat(key,\"\\\" is a mandatory field! Please add the field with \").concat(grammar[key].typeof,\" type\"));}else{errors.push(\" \\\"\".concat(key,\"\\\" has an invalid type of '\").concat(typeof c[grammar[key].root][key],\"'. Expected type of \").concat(grammar[key].typeof));}}}}}else if(grammar[key].hasOwnProperty('repeat')&&grammar[key].repeat===\"allow\"){var _a=grammar[key].root;var obje=Object.keys(validating);// let found = obje.indexOf(a);\nif(typeof validating[_a]===\"object\"){for(var _i2=0;_i2<validating[_a].length;_i2++){if(typeof validating[_a][_i2][key]===grammar[key].typeof||typeof validating[_a][_i2][key]===\"object\"&&grammar[key].typeof===\"array\"){}else{if(typeof validating[_a][_i2][key]===\"undefined\"){errors.push(\"\\\"\".concat(key,\"\\\" is a mandatory field! Please add the field with \").concat(grammar[key].typeof,\" type\"));}else{errors.push(\" \\\"\".concat(key,\"\\\" has an invalid type of '\").concat(typeof validating[_a][_i2][key],\"'. Expected type of \").concat(grammar[key].typeof));}}}}}else{if(grammar[key].root==='null'||grammar[key].root==='undefined'||!grammar[key].hasOwnProperty('root')){if(typeof validating[key]===\"undefined\"){continue;}// Handling nested objects recursively\nif(typeof validating[key]===\"object\"&&grammar[key].typeof===\"object\"){continue;}if(typeof validating[key]!==grammar[key].typeof){errors.push(\" \\\"\".concat(key,\"\\\" has an invalid type of '\").concat(typeof validating[key],\"'. Expected type of \").concat(grammar[key].typeof));}else{// alert(\"sucess\");\n}if(typeof validating[key]===\"string\"&&typeof validating[key]===grammar[key].typeof&&grammar[key].req===\"mandatory\"&&validating[key].length===0){errors.push(\"\\\"\".concat(key,\"\\\" is mandatory, empty string is not allowed\"));}}else{var _a2=grammar[key].root;if(false){for(var _i3=0;_i3<validating[_a2].length;_i3++){if(typeof validating[_a2][_i3].key===grammar[key].typeof){alert(\"Sucess\");}else{//alert(\"Failure\");\n//errors.push(\"kindly see the json syntax\");\nerrors.push(\"\\\"\".concat(key,\"\\\" has invalid type, expected \\\"\").concat(grammar[key].typeof,\"\\\"\"));}}}else{var b=validating[_a2];//alert(a);\nvar _c=Object.keys(b);var found=_c.indexOf(key);if(typeof validating[_a2][_c[found]]===grammar[key].typeof||typeof validating[_a2][_c[found]]===\"object\"&&grammar[key].typeof===\"array\"){//alert(\"Sucess!!!!!!\");\n}else{if(typeof validating[_a2][_c[found]]===\"undefined\"){errors.push(\"\\\"\".concat(key,\"\\\" is a mandatory field! Please add the field with \").concat(grammar[key].typeof,\" type\"));}else{errors.push(\" \\\"\".concat(key,\"\\\" has an invalid type of '\").concat(typeof validating[_a2][_c[found]],\"'. Expected type of \").concat(grammar[key].typeof));}}}}}}if(errors.length>0){console.log(errors);return true;}return false;};var ProjectPageContent=function ProjectPageContent(_ref){var stepslen=_ref.stepslen,nextStep=_ref.nextStep,prevStep=_ref.prevStep,reset=_ref.reset,activeStep=_ref.activeStep,scene=_ref.scene,action=_ref.action,asset=_ref.asset,projectname=_ref.projectname,timeline=_ref.timeline,custom=_ref.custom;var toast=useToast();var _useParams=useParams(),projectid=_useParams.projectid;var jwttoken=localStorage.getItem(\"jwtToken\");var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),val=_React$useState2[0],setValue=_React$useState2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setfiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),submitting=_useState6[0],setSubmitting=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setdata=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),grammarid=_useState10[0],setGrammarid=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),validated=_useState12[0],setValidated=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),grammarbundle=_useState14[0],setGrammarbundle=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),displayErrors=_useState16[0],setDisplayErrors=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),rule_list=_useState18[0],setRuleList=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),names=_useState20[0],setNames=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),arr=_useState22[0],setArr=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),idx=_useState24[0],setIdx=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),downloadable=_useState26[0],setDownloadable=_useState26[1];var _useDisclosure=useDisclosure(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose;var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),description=_useState28[0],setDescription=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),perdata=_useState30[0],setPerdata=_useState30[1];var _useState31=useState(0),_useState32=_slicedToArray(_useState31,2),seed=_useState32[0],setSeed=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),rulename=_useState34[0],setRulename=_useState34[1];var _useState35=useState({\"row\":0,\"column\":0}),_useState36=_slicedToArray(_useState35,2),textPointer=_useState36[0],setTextPointer=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),position=_useState38[0],setPosition=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),savebutton=_useState40[0],setSavebutton=_useState40[1];var _useState41=useState({}),_useState42=_slicedToArray(_useState41,2),rule=_useState42[0],setRule=_useState42[1];var _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),logic=_useState44[0],setLogic=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),board=_useState46[0],setBoard=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),reorder=_useState48[0],setReorder=_useState48[1];var _useDrop=useDrop(function(){return{accept:\"behaviour\",drop:function drop(item){return setBoard(function(board){return!board.includes(item.obj)?[].concat(_toConsumableArray(board),[item.obj]):board;});},collect:function collect(monitor){return{isOver:monitor.isOver(),canDrop:monitor.canDrop()};}};}),_useDrop2=_slicedToArray(_useDrop,2),_useDrop2$=_useDrop2[0],isOver=_useDrop2$.isOver,canDrop=_useDrop2$.canDrop,drop=_useDrop2[1];var handleReorder=function handleReorder(dragIndex,hoverIndex){var dragged=board[dragIndex];var newBoard=_toConsumableArray(board);newBoard.splice(dragIndex,1);newBoard.splice(hoverIndex,0,dragged);setBoard(newBoard);};var convertPointer=function convertPointer(pointer,lines){var pos=0;for(var i=0;i<=pointer.row-1;i++){pos+=lines[i].length;if(lines[i].length===0)pos+=1;}pos+=pointer.column;if(pointer.column===0)pos+=1;setPosition(pos);};var getFiles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions,res,requestOption,res2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;requestOptions={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};_context.next=4;return Axios.get(// `http://localhost:5002/api/json/timeline`,\nbackend+\"/api/json/timeline\",requestOptions);case 4:res=_context.sent;requestOption={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};_context.next=8;return Axios.get(// `http://localhost:5002/api/project/${projectid}/grammarName`,\nbackend+\"/api/project/\".concat(projectid,\"/grammarName\"),requestOption);case 8:res2=_context.sent;setfiles(res.data);res.data.map(function(p){if(p.name===res2.data.grammarName){if(grammarDataArray.length!==5){grammarDataArray.push(p.scene);grammarDataArray.push(p.asset);grammarDataArray.push(p.action);grammarDataArray.push(p.custom);grammarDataArray.push(p.timeline);}}});_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);toast({title:\"Something went wrong\",//Goes wrong\nstatus:\"error\",duration:10000,isClosable:true,position:\"top\"});console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function getFiles(){return _ref2.apply(this,arguments);};}();var getRules=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res_rules;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.post(// \"http://localhost:5002/api/custom/get-custom-rules\",\nbackend+\"/api/custom/get-custom-rules\",{headers:{\"Content-Type\":\"application/json\",token:jwttoken},data:{project_id:projectid}});case 2:res_rules=_context2.sent;setRuleList(res_rules.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getRules(){return _ref3.apply(this,arguments);};}();useEffect(function(){setLoading(true);getFiles();getRules();if(activeStep===0){setdata(scene);fl=false;if(isJson(scene)){setDownloadable(true);}}if(activeStep===1){if(asset===''){setNames([]);setArr([]);setdata('');}else{var myobjs=JSON.parse(asset);var all_names=[];var tarr=myobjs.articles;myobjs.articles.map(function(c,i){all_names.push(c._objectname);});setNames(all_names);setArr(tarr);setdata(JSON.stringify(tarr[idx],null,'\\t'));}// setdata(asset);\nfl=false;if(isJson(asset)){setDownloadable(true);}}if(activeStep===2){if(action===''){setNames([]);setArr([]);setdata('');}else{var _myobjs=JSON.parse(action);var _all_names=[];var _tarr=_myobjs.ObjAction;_myobjs.ObjAction.map(function(c,i){_all_names.push(c.actresid);});setNames(_all_names);setArr(_tarr);setdata(JSON.stringify(_tarr[idx],null,'\\t'));}// setdata(action)\nfl=false;if(isJson(action)){setDownloadable(true);}}if(activeStep===3){// setdata(custom);\nfl=false;if(isJson(custom)){setDownloadable(true);}}if(activeStep===4){setdata(timeline);fl=false;if(isJson(timeline)){setDownloadable(true);}}setLoading(false);},[]);var downloadTxtFile=function downloadTxtFile(){if(data===\"\"||!isJson(data)){toast({title:\"JSON Syntax is not correct\",status:\"error\",duration:5000,isClosable:true,position:\"top-right\"});setDownloadable(false);return;}var fileName=\"\";if(activeStep===0)fileName=\"scene\";if(activeStep===1)fileName=\"asset\";if(activeStep===2)fileName=\"action\";if(activeStep===3)fileName=\"custom\";if(activeStep===4)fileName=\"timeline\";var json=data;var blob=new Blob([json],{type:\"application/json\"});var href=URL.createObjectURL(blob);var downlink=document.createElement(\"a\");downlink.href=href;downlink.download=projectname+\"-\"+fileName+\".json\";document.body.appendChild(downlink);downlink.click();// clean up \"a\" element & remove ObjectURL\ndocument.body.removeChild(downlink);URL.revokeObjectURL(href);};var handleInputChange=function handleInputChange(e){var inputValue=e.target.value;setValue(inputValue);};var asset_valid=function asset_valid(asset,asset_list,flag){// if flag is zero, dont print any errors\nvar valid_obj=false;asset_list.map(function(d,j){if(asset===d)valid_obj=true;// if(c.targetObj == d)\n//   valid_target = true;\n});if(valid_obj===false){setValidated(false);setDownloadable(false);if(flag){toast({title:\"Object \"+asset+\" is not listed in Asset JSON. Only assets present in Asset JSON are valid.\"+asset+\"  \"+asset_list,status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});}return-1;}return 1;};var assetValidator=function assetValidator(a,all_object_ids){a.map(function(c,i){var ret1=asset_valid(c.sourceObj,all_object_ids,1);var ret2;if(c.targetObj[c.targetObj.length-1]==='*'){ret2=1;}else ret2=asset_valid(c.targetObj,all_object_ids,1);if(ret1===-1){return false;}if(c.repeatactionfor!==null&&c.repeatactionfor.length!==0&&c.repeatactionfor[0]!==\" \"){var repeat_assets=[];var curr_word=\"\";Array.from(c.repeatactionfor).map(function(char,key){if(char===','||char===' '){if(curr_word!==\"\"&&curr_word!==\" \"&&curr_word.length!==0){repeat_assets.push(curr_word);curr_word=\"\";}}else curr_word=curr_word+char;});if(curr_word!==\"\"||curr_word!==\" \"||curr_word.length!==0)repeat_assets.push(curr_word);repeat_assets.map(function(word,key){var ret=asset_valid(word,all_object_ids,1);if(ret===-1){return false;}});if(ret2===-1&&c.targetObj[c.targetObj.length-1]!==\"*\"){toast({title:\"Please update the Target Object according to the reccomendations in the document.\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});return false;}else{if(asset_valid(c.targetObj,repeat_assets,0)===1){toast({title:\"Target object should not be a part of repeatactionfor.\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});return false;}}}});return true;};var onValidate2=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:toast({title:\"Validation successful\",status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});valid_rule.push({rulename:rulename,data_name:data,description:description});setDownloadable(true);setSavebutton(true);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function onValidate2(){return _ref4.apply(this,arguments);};}();var onValidate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var tarr,tnames,tdata,myjson,mygrm,all_object_ids,myobjs,a,i,c,_i4,_mygrm,_all_object_ids,_myobjs2,ret_asset;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:tarr=arr;tarr[idx]=JSON.parse(data);setArr(tarr);tnames=names;if(activeStep===1)tnames[idx]=tarr[idx]._objectname;else if(activeStep===2)tnames[idx]=tarr[idx].actresid;setNames(tnames);tdata=data;if(activeStep===1)tdata=JSON.stringify({articles:arr},null,4);else if(activeStep===2)tdata=JSON.stringify({ObjAction:arr},null,4);if(isJson(tdata)){_context4.next=13;break;}setValidated(false);setDownloadable(false);toast({title:\"JSON Syntax is not correct\",status:\"error\",duration:5000,isClosable:true,position:\"top-right\"});return _context4.abrupt(\"return\");case 13:setDisplayErrors([]);errors=[];myjson=JSON.parse(tdata);try{mygrm=\"\";if(activeStep===0)mygrm=JSON.parse(grammarDataArray[0]);else if(activeStep===1)mygrm=JSON.parse(grammarDataArray[1]);else if(activeStep===2)mygrm=JSON.parse(grammarDataArray[2]);else if(activeStep===3)mygrm=JSON.parse(grammarDataArray[3]);else if(activeStep===4)mygrm=JSON.parse(grammarDataArray[4]);// console.log(typeof errors);\n}catch(e){console.log(e);}_context4.prev=17;if(!(activeStep===2)){_context4.next=36;break;}_context4.prev=19;all_object_ids=[];myobjs=JSON.parse(asset);myobjs.articles.map(function(c,i){all_object_ids.push(c._sid);});a=myjson.ObjAction;for(i=0;i<a.length;i++){c=a[i].actresid;flag=true;if(c){rules.push(c);}}_context4.next=34;break;case 27:_context4.prev=27;_context4.t0=_context4[\"catch\"](19);console.log(_context4.t0);setValidated(false);setDownloadable(false);toast({title:\"There are errors in the specification. Please review the error message\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});return _context4.abrupt(\"return\");case 34:_context4.next=49;break;case 36:if(!(activeStep===1)){_context4.next=49;break;}_context4.prev=37;a=myjson.articles;for(_i4=0;_i4<a.length;_i4++){c=a[_i4]._objectname;flag=true;if(c){rules.push(c);}}_context4.next=49;break;case 42:_context4.prev=42;_context4.t1=_context4[\"catch\"](37);console.log(_context4.t1);setValidated(false);setDownloadable(false);toast({title:\"There are errors in the specification. Please review the error message\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});return _context4.abrupt(\"return\");case 49:_context4.next=54;break;case 51:_context4.prev=51;_context4.t2=_context4[\"catch\"](17);console.log(e);case 54:if(!(grammarDataArray.length===0)){_context4.next=57;break;}_context4.next=57;return getFiles();case 57:_context4.prev=57;_mygrm=\"\";if(activeStep===0)_mygrm=JSON.parse(grammarDataArray[0]);else if(activeStep===1)_mygrm=JSON.parse(grammarDataArray[1]);else if(activeStep===2)_mygrm=JSON.parse(grammarDataArray[2]);else if(activeStep===3)_mygrm=JSON.parse(grammarDataArray[3]);else if(activeStep===4)_mygrm=JSON.parse(grammarDataArray[4]);if(jsonValidator(_mygrm,myjson)){_context4.next=82;break;}if(!(activeStep===2)){_context4.next=77;break;}_all_object_ids=[];_myobjs2=JSON.parse(asset);_myobjs2.articles.map(function(c,i){_all_object_ids.push(c._sid);});ret_asset=assetValidator(myjson.ObjAction,_all_object_ids);if(ret_asset){_context4.next=72;break;}console.log(errors);toast({title:\"There are errors in the specification. Please review the error message\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});return _context4.abrupt(\"return\");case 72:setValidated(true);setDownloadable(true);toast({title:\"Validation Successful\",status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});case 75:_context4.next=80;break;case 77:setValidated(true);setDownloadable(true);toast({title:\"Validation Successful\",status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});case 80:_context4.next=84;break;case 82:console.log(errors);toast({title:\"There are errors in the specification. Please review the error message\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});case 84:setDisplayErrors(errors);_context4.next=91;break;case 87:_context4.prev=87;_context4.t3=_context4[\"catch\"](57);console.log(_context4.t3);toast({title:\"There are errors in the specification. Please review the error message\",status:\"warning\",duration:5000,isClosable:true,position:\"top-right\"});case 91:case\"end\":return _context4.stop();}}},_callee4,null,[[17,51],[19,27],[37,42],[57,87]]);}));return function onValidate(){return _ref5.apply(this,arguments);};}();var showValidateHandler=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var code,jsonData;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:code=data;jsonData=JSON.stringify({types:[{type:\"if\",order:[[\"condition\"],[\"scope\"]]},{type:\"else\",prev:[\"if\",\"else-if\"],order:[[\"scope\"]]},{type:\"else-if\",prev:[\"if\",\"else-if\"],order:[[\"condition\"],[\"scope\"]]},{type:\"switch\",order:[[\"condition\"],[\"scope\",[\"Case\"],[\"Default\"]]]},{type:\"switch-case\",order:[[\"condition\"],[\"scope\"]]},{type:\"switch-case-default\",order:[[\"scope\"]]},{type:\"for\",order:[[\"condition\",[\"conditionSeparator\",\"conditionSeparator\"]],[\"scope\"]]},{type:\"while\",order:[[\"condition\"],[\"scope\"]]},{type:\"do\",order:[[\"scope\"]],next:[\"do-while\"]},{type:\"do-while\",order:[[\"condition\"]],prev:[\"do\"]}],constructs:[{name:\"if\",type:\"if\",conditionStart:\"(\",conditionEnd:\")\",scopeStart:\"(\",scopeEnd:\")\"},{name:\"else-if\",type:\"else-if\",conditionStart:\"(\",conditionEnd:\")\",scopeStart:\"(\",scopeEnd:\")\",pre:[\"if\",\"else-if\"]},{name:\"else\",type:\"else\",scopeStart:\"(\",scopeEnd:\")\",pre:[\"if\",\"else-if\"]},{name:\"switch\",type:\"switch\",conditionStart:\"(\",conditionEnd:\")\",body:\"Case\",scopeStart:\"(\",scopeEnd:\")\",\"end-body\":\"default\"},{name:\"Case\",type:\"switch-case\",conditionStart:\"(\",conditionEnd:\")\",scopeStart:\"(\",scopeEnd:\")\",parent:\"switch\"},{name:\"Default\",type:\"switch-case-default\",scopeStart:\"(\",scopeEnd:\")\",parent:\"switch\"},{name:\"for\",type:\"for\",conditionStart:\"(\",conditionEnd:\")\",conditionSeparator:\"/\",scopeStart:\"(\",scopeEnd:\")\"},{name:\"while\",type:\"while\",conditionStart:\"(\",conditionEnd:\")\",scopeStart:\"(\",scopeEnd:\")\"},{name:\"do\",type:\"do\",scopeStart:\"(\",scopeEnd:\")\",next:\"do-while\"},{name:\"do-while\",type:\"do-while\",conditionStart:\"(\",conditionEnd:\")\"}],specialSymbols:[\"#\",\":\",\"!\",\"/\",\"(\",\")\"]});// fetch(`http://localhost:5001/api/upload`, {\nfetch(validation_server+'/api/upload',{headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},method:\"POST\",body:JSON.stringify({jsonData:jsonData})}).then(function(response){response.json().then(function(val){console.log(\"Uploaded\");console.log(val);}).catch(function(err){console.log(err);});}).catch(function(err){console.log(err);});// fetch(`http://localhost:5001/api/process`, {\nfetch(validation_server+'/api/process',{headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},method:\"POST\",body:JSON.stringify({code:code})}).then(function(response){response.json().then(function(val){if(val.valid){onValidate2();}else{setValidated(false);setDownloadable(false);toast({title:\"Error! Please follow conditional syntax.\",status:\"error\",duration:5000,isClosable:true,position:\"top-right\"});return;}}).catch(function(err){console.log(err);});}).catch(function(err){console.log(err);});case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function showValidateHandler(){return _ref6.apply(this,arguments);};}();var handleValidateButton=function handleValidateButton(){showValidateHandler(true);setValidated(true);};var saveButton=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return Axios.post(// \"http://localhost:5002/api/custom/upload-custom-rule\", {\nbackend+\"/api/custom/upload-custom-rule\",{headers:{\"Content-Type\":\"application/json\",token:jwttoken},data:{project_id:projectid,rulename:rulename,data_name:btoa(data),description:description}});case 3:res=_context6.sent;toast({title:\"Behaviour Added\",status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});setRuleList([].concat(_toConsumableArray(rule_list),[{project_id:projectid,rulename:rulename,data_name:btoa(data),description:description}]));setdata('');setRulename('');setDescription('');setValidated(false);_context6.next=15;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[0,12]]);}));return function saveButton(){return _ref7.apply(this,arguments);};}();var flushWrite=function flushWrite(){console.log('flushed everything!');setValidated(false);setdata('');setRulename('');setDescription('');};var onNextStep=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var tdata,url,requestOptions,res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:tdata=data;if(activeStep===1)tdata=JSON.stringify({articles:arr},null,4);else if(activeStep===2)tdata=JSON.stringify({ObjAction:arr},null,4);if(!(!isJson(data)&&activeStep!==3)){_context7.next=6;break;}setValidated(false);toast({title:\"JSON Syntax is not correct\",status:\"error\",duration:5000,isClosable:true,position:\"top\"});return _context7.abrupt(\"return\");case 6:setSubmitting(true);url=backend;if(activeStep===0)url=url+\"/api/project/\".concat(projectid,\"/scene\");else if(activeStep===1)url=url+\"/api/project/\".concat(projectid,\"/asset\");else if(activeStep===2)url=url+\"/api/project/\".concat(projectid,\"/action\");else if(activeStep===3)url=url+\"/api/project/\".concat(projectid,\"/custom\");else if(activeStep===4)url=url+\"/api/project/\".concat(projectid,\"/timeline\");_context7.prev=9;requestOptions={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};_context7.next=13;return Axios.patch(url,{data:tdata},requestOptions);case 13:res=_context7.sent;toast({title:res.data.message,status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});_context7.next=21;break;case 17:_context7.prev=17;_context7.t0=_context7[\"catch\"](9);toast({title:\"Something wents wrong\",status:\"error\",duration:10000,isClosable:true,position:\"top\"});console.log(_context7.t0);case 21:setSubmitting(false);nextStep();case 23:case\"end\":return _context7.stop();}}},_callee7,null,[[9,17]]);}));return function onNextStep(){return _ref8.apply(this,arguments);};}();var handel_name=function handel_name(e){setRulename(e.target.value);};var handel_description=function handel_description(e){setDescription(e.target.value);};var AddNewObj=function AddNewObj(){setIdx(arr.length);var tnames=names;tnames.push('');setNames(tnames);var tarr=arr;tarr.push('');setArr(tarr);setdata('');};var onFinish=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var url,requestOptions,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(isJson(data)){_context8.next=4;break;}setValidated(false);toast({title:\"JSON Syntax is not correct\",status:\"error\",duration:5000,isClosable:true,position:\"top\"});return _context8.abrupt(\"return\");case 4:setSubmitting(true);url=backend;if(activeStep===0)url=url+\"/api/project/\".concat(projectid,\"/scene\");else if(activeStep===1)url=url+\"/api/project/\".concat(projectid,\"/asset\");else if(activeStep===2)url=url+\"/api/project/\".concat(projectid,\"/action\");else if(activeStep===3)url=url+\"/api/project/\".concat(projectid,\"/custom\");else if(activeStep===4)url=url+\"/api/project/\".concat(projectid,\"/timeline\");_context8.prev=7;requestOptions={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};_context8.next=11;return Axios.patch(url,{data:data},requestOptions);case 11:res=_context8.sent;toast({title:res.data.message,status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});_context8.next=19;break;case 15:_context8.prev=15;_context8.t0=_context8[\"catch\"](7);toast({title:\"Something went wrong\",status:\"error\",duration:10000,isClosable:true,position:\"top\"});console.log(_context8.t0);case 19:setSubmitting(false);onOpen();case 21:case\"end\":return _context8.stop();}}},_callee8,null,[[7,15]]);}));return function onFinish(){return _ref9.apply(this,arguments);};}();var saveCustom=function saveCustom(){var str='';board.map(function(p){if(str.length>0){str+=\",{\\\"rulename\\\":\\\"\".concat(p.rulename,\"\\\", \\\"description\\\":\\\"\").concat(p.description,\"\\\",\\\"logic\\\": \\\"\").concat(btoa(p.data_name),\"\\\"}\\n\");}else{str+=\"{\\\"rulename\\\":\\\"\".concat(p.rulename,\"\\\", \\\"description\\\":\\\"\").concat(p.description,\"\\\",\\\"logic\\\": \\\"\").concat(btoa(p.data_name),\"\\\"}\\n\");}});if(!fl){for(var i=0;i<rules.length;i++){rules[i]=\"\\\"\"+rules[i]+\"\\\"\";}fl=true;}setdata(\"{\\\"objects_used\\\":[\".concat(rules,\"],\\\"rules\\\":[\").concat(str,\"]}\"));toast({title:\"JSON is saved, click Next to continue\",status:\"success\",duration:5000,isClosable:true,position:\"top-right\"});setReorder(false);setDownloadable(true);setBoard([]);console.log(\"{\\\"objects_used\\\":[\".concat(rules,\"],\\\"rules\\\":[\").concat(str,\"]}\"));};return loading?React.createElement(React.Fragment,null,React.createElement(Flex,{width:\"80vw\",height:\"90vh\",justifyContent:\"center\",alignItems:\"center\"},React.createElement(Spinner,{thickness:\"4px\",speed:\"0.65s\",emptyColor:\"gray.200\",color:\"blue.500\",size:\"xl\"}))):React.createElement(React.Fragment,null,activeStep!==3?React.createElement(Grid,{templateColumns:\"repeat(6, 1fr)\",gap:4},React.createElement(GridItem,{rowSpan:3,colSpan:1},React.createElement(Flex,{flexDir:\"column\",pr:20,pt:120})),React.createElement(GridItem,{rowSpan:3,colSpan:3},React.createElement(Flex,{py:4,alignItems:\"center\",flexDir:\"column\"},React.createElement(Flex,{marginTop:20,marginBottom:10},React.createElement(AceEditor,{fontSize:16,showPrintMargin:true,showGutter:true,highlightActiveLine:true,setOptions:{enableBasicAutocompletion:true,enableLiveAutocompletion:true,enableSnippets:false,showLineNumbers:true,tabSize:2},mode:\"json\",theme:\"terminal\",onChange:function onChange(newvalue,event){setdata(newvalue);setDownloadable(false);},value:data,name:\"grammar-editor\",wrapEnabled:true,height:\"40em\",width:\"40em\"}),React.createElement(Stack,{marginLeft:10,py:4,direction:\"column\"},names.map(function(name,id){return React.createElement(React.Fragment,null,React.createElement(Button,{colorScheme:\"blue\",onClick:function onClick(){setIdx(id);if(name==='')setdata('');else setdata(JSON.stringify(arr[id],null,'\\t'));}},name));}))),React.createElement(Stack,{py:4,direction:\"row\"},React.createElement(Button,{colorScheme:\"yellow\",disabled:!data,onClick:onValidate},\"Validate\"),React.createElement(Button,{colorScheme:\"green\",disabled:!downloadable,onClick:downloadTxtFile,leftIcon:React.createElement(BiDownload,null)},\"Download File\"),activeStep===1|activeStep===2?React.createElement(Button,{colorScheme:\"yellow\",disabled:!data,onClick:AddNewObj},\"New\"):React.createElement(React.Fragment,null)),activeStep===stepslen?React.createElement(Flex,{px:4,py:4,width:\"100%\",flexDirection:\"column\"},React.createElement(Heading,{fontSize:\"xl\",textAlign:\"center\"},\"Woohoo! All steps completed!\"),React.createElement(Button,{mx:\"auto\",mt:6,size:\"sm\",onClick:reset},\"Reset\")):React.createElement(Flex,{width:\"100%\",justify:\"flex-end\"},React.createElement(Button,{isDisabled:activeStep===0,mr:4,onClick:prevStep,size:\"sm\",variant:\"outline\"},\"Prev\"),activeStep===stepslen-1?React.createElement(Button,{size:\"sm\",onClick:onFinish,disabled:!validated,isLoading:submitting,colorScheme:\"green\",variant:\"outline\"},\"Finish\"):React.createElement(Button,{size:\"sm\",onClick:onNextStep,disabled:!validated,isLoading:submitting,colorScheme:\"yellow\",variant:\"outline\"},\"Next\")))),React.createElement(GridItem,{rowSpan:3,colSpan:2,pt:120},React.createElement(Flex,{flexDir:\"column\",pl:20},displayErrors.length>0?React.createElement(List,{spacing:2},displayErrors.map(function(e,i){var str=\"\";var splitarr=e.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);var Val;if(splitarr.length===12){splitarr.map(function(m,i){return i!==0&&i!==10&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},splitarr[0]),React.createElement(Text,{as:\"span\"},str),React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},\" \"+splitarr[10])));};}if(splitarr.length===7||splitarr.length===8){splitarr.map(function(m,i){return i!==0&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:\"teal.400\"},splitarr[0]),React.createElement(Text,{as:\"span\"},str)));};}if(splitarr.length===11){splitarr.map(function(m,i){return i!==0&&i!==10&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},splitarr[0]),React.createElement(Text,{as:\"span\"},str),React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},\" \"+splitarr[10])));};}return React.createElement(ListItem,{key:i},React.createElement(ListIcon,{as:FaExclamationCircle,color:\"red.500\"}),React.createElement(Val,null));})):React.createElement(React.Fragment,null))),React.createElement(Modal,{onClose:onClose,isOpen:isOpen,isCentered:true},React.createElement(ModalOverlay,null),React.createElement(ModalContent,null,React.createElement(ModalCloseButton,null),React.createElement(ModalBody,null,React.createElement(Box,{textAlign:\"center\",py:10,px:6},React.createElement(CheckCircleIcon,{boxSize:\"50px\",color:\"green.500\"}),React.createElement(Heading,{as:\"h2\",size:\"xl\",mt:6,mb:2},\"Your specification are successful saved!\"),React.createElement(Text,{color:\"gray.500\"},\"We have made sure that your data is free from any data-types or syntax errors. Happy Development!\"))),React.createElement(ModalFooter,null,React.createElement(Button,null,React.createElement(Flex,{as:Link,to:\"/projects\"},\"Close\")))))):React.createElement(React.Fragment,null,React.createElement(Tabs,{isFitted:true,variant:\"unstyled\",marginTop:10},React.createElement(TabList,{mb:\"1em\"},React.createElement(Tab,{_selected:{color:'white',bg:'blue.300'}},\"Author Custom Behaviour\"),React.createElement(Tab,{_selected:{color:'white',bg:'blue.300'}},\"View Authored Custom Behaviours\"),React.createElement(Tab,{_selected:{color:'white',bg:'blue.300'}},\"Publish\")),React.createElement(TabPanels,null,React.createElement(TabPanel,null,React.createElement(\"div\",null,React.createElement(Grid,{templateColumns:\"repeat(8, 1fr)\",gap:2},React.createElement(GridItem,{rowSpan:8,colStart:1,colEnd:8},React.createElement(Flex,{py:4,alignItems:\"center\",flexDir:\"column\"},React.createElement(Text,{fontSize:\"xl\"},\"Author your custom behaviours below.\"),React.createElement(Flex,{flexDir:\"row\",marginTop:10},React.createElement(Text,{fontSize:\"lg\"},\"Behaviour Name:\"),React.createElement(Flex,null,React.createElement(FormControl,{paddingRight:10,paddingLeft:2},React.createElement(Input,{value:rulename,onChange:handel_name,placeholder:\"Name\",size:\"sm\"}))),React.createElement(Text,{fontSize:\"lg\"},\"Behaviour Description:\"),React.createElement(Flex,null,React.createElement(FormControl,{paddingLeft:2},React.createElement(Input,{value:description,onChange:handel_description,placeholder:\"Description\",size:\"sm\"})))),React.createElement(Flex,{flexDir:\"row\",paddingTop:10,paddingLeft:35,marginLeft:20},React.createElement(Box,{as:\"pane\",bg:\"grey\",_dark:{bg:\"gray.800\"},h:\"32em\",w:\"12em\"},React.createElement(Box,{as:\"pane\",zIndex:\"fixed\",h:\"300px\",overflowX:\"hidden\",overflowY:\"auto\",w:\"400px\",colorScheme:\"yellow\"},React.createElement(Flex,{px:\"4\",pb:\"3\",pt:\"5\",align:\"center\"},React.createElement(Text,{fontSize:\"2xl\",ml:\"2\",color:\"white\",fontWeight:\"semibold\"},\"Code Constructs\")),React.createElement(Flex,{direction:\"column\",as:\"nav\",fontSize:\"lg\",color:\"white\",\"aria-label\":\"Main Navigation\",margin:5,marginTop:2,marginLeft:7},semantics.elements.map(function(p){return React.createElement(\"a\",{onClick:function onClick(){console.log(position);var newdata_part1=data.slice(0,position);var newdata_part2=data.slice(position);setdata(newdata_part1+p.editorDisplay+newdata_part2);},color:\"white\"},React.createElement(\"span\",null,p.displayName));})))),React.createElement(Flex,{marginLeft:10,marginRight:10,marginBottom:10},React.createElement(AceEditor,{fontSize:16,showPrintMargin:true,showGutter:true,highlightActiveLine:true,setOptions:{enableBasicAutocompletion:true,enableLiveAutocompletion:true,enableSnippets:false,showLineNumbers:true,tabSize:2},mode:\"json\",theme:\"terminal\",onChange:function onChange(newvalue,event){fl=false;setdata(newvalue);setDownloadable(false);},onCursorChange:function onCursorChange(newplace){convertPointer({\"row\":newplace.cursor.row,\"column\":newplace.cursor.column},newplace.cursor.document.$lines);},onSelectionChange:function onSelectionChange(e){convertPointer({\"row\":e.cursor.row,\"column\":e.cursor.column},e.doc.$lines);},value:data,name:\"grammar-editor\",wrapEnabled:true,height:\"40em\",width:\"40em\",id:\"editor\"})),React.createElement(Box,{as:\"pane\",bg:\"grey\",_dark:{bg:\"gray.800\"},h:\"32em\",w:\"18em\"},React.createElement(Box// navbar\n,{as:\"pane\",zIndex:\"fixed\",h:\"300px\",pb:\"10\",overflowX:\"hidden\",overflowY:\"auto\",bg:\"grey\",w:\"400px\"},React.createElement(Flex,{px:\"4\",pb:\"3\",pt:\"5\",align:\"center\"},React.createElement(Text,{fontSize:\"2xl\",ml:\"2\",color:\"white\",fontWeight:\"semibold\"},\"Action-Responses\")),React.createElement(Flex,{direction:\"column\",as:\"nav\",fontSize:\"lg\",color:\"white\",\"aria-label\":\"Main Navigation\",margin:5,marginTop:2,marginLeft:7},flag?rules.map(function(p){return React.createElement(\"a\",{onClick:function onClick(){var newdata_part1=data.slice(0,position);var newdata_part2=data.slice(position);setdata(newdata_part1+p+newdata_part2);},color:\"white\"},p);}):React.createElement(React.Fragment,null,React.createElement(Text,null,\"No recent files...\")))))),React.createElement(Stack,{py:4,direction:\"row\"},React.createElement(Button,{colorScheme:\"yellow\",disabled:!(data&&rulename&&description),onClick:function onClick(){handleValidateButton();setSeed(Math.random());}},\"Validate\"),React.createElement(Button,{colorScheme:\"green\",disabled:!validated,onClick:function onClick(){saveButton();}},\"Save\"),React.createElement(Button,{colorScheme:\"red\",disabled:!(data||rulename||description),onClick:function onClick(){flushWrite();}},\"Flush\")),activeStep===stepslen?React.createElement(Flex,{px:4,py:4,width:\"100%\",flexDirection:\"column\"},React.createElement(Heading,{fontSize:\"xl\",textAlign:\"center\"},\"Woohoo! All steps completed!\"),React.createElement(Button,{mx:\"auto\",mt:6,size:\"sm\",onClick:reset},\"Reset\")):React.createElement(Flex,{width:\"100%\",justify:\"flex-end\"},React.createElement(Button,{isDisabled:activeStep===0,mr:4,onClick:prevStep,size:\"sm\",variant:\"outline\"},\"Prev\")))),React.createElement(GridItem,{rowSpan:3,colSpan:2,pt:120},React.createElement(Flex,{flexDir:\"column\",pl:20},displayErrors.length>0?React.createElement(List,{spacing:2},displayErrors.map(function(e,i){var str=\"\";var splitarr=e.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);var Val;if(splitarr.length===12){splitarr.map(function(m,i){return i!==0&&i!==10&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},splitarr[0]),React.createElement(Text,{as:\"span\"},str),React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},\" \"+splitarr[10])));};}if(splitarr.length===7||splitarr.length===8){splitarr.map(function(m,i){return i!==0&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:\"teal.400\"},splitarr[0]),React.createElement(Text,{as:\"span\"},str)));};}if(splitarr.length===11){splitarr.map(function(m,i){return i!==0&&i!==10&&(str=str+\" \"+m);});Val=function Val(){return React.createElement(React.Fragment,null,React.createElement(Text,{as:\"span\"},React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},splitarr[0]),React.createElement(Text,{as:\"span\"},str),React.createElement(Text,{as:\"span\",fontWeight:\"bold\",color:tipcolors[splitarr[10]]},\" \"+splitarr[10])));};}return React.createElement(ListItem,{key:i},React.createElement(ListIcon,{as:FaExclamationCircle,color:\"red.500\"}),React.createElement(Val,null));})):React.createElement(React.Fragment,null)))))),React.createElement(TabPanel,null,React.createElement(\"div\",null,React.createElement(Grid,{templateColumns:\"repeat(6, 1fr)\",gap:2},React.createElement(GridItem,{rowSpan:8,colStart:1,colEnd:8},React.createElement(Flex,{py:4,alignItems:\"center\",flexDir:\"column\"},React.createElement(Text,{fontSize:\"xl\"},\"Choose a custom behaviour to view the behaviour logic.\"),React.createElement(Flex,{flexDir:\"row\",paddingTop:10,paddingLeft:35,marginLeft:20},React.createElement(Stack,{direction:\"column\",marginRight:10},React.createElement(Flex,null,React.createElement(Text,{fontSize:\"lg\"},\"Behaviour Name: \",rule.rulename)),React.createElement(Flex,{paddingTop:2},React.createElement(Text,{fontSize:\"lg\"},\"Behaviour Description: \",rule.description)),React.createElement(Flex,{paddingTop:2},React.createElement(Text,{fontSize:\"lg\"},\"Behaviour Logic:\")),React.createElement(Flex,{paddingLeft:12},React.createElement(AceEditor,{fontSize:20,showPrintMargin:true,showGutter:true,highlightActiveLine:true,setOptions:{enableBasicAutocompletion:true,enableLiveAutocompletion:true,enableSnippets:false,showLineNumbers:true,tabSize:2},mode:\"json\",theme:\"terminal\",value:rule.data_name!=null?atob(rule.data_name):rule.data_name// value={logic}\n,name:\"grammar-editor\",wrapEnabled:true,height:\"28em\",width:\"32em\",readOnly:true}))),React.createElement(Box,{as:\"pane\",bg:\"grey\",_dark:{bg:\"gray.800\"},h:\"36em\",w:\"18em\"},React.createElement(Box// navbar\n,{as:\"pane\",zIndex:\"fixed\",h:\"300px\",pb:\"10\",overflowX:\"hidden\",overflowY:\"auto\",bg:\"grey\",w:\"400px\"},React.createElement(Flex,{px:\"4\",pb:\"3\",pt:\"5\",align:\"center\"},React.createElement(Text,{fontSize:\"2xl\",ml:\"2\",color:\"white\",fontWeight:\"semibold\"},\"Custom Behaviours\")),React.createElement(Flex,{direction:\"column\",as:\"nav\",fontSize:\"md\",color:\"white\",\"aria-label\":\"Main Navigation\",margin:5},rule_list.length>0?rule_list.map(function(p){return React.createElement(Text,{fontSize:\"xl\"},React.createElement(\"a\",{onClick:function onClick(){setRule(p);setLogic(p.data_name);},color:\"white\"},p.rulename));}):React.createElement(React.Fragment,null,React.createElement(Text,null,\"No recent files!\")))))),React.createElement(Flex,{marginTop:10},React.createElement(Button,{colorScheme:\"red\",disabled:!rule.rulename,onClick:function onClick(){setRule({});setLogic(\"\");}},\"Flush\"))))))),React.createElement(TabPanel,null,React.createElement(\"div\",null,React.createElement(Grid,{templateColumns:\"repeat(6, 1fr)\",gap:2},React.createElement(GridItem,{rowSpan:8,colStart:1,colEnd:8},React.createElement(Flex,{py:4,alignItems:\"center\",flexDir:\"column\"},React.createElement(Text,{fontSize:\"xl\"},\"Select and Publish final custom behaviours.\"),React.createElement(Text,null,\"Drag and drop custom behaviours from the behaviour section. Organise them in an order. On saving, the underlying specification will be published.\"),React.createElement(Flex,{flexDir:\"row\",paddingTop:10,paddingLeft:35,marginLeft:20},React.createElement(Flex,{paddingTop:10,marginRight:20},board.length>0?React.createElement(Box,{ref:drop,width:600,height:700,border:\"1px solid\",position:\"relative\",maxHeight:700,overflowY:\"auto\",justifyContent:\"center\"},React.createElement(Stack,{py:4,direction:\"column\",paddingLeft:5,paddingRight:5},board.map(function(p,index){return React.createElement(Button,{backgroundColor:\"blue.200\",height:10,width:\"auto\",draggable:true,onDragStart:function onDragStart(e){if(reorder){e.dataTransfer.setData('text/plain',index);}},onDragOver:function onDragOver(e){e.preventDefault();},onDrop:function onDrop(e){if(reorder){var dragIndex=parseInt(e.dataTransfer.getData('text/plain'),10);console.log(dragIndex);var hoverIndex=index;if(dragIndex!=hoverIndex){handleReorder(dragIndex,hoverIndex);}}}},React.createElement(Text,{fontSize:\"xl\"},p.rulename));}))):React.createElement(Box,{ref:drop,width:600,height:700,border:\"1px solid\",position:\"relative\",justifyContent:\"center\",alignItems:\"center\"},React.createElement(Text,{textAlign:\"center\"},\"Drop Here\"))),React.createElement(Stack,{py:4,direction:\"column\",maxHeight:800,overflowY:\"auto\"},React.createElement(Flex,{align:\"center\"},React.createElement(Text,{fontSize:\"2xl\"},\"Custom Behaviours\")),rule_list.length>0?rule_list.map(function(p){return React.createElement(Behaviour,{obj:p,reorder:reorder});}):React.createElement(React.Fragment,null,React.createElement(Text,{fontSize:\"xl\"},\"No recent files!\")))),React.createElement(Stack,{py:4,direction:\"row\",marginTop:10},React.createElement(Button,{colorScheme:\"yellow\",onClick:function onClick(){setReorder(true);},disabled:board.length===0,isLoading:submitting},\"Reorder\"),React.createElement(Button,{onClick:saveCustom,disabled:!reorder,isLoading:submitting,colorScheme:\"green\"},\"Save\"),React.createElement(Button,{onClick:function onClick(){setBoard([]);setReorder(false);},disabled:board.length===0,isLoading:submitting,colorScheme:\"red\"},\"Flush\"),React.createElement(Button,{colorScheme:\"green\",disabled:!downloadable,onClick:downloadTxtFile,leftIcon:React.createElement(BiDownload,null)},\"Download File\")),React.createElement(Flex,{width:\"70%\",justify:\"flex-end\"},React.createElement(Button,{size:\"sm\",onClick:onNextStep,disabled:board.length,isLoading:submitting,colorScheme:\"yellow\",variant:\"outline\"},\"Next\")))))))))));};var CustomCard=React.forwardRef(function(_ref10,ref){var children=_ref10.children,rest=_objectWithoutProperties(_ref10,[\"children\"]);return React.createElement(Box,{p:\"1\"},React.createElement(Tag,Object.assign({ref:ref},rest),children));});export default ProjectPageContent;","map":{"version":3,"sources":["/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/src/Components/Project/ProjectPageContent.jsx"],"names":["Box","Button","Flex","Grid","GridItem","Heading","Input","List","ListIcon","ListItem","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalOverlay","Spinner","Stack","Tag","Text","useDisclosure","useToast","Tabs","TabList","TabPanels","Tab","TabPanel","FormControl","Axios","React","useEffect","useState","AceEditor","FaExclamationCircle","BiDownload","CheckCircleIcon","useParams","useDrop","validation_server","backend","isJson","e","semantics","Behaviour","Link","errors","rules","valid_rule","grammarDataArray","flag","fl","tipcolors","number","object","boolean","string","array","jsonValidator","grammar","validating","keys","Object","keys22","grammarArray","filter","value","includes","extraEntries","map","en","app","i","length","root","proot","push","typeof","key","hasOwnProperty","a","c","repeat","obje","req","alert","b","found","indexOf","console","log","ProjectPageContent","stepslen","nextStep","prevStep","reset","activeStep","scene","action","asset","projectname","timeline","custom","toast","projectid","jwttoken","localStorage","getItem","val","setValue","files","setfiles","loading","setLoading","submitting","setSubmitting","data","setdata","grammarid","setGrammarid","validated","setValidated","grammarbundle","setGrammarbundle","displayErrors","setDisplayErrors","rule_list","setRuleList","names","setNames","arr","setArr","idx","setIdx","downloadable","setDownloadable","isOpen","onOpen","onClose","description","setDescription","perdata","setPerdata","seed","setSeed","rulename","setRulename","textPointer","setTextPointer","position","setPosition","savebutton","setSavebutton","rule","setRule","logic","setLogic","board","setBoard","reorder","setReorder","accept","drop","item","obj","collect","monitor","isOver","canDrop","handleReorder","dragIndex","hoverIndex","dragged","newBoard","splice","convertPointer","pointer","lines","pos","row","column","getFiles","requestOptions","headers","token","get","res","requestOption","res2","p","name","grammarName","title","status","duration","isClosable","getRules","post","project_id","res_rules","myobjs","JSON","parse","all_names","tarr","articles","_objectname","stringify","ObjAction","actresid","downloadTxtFile","fileName","json","blob","Blob","type","href","URL","createObjectURL","downlink","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","handleInputChange","inputValue","target","asset_valid","asset_list","valid_obj","d","j","assetValidator","all_object_ids","ret1","sourceObj","ret2","targetObj","repeatactionfor","repeat_assets","curr_word","Array","from","char","word","ret","onValidate2","data_name","onValidate","tnames","tdata","myjson","mygrm","_sid","ret_asset","showValidateHandler","code","jsonData","types","order","prev","next","constructs","conditionStart","conditionEnd","scopeStart","scopeEnd","pre","parent","conditionSeparator","specialSymbols","fetch","method","then","response","catch","err","valid","handleValidateButton","saveButton","btoa","flushWrite","onNextStep","url","patch","message","handel_name","handel_description","AddNewObj","onFinish","saveCustom","str","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","newvalue","event","id","splitarr","match","Val","m","color","bg","elements","newdata_part1","slice","newdata_part2","editorDisplay","displayName","newplace","cursor","$lines","doc","Math","random","atob","index","dataTransfer","setData","preventDefault","parseInt","getData","CustomCard","forwardRef","ref","children","rest"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  // Divider,\n  Flex,\n  Grid,\n  GridItem,\n  Heading,\n  Input,\n  List,\n  ListIcon,\n  ListItem,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalOverlay,\n  // Select,\n  Spinner,\n  Stack,\n  Tag,\n  Text,\n  // Tooltip,\n  useDisclosure,\n  useToast,\n  Tabs,\n  TabList,\n  TabPanels,\n  Tab,\n  TabPanel,\n  FormControl,\n  // Textarea,\n  // VStack\n} from \"@chakra-ui/react\";\nimport Axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport AceEditor from \"react-ace\";\nimport { FaExclamationCircle } from \"react-icons/fa\";\nimport { BiDownload } from \"react-icons/bi\";\nimport { CheckCircleIcon } from \"@chakra-ui/icons\";\nimport { useParams } from \"react-router-dom\";\nimport { useDrop } from 'react-dnd';\nimport { validation_server, backend } from \"../../server_urls\";\n\nimport isJson from \"../../utils/checkjson\";\nimport e from \"cors\";\nimport semantics from \"../../utils/syntax.json\";\nimport Behaviour from \"./Behaviour\";\nimport { Link } from \"react-router-dom\";\n\nlet errors = [];\nlet rules = [];\nlet valid_rule = [];\nlet grammarDataArray = [];\nlet flag = false;\nlet fl = false;\n\nconst tipcolors = {\n  number: \"orange\",\n  object: \"green\",\n  boolean: \"red\",\n  string: \"yellow\",\n  array: \"blue\",\n};\n\nconst jsonValidator = (grammar, validating) => {\n  const keys = Object.keys(grammar);\n  const keys22 = Object.keys(validating);\n\n  const grammarArray = Object.keys(grammar).filter(\n    (value) => !Object.keys(validating).includes(value)\n  );\n\n  const extraEntries = Object.keys(validating).filter(\n    (value) => !Object.keys(grammar).includes(value)\n  );\n\n  extraEntries.map((en) => {\n    let app = 1;\n\n    for (let i = 0; i < keys.length; i++) {\n      if (keys[i] === en || grammar[keys[i]].root === en || grammar[keys[i]].proot === en) \n        app = 0;\n    }\n    if (app) {\n      errors.push(`\"${en}\" is invalid key in the JSON`);\n    }\n  });\n\n  grammarArray.map((en) => {\n    let app = 1;\n    for (let i = 0; i < keys22.length; i++) {\n      if (en === keys22[i] || grammar[en].root === keys22[i] || grammar[en].proot === keys22[i]) {\n        app = 0;\n      }\n    }\n    if (app === 1) {\n      errors.push(\n        `\"${en}\" is a mandatory field! Please add the field with ${grammar[en].typeof} type`\n      );\n    }\n  })\n\n  for (let i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (grammar[key].hasOwnProperty('proot')) {\n      let a = validating[grammar[key].proot];\n      for (let i = 0; i < a.length; i++) {\n        let c = a[i];\n        if (c.hasOwnProperty(grammar[key].root)) {\n          if (typeof c[grammar[key].root][key] === grammar[key].typeof) {\n          }\n          else {\n            if (typeof c[grammar[key].root][key] === \"undefined\") {\n              errors.push(\n                `\"${key}\" is a mandatory field! Please add the field with ${grammar[key].typeof} type`\n              );\n            }\n            else {\n              errors.push(\n                ` \"${key}\" has an invalid type of '${typeof c[grammar[key].root][key]}'. Expected type of ${grammar[key].typeof}`\n              );\n            }\n          }\n        }\n      }\n    }\n    else if (grammar[key].hasOwnProperty('repeat') && grammar[key].repeat === \"allow\") {\n      let a = grammar[key].root;\n      var obje = Object.keys(validating);\n      // let found = obje.indexOf(a);\n\n      if (typeof validating[a] === \"object\") {\n        for (let i = 0; i < validating[a].length; i++) {\n          if (typeof validating[a][i][key] === grammar[key].typeof || (typeof validating[a][i][key] === \"object\" && grammar[key].typeof === \"array\")) {\n          }\n          else {\n            if (typeof validating[a][i][key] === \"undefined\") {\n              errors.push(\n                `\"${key}\" is a mandatory field! Please add the field with ${grammar[key].typeof} type`\n              );\n            }\n            else {\n              errors.push(\n                ` \"${key}\" has an invalid type of '${typeof validating[a][i][\n                key\n                ]}'. Expected type of ${grammar[key].typeof}`\n              );\n            }\n          }\n        }\n      }\n    }\n    else {\n      if (grammar[key].root === 'null' || grammar[key].root === 'undefined' || (!grammar[key].hasOwnProperty('root'))) {\n        if (typeof validating[key] === \"undefined\") {\n          continue;\n        }\n\n        // Handling nested objects recursively\n        if (\n          typeof validating[key] === \"object\" &&\n          grammar[key].typeof === \"object\"\n        ) {\n          continue;\n        }\n\n        if (typeof validating[key] !== grammar[key].typeof) {\n          errors.push(\n            ` \"${key}\" has an invalid type of '${typeof validating[\n            key\n            ]}'. Expected type of ${grammar[key].typeof}`\n          );\n        }\n        else {\n          // alert(\"sucess\");\n        }\n\n        if (\n          typeof validating[key] === \"string\" &&\n          typeof validating[key] === grammar[key].typeof &&\n          grammar[key].req === \"mandatory\" &&\n          validating[key].length === 0\n        ) {\n          errors.push(`\"${key}\" is mandatory, empty string is not allowed`);\n        }\n      }\n      else {\n        let a = grammar[key].root;\n        if (false) {\n          for (let i = 0; i < validating[a].length; i++) {\n            if (typeof validating[a][i].key === grammar[key].typeof) {\n              alert(\"Sucess\");\n            }\n            else {\n              //alert(\"Failure\");\n              //errors.push(\"kindly see the json syntax\");\n              errors.push(`\"${key}\" has invalid type, expected \"${grammar[key].typeof}\"`);\n            }\n          }\n        }\n        else {\n          var b = validating[a];\n          //alert(a);\n          let c = Object.keys(b);\n          let found = c.indexOf(key)\n          if (typeof validating[a][c[found]] === grammar[key].typeof || (typeof validating[a][c[found]] === \"object\" && grammar[key].typeof === \"array\")) {\n            //alert(\"Sucess!!!!!!\");\n          }\n          else {\n            if (typeof validating[a][c[found]] === \"undefined\") {\n              errors.push(\n                `\"${key}\" is a mandatory field! Please add the field with ${grammar[key].typeof} type`\n              );\n\n            }\n            else {\n              errors.push(\n                ` \"${key}\" has an invalid type of '${typeof validating[a][c[found]]\n                }'. Expected type of ${grammar[key].typeof}`\n              );\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (errors.length > 0) {\n    console.log(errors);\n    return true;\n  }\n  return false;\n};\n\nconst ProjectPageContent = ({\n  stepslen,\n  nextStep,\n  prevStep,\n  reset,\n  activeStep,\n  scene,\n  action,\n  asset,\n  projectname,\n  timeline,\n  custom,\n}) => {\n  const toast = useToast();\n  const { projectid } = useParams();\n  const jwttoken = localStorage.getItem(\"jwtToken\");\n\n  let [val, setValue] = React.useState(\"\");\n  const [files, setfiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [data, setdata] = useState(\"\");\n  const [grammarid, setGrammarid] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [grammarbundle, setGrammarbundle] = useState({});\n  const [displayErrors, setDisplayErrors] = useState([]);\n  const [rule_list, setRuleList] = useState([]);\n  const [names, setNames] = useState([]);\n  const [arr, setArr] = useState([]);\n  const [idx, setIdx] = useState(0);\n\n  const [downloadable, setDownloadable] = useState(false);\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const [description, setDescription] = useState(\"\");\n  const [perdata, setPerdata] = useState(\"\");\n  const [seed, setSeed] = useState(0);\n  const [rulename, setRulename] = useState(\"\");\n  const [textPointer, setTextPointer] = useState({\"row\": 0, \"column\": 0});\n\n  const [position, setPosition] = useState(0);\n  const [savebutton, setSavebutton] = useState(false);\n  const [rule, setRule] = useState({});\n  const [logic, setLogic] = useState(\"\");\n  const [board, setBoard] = useState([]);\n  const [reorder, setReorder] = useState(false);\n\n\tconst [{ isOver, canDrop }, drop] = useDrop(() => ({\n\t\taccept: \"behaviour\",\n\t\tdrop: (item) => setBoard((board) => !board.includes(item.obj) ? [...board, item.obj] : board),\n\t\tcollect: (monitor) => ({\n\t\t\tisOver: monitor.isOver(),\n\t\t\tcanDrop: monitor.canDrop(),\n\t\t})\n\t}));\n\n\tconst handleReorder = (dragIndex, hoverIndex) => {\n\t\tconst dragged = board[dragIndex];\n\t\tconst newBoard = [...board];\n\t\tnewBoard.splice(dragIndex, 1);\n\t\tnewBoard.splice(hoverIndex, 0, dragged);\n\t\tsetBoard(newBoard);\n\t}\n\n  const convertPointer = (pointer, lines) => {\n    let pos = 0;\n    for(let i=0; i<=pointer.row - 1; i++) {\n      pos += lines[i].length;\n      if(lines[i].length === 0)\n        pos+=1;\n    }\n    pos += pointer.column;\n    if(pointer.column === 0)\n      pos+=1;\n    setPosition(pos);\n  }\n\n  const getFiles = async () => {\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await Axios.get(\n        // `http://localhost:5002/api/json/timeline`,\n        backend + \"/api/json/timeline\",\n        requestOptions\n      );\n\n      const requestOption = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res2 = await Axios.get(\n        // `http://localhost:5002/api/project/${projectid}/grammarName`,\n        backend + `/api/project/${projectid}/grammarName`,\n        requestOption\n      );\n      setfiles(res.data);\n\n      res.data.map((p) => {\n        if (p.name === res2.data.grammarName) {\n          if (grammarDataArray.length !== 5) {\n            grammarDataArray.push(p.scene);\n            grammarDataArray.push(p.asset);\n            grammarDataArray.push(p.action);\n            grammarDataArray.push(p.custom);\n            grammarDataArray.push(p.timeline);\n          }\n        }\n      })\n    } catch (error) {\n      toast({\n        title: \"Something went wrong\",  //Goes wrong\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n  };\n\n  const getRules = async () => {\n    const res_rules = await Axios.post(\n      // \"http://localhost:5002/api/custom/get-custom-rules\",\n      backend + \"/api/custom/get-custom-rules\",\n      {\n        headers: {\n          \"Content-Type\": \"application/json\", \n          token: jwttoken \n        },\n        data: {\n          project_id: projectid\n        }\n      }\n    );\n    setRuleList(res_rules.data);\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    getFiles();\n    getRules();\n    if (activeStep === 0) {\n      setdata(scene);\n      fl = false;\n      if (isJson(scene)) {\n        setDownloadable(true);\n      }\n    }\n    if (activeStep === 1) {\n      if (asset === '') {\n        setNames([]);\n        setArr([]);\n        setdata('');\n      } else {\n        const myobjs = JSON.parse(asset);\n        let all_names = []\n        let tarr = myobjs.articles\n        myobjs.articles.map((c,i)=>{\n          all_names.push(c._objectname);\n        })\n        setNames(all_names);\n        setArr(tarr);\n        setdata(JSON.stringify(tarr[idx], null, '\\t'));\n      }\n      // setdata(asset);\n      fl = false;\n      if (isJson(asset)) {\n        setDownloadable(true);\n      }\n    }\n    if (activeStep === 2) {\n      if (action === '') {\n        setNames([]);\n        setArr([]);\n        setdata('');\n      } else {\n        let myobjs = JSON.parse(action);\n        let all_names = []\n        let tarr = myobjs.ObjAction\n        myobjs.ObjAction.map((c,i)=>{\n          all_names.push(c.actresid);\n        })\n        setNames(all_names);\n        setArr(tarr);\n        setdata(JSON.stringify(tarr[idx], null, '\\t'));\n      }\n      // setdata(action)\n      fl = false;\n      if (isJson(action)) {\n        setDownloadable(true);\n      }\n    }\n    if (activeStep === 3) {\n      // setdata(custom);\n      fl = false\n      if (isJson(custom)) {\n        setDownloadable(true);\n      }\n    }\n    if (activeStep === 4) {\n      setdata(timeline);\n      fl = false;\n      if (isJson(timeline)) {\n        setDownloadable(true);\n      }\n    }\n    setLoading(false);\n  }, []);\n  \n  const downloadTxtFile = () => {\n    if (data === \"\" || !isJson(data)) {\n      toast({\n        title: \"JSON Syntax is not correct\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n      setDownloadable(false);\n      return;\n    }\n    let fileName = \"\";\n    if (activeStep === 0) fileName = \"scene\";\n    if (activeStep === 1) fileName = \"asset\";\n    if (activeStep === 2) fileName = \"action\";\n    if (activeStep === 3) fileName = \"custom\";\n    if (activeStep === 4) fileName = \"timeline\";\n    const json = data;\n    const blob = new Blob([json], { type: \"application/json\" });\n    const href = URL.createObjectURL(blob);\n\n    const downlink = document.createElement(\"a\");\n    downlink.href = href;\n    downlink.download = projectname + \"-\" + fileName + \".json\";\n    document.body.appendChild(downlink);\n    downlink.click();\n\n    // clean up \"a\" element & remove ObjectURL\n    document.body.removeChild(downlink);\n    URL.revokeObjectURL(href);\n  };\n\n  let handleInputChange = (e) => {\n    let inputValue = e.target.value;\n    setValue(inputValue);\n  };\n\n  let asset_valid = (asset, asset_list, flag) => {\n    // if flag is zero, dont print any errors\n    let valid_obj = false;\n\n    asset_list.map(((d,j)=>{\n      if(asset === d)\n        valid_obj = true;\n      // if(c.targetObj == d)\n      //   valid_target = true;\n    }))\n\n    if(valid_obj === false) {\n      setValidated(false);\n      setDownloadable(false);\n      if (flag) {\n        toast({\n          title:\n            \"Object \"+ asset +\" is not listed in Asset JSON. Only assets present in Asset JSON are valid.\"+asset+\"  \"+asset_list,\n          status: \"warning\",\n          duration: 5000,\n          isClosable: true,\n          position: \"top-right\",\n        });\n      }\n      return -1;\n    }\n    return 1;\n  }\n\n  let assetValidator = (a, all_object_ids) => {\n    a.map((c,i)=>{\n      let ret1 = asset_valid(c.sourceObj, all_object_ids, 1);\n      let ret2;\n      if (c.targetObj[c.targetObj.length - 1] === '*') {\n        ret2 = 1;\n      } else\n        ret2 = asset_valid(c.targetObj, all_object_ids, 1);\n\n      if(ret1 === -1) {\n        return false;\n      }\n\n      if (c.repeatactionfor !== null && c.repeatactionfor.length !== 0 && c.repeatactionfor[0] !== \" \") {\n        let repeat_assets = [];\n        let curr_word = \"\";\n        Array.from(c.repeatactionfor).map((char, key)=>{\n          if (char === ',' || char === ' ') {\n            if(curr_word !== \"\" && curr_word !== \" \" && curr_word.length !== 0) {\n              repeat_assets.push(curr_word);\n              curr_word = \"\";\n            }\n          } else\n            curr_word = curr_word + char;\n        })\n        if(curr_word !== \"\" || curr_word !== \" \" || curr_word.length !== 0)\n          repeat_assets.push(curr_word);\n        \n        repeat_assets.map((word, key)=>{\n          let ret = asset_valid(word, all_object_ids, 1);\n          if ( ret === -1) {\n            return false;\n          }\n        })\n\n        if (ret2 === -1 && c.targetObj[c.targetObj.length - 1] !== \"*\") {\n          toast({\n            title:\n              \"Please update the Target Object according to the reccomendations in the document.\",\n            status: \"warning\",\n            duration: 5000,\n            isClosable: true,\n            position: \"top-right\",\n          });\n          return false;\n        } else {\n          if(asset_valid(c.targetObj, repeat_assets, 0) === 1) {\n            toast({\n              title:\n                \"Target object should not be a part of repeatactionfor.\",\n              status: \"warning\",\n              duration: 5000,\n              isClosable: true,\n              position: \"top-right\",\n            });\n            return false;\n          }\n        }\n      }\n    })\n    return true;\n  }\n\n  let onValidate2 = async () => {\n    toast({\n      title: \"Validation successful\",\n      status: \"success\",\n      duration: 5000,\n      isClosable: true,\n      position: \"top-right\",\n    });\n\n    valid_rule.push({\n      rulename: rulename,\n      data_name: data,\n      description: description\n    });\n\n    setDownloadable(true);\n    setSavebutton(true);\n  };\n\n  const onValidate = async () => {\n    let tarr = arr;\n    tarr[idx] = JSON.parse(data);\n    setArr(tarr);\n    \n    let tnames = names;\n    if (activeStep === 1)\n      tnames[idx] = tarr[idx]._objectname;\n    else if (activeStep === 2)\n      tnames[idx] = tarr[idx].actresid;\n    setNames(tnames);\n\n    let tdata = data;\n    if (activeStep === 1)\n      tdata = JSON.stringify({articles: arr}, null, 4)\n    else if (activeStep === 2)\n      tdata = JSON.stringify({ObjAction: arr}, null, 4)\n\n    if (!isJson(tdata)) {\n      setValidated(false);\n      setDownloadable(false);\n      toast({\n        title: \"JSON Syntax is not correct\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n      return;\n    }\n    setDisplayErrors([]);\n    errors = [];\n    var myjson = JSON.parse(tdata);\n    \n    try {\n      var mygrm = \"\";\n      if (activeStep === 0) mygrm = JSON.parse(grammarDataArray[0]);\n      else if (activeStep === 1) mygrm = JSON.parse(grammarDataArray[1]);\n      else if (activeStep === 2) mygrm = JSON.parse(grammarDataArray[2]);\n      else if (activeStep === 3) mygrm = JSON.parse(grammarDataArray[3]);\n      else if (activeStep === 4) mygrm = JSON.parse(grammarDataArray[4]);\n      // console.log(typeof errors);\n\n    } catch (e) {\n      console.log(e);\n    }\n\n    try {\n      if (activeStep === 2) {\n        try {\n          {\n            let all_object_ids = [];\n            const myobjs = JSON.parse(asset);\n\n            myobjs.articles.map((c,i)=>{\n              all_object_ids.push(c._sid);\n            })\n\n            var a = myjson.ObjAction;\n            for (let i = 0; i < a.length; i++) {\n              var c = a[i].actresid;\n              flag = true;\n              if (c) {\n                rules.push(c);\n              }\n            }\n          }\n        } catch (e) {\n          console.log(e);\n          setValidated(false);\n          setDownloadable(false);\n          toast({\n            title:\n              \"There are errors in the specification. Please review the error message\",\n            status: \"warning\",\n            duration: 5000,\n            isClosable: true,\n            position: \"top-right\",\n          });\n          return;\n        }\n      } else if (activeStep === 1) {\n        try {\n          {\n            var a = myjson.articles;\n            for (let i = 0; i < a.length; i++) {\n              var c = a[i]._objectname;\n              flag = true;\n              if (c) {\n                rules.push(c);\n              }\n            }\n          }\n        } catch (e) {\n          console.log(e);\n          setValidated(false);\n          setDownloadable(false);\n          toast({\n            title:\n              \"There are errors in the specification. Please review the error message\",\n            status: \"warning\",\n            duration: 5000,\n            isClosable: true,\n            position: \"top-right\",\n          });\n          return;\n        }\n      } \n    } catch {\n      console.log(e);\n    }\n    if (grammarDataArray.length === 0) {\n      await getFiles();\n    }\n\n\n    try {\n      let mygrm = \"\";\n      if (activeStep === 0) mygrm = JSON.parse(grammarDataArray[0]);\n      else if (activeStep === 1) mygrm = JSON.parse(grammarDataArray[1]);\n      else if (activeStep === 2) mygrm = JSON.parse(grammarDataArray[2]);\n      else if (activeStep === 3) mygrm = JSON.parse(grammarDataArray[3]);\n      else if (activeStep === 4) mygrm = JSON.parse(grammarDataArray[4]);\n\n\n      if (!jsonValidator(mygrm, myjson)) {\n        if(activeStep === 2)\n        {\n          let all_object_ids = [];\n          const myobjs = JSON.parse(asset);\n\n          myobjs.articles.map((c,i)=>{\n            all_object_ids.push(c._sid);\n          })\n\n          const ret_asset = assetValidator(myjson.ObjAction, all_object_ids);\n          if(!ret_asset)\n          {\n            console.log(errors);\n            toast({\n              title: \"There are errors in the specification. Please review the error message\",\n              status: \"warning\",\n              duration: 5000,\n              isClosable: true,\n              position: \"top-right\",\n            });\n            return;\n          }\n          else{\n            setValidated(true);\n            setDownloadable(true);\n            toast({\n              title: \"Validation Successful\",\n              status: \"success\",\n              duration: 5000,\n              isClosable: true,\n              position: \"top-right\",\n            });\n          }\n        }\n        else{\n          setValidated(true);\n          setDownloadable(true);\n          toast({\n            title: \"Validation Successful\",\n            status: \"success\",\n            duration: 5000,\n            isClosable: true,\n            position: \"top-right\",\n          });\n        }\n      } else {\n        console.log(errors);\n        toast({\n          title: \"There are errors in the specification. Please review the error message\",\n          status: \"warning\",\n          duration: 5000,\n          isClosable: true,\n          position: \"top-right\",\n        });\n      }\n      setDisplayErrors(errors);\n    }\n    catch (e) {\n      console.log(e);\n      toast({\n        title: \"There are errors in the specification. Please review the error message\",\n        status: \"warning\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n    }\n  };\n\n  const showValidateHandler = async () => {\n    let code = data;\n    let jsonData = JSON.stringify({\n      types: [\n        {\n          type: \"if\",\n          order: [[\"condition\"], [\"scope\"]],\n        },\n\n        {\n          type: \"else\",\n          prev: [\"if\", \"else-if\"],\n          order: [[\"scope\"]],\n        },\n\n        {\n          type: \"else-if\",\n          prev: [\"if\", \"else-if\"],\n          order: [[\"condition\"], [\"scope\"]],\n        },\n\n        {\n          type: \"switch\",\n          order: [[\"condition\"], [\"scope\", [\"Case\"], [\"Default\"]]],\n        },\n\n        {\n          type: \"switch-case\",\n          order: [[\"condition\"], [\"scope\"]],\n        },\n\n        {\n          type: \"switch-case-default\",\n          order: [[\"scope\"]],\n        },\n\n        {\n          type: \"for\",\n          order: [\n            [\"condition\", [\"conditionSeparator\", \"conditionSeparator\"]],\n            [\"scope\"],\n          ],\n        },\n\n        {\n          type: \"while\",\n          order: [[\"condition\"], [\"scope\"]],\n        },\n\n        {\n          type: \"do\",\n          order: [[\"scope\"]],\n          next: [\"do-while\"],\n        },\n\n        {\n          type: \"do-while\",\n          order: [[\"condition\"]],\n          prev: [\"do\"],\n        },\n      ],\n      constructs: [\n        {\n          name: \"if\",\n          type: \"if\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n        },\n\n        {\n          name: \"else-if\",\n          type: \"else-if\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          pre: [\"if\", \"else-if\"],\n        },\n\n        {\n          name: \"else\",\n          type: \"else\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          pre: [\"if\", \"else-if\"],\n        },\n\n        {\n          name: \"switch\",\n          type: \"switch\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          body: \"Case\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          \"end-body\": \"default\",\n        },\n\n        {\n          name: \"Case\",\n          type: \"switch-case\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          parent: \"switch\",\n        },\n\n        {\n          name: \"Default\",\n          type: \"switch-case-default\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          parent: \"switch\",\n        },\n\n        {\n          name: \"for\",\n          type: \"for\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          conditionSeparator: \"/\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n        },\n\n        {\n          name: \"while\",\n          type: \"while\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n        },\n\n        {\n          name: \"do\",\n          type: \"do\",\n          scopeStart: \"(\",\n          scopeEnd: \")\",\n          next: \"do-while\",\n        },\n\n        {\n          name: \"do-while\",\n          type: \"do-while\",\n          conditionStart: \"(\",\n          conditionEnd: \")\",\n        },\n      ],\n      specialSymbols: [\"#\", \":\", \"!\", \"/\", \"(\", \")\"],\n    });\n\n    // fetch(`http://localhost:5001/api/upload`, {\n    fetch(validation_server + '/api/upload', {\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      method: \"POST\",\n      body: JSON.stringify({jsonData}),\n    }).then((response) => {\n      response.json().then((val) => {\n        console.log(\"Uploaded\");\n        console.log(val);\n      })\n      .catch((err)=>{\n        console.log(err);\n      });\n    })\n    .catch((err)=>{\n      console.log(err);\n    });\n\n    // fetch(`http://localhost:5001/api/process`, {\n    fetch(validation_server + '/api/process', {\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      method: \"POST\",\n      body: JSON.stringify({code}),\n    }).then((response) => {\n      response.json().then((val) => {\n        if (val.valid) {\n          onValidate2();\n        } else {\n          setValidated(false);\n          setDownloadable(false);\n          toast({\n            title: \"Error! Please follow conditional syntax.\",\n            status: \"error\",\n            duration: 5000,\n            isClosable: true,\n            position: \"top-right\",\n          });\n          return;\n        }\n      })\n      .catch((err)=>{\n        console.log(err);\n      });\n    })\n    .catch((err)=>{\n      console.log(err);\n    });\n  };\n\n  const handleValidateButton = () => {\n    showValidateHandler(true);\n    setValidated(true);\n  };\n\n  const saveButton = async () => {\n    try{\n      const res = await Axios.post(\n        // \"http://localhost:5002/api/custom/upload-custom-rule\", {\n        backend + \"/api/custom/upload-custom-rule\", {\n          headers: {\n            \"Content-Type\": \"application/json\", \n            token: jwttoken \n          },\n          data: {\n            project_id: projectid,\n            rulename: rulename,\n            data_name: btoa(data),\n            description: description\n          }\n        }\n      );\n      toast({\n        title: \"Behaviour Added\",\n        status: \"success\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n\n      setRuleList([...rule_list, {\n        project_id: projectid,\n        rulename: rulename,\n        data_name: btoa(data),\n        description: description\n      }]);\n\n      setdata('');\n      setRulename('');\n      setDescription('');\n      setValidated(false);\n    } catch(err){\n      console.log(err);\n    }\n  }\n\n  const flushWrite = () => {\n    console.log('flushed everything!');\n    setValidated(false);\n    setdata('');\n    setRulename('');\n    setDescription('');\n  }\n\n  const onNextStep = async () => {\n    let tdata = data;\n    if (activeStep === 1)\n      tdata = JSON.stringify({articles: arr}, null, 4)\n    else if (activeStep === 2)\n      tdata = JSON.stringify({ObjAction: arr}, null, 4)\n\n    if (!isJson(data) && activeStep !== 3) {\n      setValidated(false);\n      toast({\n        title: \"JSON Syntax is not correct\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top\",\n      });\n      return;\n    }\n    setSubmitting(true);\n    let url = backend;\n    if (activeStep === 0)\n      url = url + `/api/project/${projectid}/scene`;\n    else if (activeStep === 1)\n      url = url + `/api/project/${projectid}/asset`;\n    else if (activeStep === 2)\n      url = url + `/api/project/${projectid}/action`;\n    else if (activeStep === 3)\n      url = url + `/api/project/${projectid}/custom`;\n    else if (activeStep === 4)\n      url = url + `/api/project/${projectid}/timeline`;\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await Axios.patch(url, { data:tdata }, requestOptions);\n\n      toast({\n        title: res.data.message,\n        status: \"success\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Something wents wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n    setSubmitting(false);\n    nextStep();\n  };\n\n  const handel_name = (e) => {\n    setRulename(e.target.value);\n  };\n\n  const handel_description = (e) => {\n    setDescription(e.target.value);\n  };\n\n  const AddNewObj = () => {\n    setIdx(arr.length)\n    let tnames = names;\n    tnames.push('');\n    setNames(tnames);\n    let tarr = arr;\n    tarr.push('');\n    setArr(tarr);\n    setdata('');\n  };\n\n  const onFinish = async () => {\n    if (!isJson(data)) {\n      setValidated(false);\n      toast({\n        title: \"JSON Syntax is not correct\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top\",\n      });\n      return;\n    }\n    setSubmitting(true);\n    let url = backend;\n    if (activeStep === 0)\n      url = url + `/api/project/${projectid}/scene`;\n    else if (activeStep === 1)\n      url = url + `/api/project/${projectid}/asset`;\n    else if (activeStep === 2)\n      url = url + `/api/project/${projectid}/action`;\n    else if (activeStep === 3)\n      url = url + `/api/project/${projectid}/custom`;\n    else if (activeStep === 4)\n      url = url + `/api/project/${projectid}/timeline`;\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await Axios.patch(url, { data }, requestOptions);\n\n      toast({\n        title: res.data.message,\n        status: \"success\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top-right\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n    setSubmitting(false);\n    onOpen();\n  };\n\n  const saveCustom = () => {\n    let str = '';\n    board.map((p) => {\n      if (str.length > 0) {\n        str +=\n        `,{\"rulename\":\"${p.rulename\n        }\", \"description\":\"${p.description\n        }\",\"logic\": \"${btoa(\n          p.data_name\n        )}\"}\\n`\n      } else {\n        str +=\n        `{\"rulename\":\"${p.rulename\n        }\", \"description\":\"${p.description\n        }\",\"logic\": \"${btoa(\n          p.data_name\n        )}\"}\\n`\n      }\n    });\n\n    if (!fl) {\n      for (let i = 0; i < rules.length; i++) {\n        rules[i] = `\"` + rules[i] + `\"`;\n      }\n      fl = true;\n    }\n    setdata(\n      `{\"objects_used\":[${rules}],\"rules\":[${str}]}`\n    );\n    toast({\n      title:\n        \"JSON is saved, click Next to continue\",\n      status: \"success\",\n      duration: 5000,\n      isClosable: true,\n      position: \"top-right\",\n    });\n    setReorder(false);\n    setDownloadable(true);\n    setBoard([]);\n    console.log(`{\"objects_used\":[${rules}],\"rules\":[${str}]}`);\n  }\n\n  return loading ? (\n    <>\n      <Flex\n        width={\"80vw\"}\n        height={\"90vh\"}\n        justifyContent=\"center\"\n        alignItems={\"center\"}\n      >\n        <Spinner\n          thickness=\"4px\"\n          speed=\"0.65s\"\n          emptyColor=\"gray.200\"\n          color=\"blue.500\"\n          size=\"xl\"\n        />\n      </Flex>\n    </>\n  ) : (\n    <>\n      {activeStep !== 3 ? (\n        <Grid templateColumns=\"repeat(6, 1fr)\" gap={4}>\n          <GridItem rowSpan={3} colSpan={1}>\n            <Flex flexDir={\"column\"} pr={20} pt={120}>\n            </Flex>\n          </GridItem>\n          <GridItem rowSpan={3} colSpan={3}>\n            <Flex py={4} alignItems={\"center\"} flexDir=\"column\">\n              <Flex marginTop={20} marginBottom={10}>\n                <AceEditor\n                  fontSize={16}\n                  showPrintMargin={true}\n                  showGutter={true}\n                  highlightActiveLine={true}\n                  setOptions={{\n                    enableBasicAutocompletion: true,\n                    enableLiveAutocompletion: true,\n                    enableSnippets: false,\n                    showLineNumbers: true,\n                    tabSize: 2,\n                  }}\n                  mode=\"json\"\n                  theme=\"terminal\"\n                  onChange={(newvalue, event) => {\n                    setdata(newvalue);\n                    setDownloadable(false);\n                  }}\n                  value={data}\n                  name=\"grammar-editor\"\n                  wrapEnabled\n                  height=\"40em\"\n                  width={\"40em\"}\n                />\n                <Stack marginLeft={10} py={4} direction=\"column\">\n                  {names.map((name, id) => (\n                    <>\n                      <Button\n                        colorScheme=\"blue\"\n                        onClick={ () => {setIdx(id);\n                          if (name === '')\n                            setdata('')\n                          else\n                            setdata(JSON.stringify(arr[id], null, '\\t'))} }\n                      >{name}</Button>\n                    </>\n                  ))}\n                </Stack>\n              </Flex>\n              <Stack py={4} direction=\"row\">\n                <Button\n                  colorScheme=\"yellow\"\n                  disabled={!data}\n                  onClick={onValidate}\n                >\n                  Validate\n                </Button>\n                <Button\n                  colorScheme=\"green\"\n                  disabled={!downloadable}\n                  onClick={downloadTxtFile}\n                  leftIcon={<BiDownload />}\n                >\n                  Download File\n                </Button>\n                {activeStep === 1 | activeStep === 2 ? (\n                  <Button\n                    colorScheme=\"yellow\"\n                    disabled={!data}\n                    onClick={AddNewObj}\n                  >\n                    New\n                  </Button>\n                ): (<></>)}\n              </Stack>\n\n              {activeStep === stepslen ? (\n                <Flex px={4} py={4} width=\"100%\" flexDirection=\"column\">\n                  <Heading fontSize=\"xl\" textAlign=\"center\">\n                    Woohoo! All steps completed!\n                  </Heading>\n                  <Button mx=\"auto\" mt={6} size=\"sm\" onClick={reset}>\n                    Reset\n                  </Button>\n                </Flex>\n              ) : (\n                <Flex width=\"100%\" justify=\"flex-end\">\n                  <Button\n                    isDisabled={activeStep === 0}\n                    mr={4}\n                    onClick={prevStep}\n                    size=\"sm\"\n                    variant={\"outline\"}\n                  >\n                    Prev\n                  </Button>\n                  {activeStep === stepslen - 1 ? (\n                    <Button\n                      size=\"sm\"\n                      onClick={onFinish}\n                      disabled={!validated}\n                      isLoading={submitting}\n                      colorScheme=\"green\"\n                      variant={\"outline\"}\n                    >\n                      Finish\n                    </Button>\n                  ) : (\n                    <Button\n                      size=\"sm\"\n                      onClick={onNextStep}\n                      disabled={!validated}\n                      isLoading={submitting}\n                      colorScheme=\"yellow\"\n                      variant={\"outline\"}\n                    >\n                      Next\n                    </Button>\n                  )}\n                </Flex>\n              )}\n            </Flex>\n          </GridItem>\n          {/* for errors */}\n          <GridItem rowSpan={3} colSpan={2} pt={120}>\n            <Flex flexDir={\"column\"} pl={20}>\n              {displayErrors.length > 0 ? (\n                <List spacing={2}>\n                  {displayErrors.map((e, i) => {\n                    let str = \"\";\n                    const splitarr = e.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n                    let Val;\n                    if (splitarr.length === 12) {\n                      splitarr.map(\n                        (m, i) => i !== 0 && i !== 10 && (str = str + \" \" + m)\n                      );\n                      Val = () => (\n                        <>\n                          <Text as=\"span\">\n                            <Text\n                              as=\"span\"\n                              fontWeight={\"bold\"}\n                              color={tipcolors[splitarr[10]]}\n                            >\n                              {splitarr[0]}\n                            </Text>\n                            <Text as=\"span\">{str}</Text>\n                            <Text\n                              as=\"span\"\n                              fontWeight={\"bold\"}\n                              color={tipcolors[splitarr[10]]}\n                            >\n                              {\" \" + splitarr[10]}\n                            </Text>\n                          </Text>\n                        </>\n                      );\n                    }\n                    if (splitarr.length === 7 || splitarr.length === 8) {\n                      splitarr.map((m, i) => i !== 0 && (str = str + \" \" + m));\n                      Val = () => (\n                        <>\n                          <Text as=\"span\">\n                            <Text\n                              as=\"span\"\n                              fontWeight={\"bold\"}\n                              color={\"teal.400\"}\n                            >\n                              {splitarr[0]}\n                            </Text>\n                            <Text as=\"span\">{str}</Text>\n                          </Text>\n                        </>\n                      );\n                    }\n                    if (splitarr.length === 11) {\n                      splitarr.map(\n                        (m, i) => i !== 0 && i !== 10 && (str = str + \" \" + m)\n                      );\n                      Val = () => (\n                        <>\n                          <Text as=\"span\">\n                            <Text\n                              as=\"span\"\n                              fontWeight={\"bold\"}\n                              color={tipcolors[splitarr[10]]}\n                            >\n                              {splitarr[0]}\n                            </Text>\n                            <Text as=\"span\">{str}</Text>\n                            <Text\n                              as=\"span\"\n                              fontWeight={\"bold\"}\n                              color={tipcolors[splitarr[10]]}\n                            >\n                              {\" \" + splitarr[10]}\n                            </Text>\n                          </Text>\n                        </>\n                      );\n                    }\n                    return (\n                      <ListItem key={i}>\n                        <ListIcon as={FaExclamationCircle} color=\"red.500\" />\n                        {<Val />}\n                      </ListItem>\n                    );\n                  })}\n                </List>\n              ) : (\n                <></>\n              )}\n            </Flex>\n          </GridItem>\n          <Modal onClose={onClose} isOpen={isOpen} isCentered>\n            <ModalOverlay />\n            <ModalContent>\n              <ModalCloseButton />\n              <ModalBody>\n                <Box textAlign=\"center\" py={10} px={6}>\n                  <CheckCircleIcon boxSize={\"50px\"} color={\"green.500\"} />\n                  <Heading as=\"h2\" size=\"xl\" mt={6} mb={2}>\n                    Your specification are successful saved!\n                  </Heading>\n                  <Text color={\"gray.500\"}>\n                    We have made sure that your data is free from any data-types\n                    or syntax errors. Happy Development!\n                  </Text>\n                </Box>\n              </ModalBody>\n              <ModalFooter>\n                <Button>\n                  <Flex as={Link} to=\"/projects\">Close</Flex>\n                </Button>\n              </ModalFooter>\n            </ModalContent>\n          </Modal>\n        </Grid>\n      ) : (\n        <>\n          <Tabs isFitted variant=\"unstyled\" marginTop={10}>\n            <TabList mb=\"1em\">\n              <Tab _selected={{ color: 'white', bg: 'blue.300' }}>Author Custom Behaviour</Tab>\n              <Tab _selected={{ color: 'white', bg: 'blue.300' }}>View Authored Custom Behaviours</Tab>\n              <Tab _selected={{ color: 'white', bg: 'blue.300' }}>Publish</Tab>\n            </TabList>\n            <TabPanels>\n              <TabPanel>\n                <div>\n                  <Grid templateColumns=\"repeat(8, 1fr)\" gap={2}>\n                    <GridItem rowSpan={8} colStart={1} colEnd={8}>\n                      <Flex py={4} alignItems={\"center\"} flexDir=\"column\">\n                        <Text fontSize='xl'>Author your custom behaviours below.</Text>\n                        <Flex flexDir=\"row\" marginTop={10}>\n                          <Text fontSize='lg'>Behaviour Name:</Text>\n                          <Flex>\n                            <FormControl\n                              paddingRight={10}\n                              paddingLeft={2}\n                            >\n                              <Input\n                                value={rulename}\n                                onChange={handel_name}\n                                placeholder=\"Name\"\n                                size=\"sm\"\n                              ></Input>\n                            </FormControl>\n                          </Flex>\n                          <Text fontSize='lg'>Behaviour Description:</Text>\n                          <Flex>\n                            <FormControl\n                              paddingLeft={2}\n                            >\n                              <Input\n                                value={description}\n                                onChange={handel_description}\n                                placeholder=\"Description\"\n                                size=\"sm\"\n                              ></Input>\n                            </FormControl>\n                          </Flex>\n                        </Flex>\n                        <Flex flexDir=\"row\" paddingTop={10} paddingLeft={35} marginLeft={20}>\n                          <Box\n                            as=\"pane\"\n                            bg=\"grey\"\n                            _dark={{\n                              bg: \"gray.800\",\n                            }}\n                            h=\"32em\"\n                            w=\"12em\"\n                          >\n                            <Box \n                              as=\"pane\"\n                              zIndex=\"fixed\"\n                              h=\"300px\"\n                              overflowX=\"hidden\"\n                              overflowY=\"auto\"\n                              w=\"400px\"\n                              colorScheme=\"yellow\"\n                            >\n                              <Flex px=\"4\" pb=\"3\" pt=\"5\" align=\"center\">\n                                  <Text\n                                    fontSize=\"2xl\"\n                                    ml=\"2\"\n                                    color=\"white\"\n                                    fontWeight=\"semibold\"\n                                  >\n                                    Code Constructs\n                                  </Text>\n                              </Flex>\n                              <Flex\n                                direction=\"column\"\n                                as=\"nav\"\n                                fontSize=\"lg\"\n                                color=\"white\"\n                                aria-label=\"Main Navigation\"\n                                margin={5}\n                                marginTop={2}\n                                marginLeft={7}\n                              >\n                                { semantics.elements.map((p) => (\n                                    <a\n                                      onClick={() => {\n                                        console.log(position);\n                                        var newdata_part1 = data.slice(0,position);\n                                        var newdata_part2 = data.slice(position);\n                                        setdata(newdata_part1 + p.editorDisplay + newdata_part2);\n                                      }}\n                                      color=\"white\"\n                                    >\n                                      <span>{p.displayName}</span>\n                                    </a>\n                                  ))\n                                }\n                              </Flex>\n                            </Box>\n                          </Box>\n                          <Flex marginLeft={10} marginRight={10} marginBottom={10}>\n                            <AceEditor\n                              fontSize={16}\n                              showPrintMargin={true}\n                              showGutter={true}\n                              highlightActiveLine={true}\n                              setOptions={{\n                                enableBasicAutocompletion: true,\n                                enableLiveAutocompletion: true,\n                                enableSnippets: false,\n                                showLineNumbers: true,\n                                tabSize: 2,\n                              }}\n                              mode=\"json\"\n                              theme=\"terminal\"\n                              onChange={(newvalue, event) => {\n                                fl = false;\n                                setdata(newvalue);\n                                setDownloadable(false);\n                              }}\n                              onCursorChange={(newplace)=>{\n                                convertPointer({\"row\":newplace.cursor.row, \"column\": newplace.cursor.column}, newplace.cursor.document.$lines);\n                              }}\n                              onSelectionChange={(e)=>{\n                                convertPointer({\"row\": e.cursor.row, \"column\": e.cursor.column}, e.doc.$lines);\n                              }}\n                              value={data}\n                              name=\"grammar-editor\"\n                              wrapEnabled\n                              height={\"40em\"}\n                              width={\"40em\"}\n                              id=\"editor\"\n                            />\n                          </Flex>\n                          <Box\n                            as=\"pane\"\n                            bg=\"grey\"\n                            _dark={{\n                              bg: \"gray.800\",\n                            }}\n                            h=\"32em\"\n                            w=\"18em\"\n                          >\n                            <Box // navbar\n                              as=\"pane\"\n                              zIndex=\"fixed\"\n                              h=\"300px\"\n                              pb=\"10\"\n                              overflowX=\"hidden\"\n                              overflowY=\"auto\"\n                              bg=\"grey\"\n                              w=\"400px\"\n                            >\n                              <Flex px=\"4\" pb=\"3\" pt=\"5\" align=\"center\">\n                                  <Text\n                                    fontSize=\"2xl\"\n                                    ml=\"2\"\n                                    color=\"white\"\n                                    fontWeight=\"semibold\"\n                                  >\n                                    Action-Responses\n                                  </Text>\n                              </Flex>\n                              <Flex\n                                direction=\"column\"\n                                as=\"nav\"\n                                fontSize=\"lg\"\n                                color=\"white\"\n                                aria-label=\"Main Navigation\"\n                                margin={5}\n                                marginTop={2}\n                                marginLeft={7}\n                              >\n                                {flag ? (\n                                  rules.map((p) => (\n                                    <a\n                                      onClick={() => {\n                                        var newdata_part1 = data.slice(0,position);\n                                        var newdata_part2 = data.slice(position);\n                                        setdata(newdata_part1 + p + newdata_part2);\n                                      }}\n                                      color=\"white\"\n                                    >\n                                      {p}\n                                    </a>\n                                  ))\n                                ) : (\n                                  <>\n                                    <Text>No recent files...</Text>\n                                  </>\n                                )}\n                              </Flex>\n                            </Box>\n                          </Box>\n                        </Flex>\n                        <Stack py={4} direction=\"row\">\n                          <Button\n                            colorScheme=\"yellow\"\n                            disabled={!(data && rulename && description)}\n                            onClick={() => {\n                              handleValidateButton();\n                              setSeed(Math.random());\n                            }}\n                          >\n                            Validate\n                          </Button>\n                          <Button\n                            colorScheme=\"green\"\n                            disabled={!validated}\n                            onClick={() => {\n                              saveButton();\n                            }}\n                          >\n                            Save\n                          </Button>\n                          <Button\n                            colorScheme=\"red\"\n                            disabled={!(data || rulename || description)}\n                            onClick={() => {\n                              flushWrite();\n                            }}\n                          >\n                            Flush\n                          </Button>\n                        </Stack>\n                        {activeStep === stepslen ? (\n                          <Flex\n                            px={4}\n                            py={4}\n                            width=\"100%\"\n                            flexDirection=\"column\"\n                          >\n                            <Heading fontSize=\"xl\" textAlign=\"center\">\n                              Woohoo! All steps completed!\n                            </Heading>\n                            <Button mx=\"auto\" mt={6} size=\"sm\" onClick={reset}>\n                              Reset\n                            </Button>\n                          </Flex>\n                        ) : (\n                          <Flex width=\"100%\" justify=\"flex-end\">\n                            <Button\n                              isDisabled={activeStep === 0}\n                              mr={4}\n                              onClick={prevStep}\n                              size=\"sm\"\n                              variant={\"outline\"}\n                            >\n                              Prev\n                            </Button>\n                          </Flex>\n                        )}\n                      </Flex>\n                    </GridItem>\n                    {/* for errors */}\n                    <GridItem rowSpan={3} colSpan={2} pt={120}>\n                      <Flex flexDir={\"column\"} pl={20}>\n                        {displayErrors.length > 0 ? (\n                          <List spacing={2}>\n                            {displayErrors.map((e, i) => {\n                              let str = \"\";\n                              const splitarr = e.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n                              let Val;\n                              if (splitarr.length === 12) {\n                                splitarr.map(\n                                  (m, i) =>\n                                    i !== 0 && i !== 10 && (str = str + \" \" + m)\n                                );\n                                Val = () => (\n                                  <>\n                                    <Text as=\"span\">\n                                      <Text\n                                        as=\"span\"\n                                        fontWeight={\"bold\"}\n                                        color={tipcolors[splitarr[10]]}\n                                      >\n                                        {splitarr[0]}\n                                      </Text>\n                                      <Text as=\"span\">{str}</Text>\n                                      <Text\n                                        as=\"span\"\n                                        fontWeight={\"bold\"}\n                                        color={tipcolors[splitarr[10]]}\n                                      >\n                                        {\" \" + splitarr[10]}\n                                      </Text>\n                                    </Text>\n                                  </>\n                                );\n                              }\n\n                              if (\n                                splitarr.length === 7 ||\n                                splitarr.length === 8\n                              ) {\n                                splitarr.map(\n                                  (m, i) => i !== 0 && (str = str + \" \" + m)\n                                );\n                                Val = () => (\n                                  <>\n                                    <Text as=\"span\">\n                                      <Text\n                                        as=\"span\"\n                                        fontWeight={\"bold\"}\n                                        color={\"teal.400\"}\n                                      >\n                                        {splitarr[0]}\n                                      </Text>\n                                      <Text as=\"span\">{str}</Text>\n                                    </Text>\n                                  </>\n                                );\n                              }\n\n                              if (splitarr.length === 11) {\n                                splitarr.map(\n                                  (m, i) =>\n                                    i !== 0 && i !== 10 && (str = str + \" \" + m)\n                                );\n                                Val = () => (\n                                  <>\n                                    <Text as=\"span\">\n                                      <Text\n                                        as=\"span\"\n                                        fontWeight={\"bold\"}\n                                        color={tipcolors[splitarr[10]]}\n                                      >\n                                        {splitarr[0]}\n                                      </Text>\n                                      <Text as=\"span\">{str}</Text>\n                                      <Text\n                                        as=\"span\"\n                                        fontWeight={\"bold\"}\n                                        color={tipcolors[splitarr[10]]}\n                                      >\n                                        {\" \" + splitarr[10]}\n                                      </Text>\n                                    </Text>\n                                  </>\n                                );\n                              }\n\n                              return (\n                                <ListItem key={i}>\n                                  <ListIcon\n                                    as={FaExclamationCircle}\n                                    color=\"red.500\"\n                                  />\n                                  {<Val />}\n                                </ListItem>\n                              );\n                            })}\n                          </List>\n                        ) : (\n                          <></>\n                        )}\n                      </Flex>\n                    </GridItem>\n                  </Grid>\n                </div>\n              </TabPanel>\n              <TabPanel> \n                <div>\n                  <Grid templateColumns=\"repeat(6, 1fr)\" gap={2}>\n                    <GridItem rowSpan={8} colStart={1} colEnd={8}>\n                      <Flex py={4} alignItems={\"center\"} flexDir=\"column\">\n                        <Text fontSize='xl'>Choose a custom behaviour to view the behaviour logic.</Text>\n                        <Flex flexDir=\"row\" paddingTop={10} paddingLeft={35} marginLeft={20}>\n                          <Stack direction=\"column\" marginRight={10}>\n                            <Flex>\n                              <Text fontSize='lg'>Behaviour Name: {rule.rulename}</Text>\n                            </Flex>\n                            <Flex paddingTop={2}>\n                              <Text fontSize='lg'>Behaviour Description: {rule.description}</Text>\n                            </Flex>\n                            <Flex paddingTop={2}>\n                              <Text fontSize='lg'>Behaviour Logic:</Text>\n                            </Flex>\n                            <Flex paddingLeft={12}>\n                              <AceEditor\n                                fontSize={20}\n                                showPrintMargin={true}\n                                showGutter={true}\n                                highlightActiveLine={true}\n                                setOptions={{\n                                  enableBasicAutocompletion: true,\n                                  enableLiveAutocompletion: true,\n                                  enableSnippets: false,\n                                  showLineNumbers: true,\n                                  tabSize: 2,\n                                }}\n                                mode=\"json\"\n                                theme=\"terminal\"\n                                value={(rule.data_name != null ? atob(rule.data_name) : rule.data_name)}\n                                // value={logic}\n                                name=\"grammar-editor\"\n                                wrapEnabled\n                                height={\"28em\"}\n                                width={\"32em\"}\n                                readOnly={true}\n                              />\n                            </Flex>\n                          </Stack>\n                          <Box\n                            as=\"pane\"\n                            bg=\"grey\"\n                            _dark={{\n                              bg: \"gray.800\",\n                            }}\n                            h=\"36em\"\n                            w=\"18em\"\n                          >\n                            <Box // navbar\n                              as=\"pane\"\n                              zIndex=\"fixed\"\n                              h=\"300px\"\n                              pb=\"10\"\n                              overflowX=\"hidden\"\n                              overflowY=\"auto\"\n                              bg=\"grey\"\n                              w=\"400px\"\n                            >\n                              <Flex px=\"4\" pb=\"3\" pt=\"5\" align=\"center\">\n                                <Text\n                                  fontSize=\"2xl\"\n                                  ml=\"2\"\n                                  color=\"white\"\n                                  fontWeight=\"semibold\"\n                                >\n                                  Custom Behaviours\n                                </Text>\n                              </Flex>\n                              <Flex\n                                direction=\"column\"\n                                as=\"nav\"\n                                fontSize=\"md\"\n                                color=\"white\"\n                                aria-label=\"Main Navigation\"\n                                margin={5}\n                              >\n                                {rule_list.length > 0 ? (\n                                  rule_list.map((p) => (\n                                    <Text fontSize='xl'>\n                                      <a\n                                        onClick={() => {\n                                          setRule(p);\n                                          setLogic(p.data_name);\n                                        }}\n                                        color=\"white\"\n                                      >\n                                        {p.rulename}\n                                      </a>\n                                    </Text>\n                                  ))\n                                ) : (\n                                  <>\n                                    <Text>No recent files!</Text>\n                                  </>\n                                )}\n                              </Flex>\n                            </Box>\n                          </Box>\n                        </Flex>\n                        <Flex marginTop={10}>\n                          <Button\n                            colorScheme=\"red\"\n                            disabled={!rule.rulename}\n                            onClick={() => {\n                              setRule({});\n                              setLogic(\"\");\n                            }}\n                          >\n                            Flush\n                          </Button>\n                        </Flex>\n                      </Flex>\n                    </GridItem>\n                  </Grid>\n                </div>\n              </TabPanel>\n              <TabPanel>\n                <div>\n                  <Grid templateColumns=\"repeat(6, 1fr)\" gap={2}>\n                    <GridItem rowSpan={8} colStart={1} colEnd={8}>\n                      <Flex py={4} alignItems={\"center\"} flexDir={\"column\"}>\n                        <Text fontSize='xl'>Select and Publish final custom behaviours.</Text>\n                        <Text>Drag and drop custom behaviours from the behaviour section. Organise them\n                          in an order. On saving, the underlying specification will be published.\n                        </Text>\n                        <Flex flexDir=\"row\" paddingTop={10} paddingLeft={35} marginLeft={20}>\n                          {/* 1. space to hold items: pending */}\n                          <Flex paddingTop={10} marginRight={20}>\n                            {/* <DropArea /> */}\n                            {board.length > 0 ? (\n                              <Box\n                                ref={drop}\n                                width={600}\n                                height={700}\n                                border='1px solid'\n                                position='relative'\n                                maxHeight={700}\n                                overflowY='auto'\n                                justifyContent='center'\n                              >\n                                <Stack\n                                  py={4}\n                                  direction=\"column\"\n                                  paddingLeft={5}\n                                  paddingRight={5}\n                                >\n                                  {board.map((p, index) => (\n                                    <Button\n                                      backgroundColor='blue.200'\n                                      height={10}\n                                      width='auto'\n                                      draggable\n                                      onDragStart={(e) => {\n                                        if (reorder) {\n                                      \t  e.dataTransfer.setData('text/plain', index);\n                                        }\n                                      }}\n                                      onDragOver={(e) => {\n                                      \te.preventDefault();\n                                      }}\n                                      onDrop={(e) => {\n                                        if (reorder) {\n                                          const dragIndex = parseInt(e.dataTransfer.getData('text/plain'), 10);\n                                          console.log(dragIndex);\n                                          const hoverIndex = index;\n                                          if (dragIndex != hoverIndex) {\n                                            handleReorder(dragIndex, hoverIndex);\n                                          }\n                                        }\n                                      }}\n                                    >\n                                      <Text fontSize='xl'>{p.rulename}</Text>\n                                    </Button>\n                                  ))}\n                                </Stack>\n                              </Box>\n                            ) : (\n                              <Box\n                                ref={drop}\n                                width={600}\n                                height={700}\n                                border='1px solid'\n                                position='relative'\n                                justifyContent='center'\n                                alignItems='center'\n                              >\n                                <Text\n                                  textAlign=\"center\"\n                                >Drop Here</Text>\n                              </Box>\n                            )}\n                          </Flex>\n                          {/* 2. behaviours to select: done */}\n                          <Stack\n                            py={4}\n                            direction=\"column\"\n                            maxHeight={800}\n                            overflowY='auto'\n                          >\n                            <Flex align=\"center\">\n                              <Text fontSize=\"2xl\">Custom Behaviours</Text>\n                            </Flex>\n                            {rule_list.length > 0 ? (\n                              rule_list.map((p) => {\n                                return <Behaviour obj={p} reorder={reorder}/>\n                              })\n                            ) : (\n                              <>\n                                <Text fontSize='xl'>No recent files!</Text>\n                              </>\n                            )}\n                          </Stack>\n                        </Flex>\n                        <Stack py={4} direction=\"row\" marginTop={10}>\n                          <Button\n                            colorScheme=\"yellow\"\n                            onClick={() => {setReorder(true)}}\n                            disabled={board.length === 0}\n                            isLoading={submitting}\n                          >\n                            Reorder\n                          </Button>\n                          <Button\n                            onClick={saveCustom}\n                            disabled={!reorder}\n                            isLoading={submitting}\n                            colorScheme=\"green\"\n                          >\n                            Save\n                          </Button>\n                          <Button\n                            onClick={() => {setBoard([]); setReorder(false)}}\n                            disabled={board.length === 0}\n                            isLoading={submitting}\n                            colorScheme=\"red\"\n                          >\n                            Flush\n                          </Button>\n                          <Button\n                            colorScheme=\"green\"\n                            disabled={!downloadable}\n                            onClick={downloadTxtFile}\n                            leftIcon={<BiDownload />}\n                          >\n                            Download File\n                          </Button>\n                        </Stack>\n                        <Flex width=\"70%\" justify=\"flex-end\">\n                          <Button\n                            size=\"sm\"\n                            onClick={onNextStep}\n                            disabled={board.length}\n                            isLoading={submitting}\n                            colorScheme=\"yellow\"\n                            variant={\"outline\"}\n                          >\n                            Next\n                          </Button>\n                        </Flex>\n                      </Flex>\n                    </GridItem>\n                  </Grid>\n                </div>\n              </TabPanel>\n            </TabPanels>\n          </Tabs>\n        </>\n      )}\n    </>\n  );\n};\n\nconst CustomCard = React.forwardRef(({ children, ...rest }, ref) => (\n  <Box p=\"1\">\n    <Tag ref={ref} {...rest}>\n      {children}\n    </Tag>\n  </Box>\n));\n\nexport default ProjectPageContent;\n"]},"metadata":{},"sourceType":"module"}