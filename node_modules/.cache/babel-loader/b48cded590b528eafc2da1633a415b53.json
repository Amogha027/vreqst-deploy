{"ast":null,"code":"ace.define(\"ace/snippets\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/lib/oop\", \"ace/lib/event_emitter\", \"ace/lib/lang\", \"ace/range\", \"ace/range_list\", \"ace/keyboard/hash_handler\", \"ace/tokenizer\", \"ace/clipboard\", \"ace/editor\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"./lib/dom\");\n\n  var oop = require(\"./lib/oop\");\n\n  var EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\n  var lang = require(\"./lib/lang\");\n\n  var Range = require(\"./range\").Range;\n\n  var RangeList = require(\"./range_list\").RangeList;\n\n  var HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\n\n  var Tokenizer = require(\"./tokenizer\").Tokenizer;\n\n  var clipboard = require(\"./clipboard\");\n\n  var VARIABLES = {\n    CURRENT_WORD: function CURRENT_WORD(editor) {\n      return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function SELECTION(editor, name, indentation) {\n      var text = editor.session.getTextRange();\n      if (indentation) return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n      return text;\n    },\n    CURRENT_LINE: function CURRENT_LINE(editor) {\n      return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function PREV_LINE(editor) {\n      return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function LINE_INDEX(editor) {\n      return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function LINE_NUMBER(editor) {\n      return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function SOFT_TABS(editor) {\n      return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function TAB_SIZE(editor) {\n      return editor.session.getTabSize();\n    },\n    CLIPBOARD: function CLIPBOARD(editor) {\n      return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function FILENAME(editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function FILENAME_BASE(editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function DIRECTORY(editor) {\n      return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function FILEPATH(editor) {\n      return \"/not implemented.txt\";\n    },\n    WORKSPACE_NAME: function WORKSPACE_NAME() {\n      return \"Unknown\";\n    },\n    FULLNAME: function FULLNAME() {\n      return \"Unknown\";\n    },\n    BLOCK_COMMENT_START: function BLOCK_COMMENT_START(editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function BLOCK_COMMENT_END(editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function LINE_COMMENT(editor) {\n      var mode = editor.session.$mode || {};\n      return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, {\n      year: \"numeric\"\n    }),\n    CURRENT_YEAR_SHORT: date.bind(null, {\n      year: \"2-digit\"\n    }),\n    CURRENT_MONTH: date.bind(null, {\n      month: \"numeric\"\n    }),\n    CURRENT_MONTH_NAME: date.bind(null, {\n      month: \"long\"\n    }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, {\n      month: \"short\"\n    }),\n    CURRENT_DATE: date.bind(null, {\n      day: \"2-digit\"\n    }),\n    CURRENT_DAY_NAME: date.bind(null, {\n      weekday: \"long\"\n    }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, {\n      weekday: \"short\"\n    }),\n    CURRENT_HOUR: date.bind(null, {\n      hour: \"2-digit\",\n      hour12: false\n    }),\n    CURRENT_MINUTE: date.bind(null, {\n      minute: \"2-digit\"\n    }),\n    CURRENT_SECOND: date.bind(null, {\n      second: \"2-digit\"\n    })\n  };\n  VARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\n\n  function date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n  }\n\n  var SnippetManager = function SnippetManager() {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n  };\n\n  (function () {\n    oop.implement(this, EventEmitter);\n\n    this.getTokenizer = function () {\n      return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n\n    this.createTokenizer = function () {\n      function TabstopToken(str) {\n        str = str.substr(1);\n        if (/^\\d+$/.test(str)) return [{\n          tabstopId: parseInt(str, 10)\n        }];\n        return [{\n          text: str\n        }];\n      }\n\n      function escape(ch) {\n        return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n      }\n\n      var formatMatcher = {\n        regex: \"/(\" + escape(\"/\") + \"+)/\",\n        onMatch: function onMatch(val, state, stack) {\n          var ts = stack[0];\n          ts.fmtString = true;\n          ts.guard = val.slice(1, -1);\n          ts.flag = \"\";\n          return \"\";\n        },\n        next: \"formatString\"\n      };\n      SnippetManager.$tokenizer = new Tokenizer({\n        start: [{\n          regex: /\\\\./,\n          onMatch: function onMatch(val, state, stack) {\n            var ch = val[1];\n\n            if (ch == \"}\" && stack.length) {\n              val = ch;\n            } else if (\"`$\\\\\".indexOf(ch) != -1) {\n              val = ch;\n            }\n\n            return [val];\n          }\n        }, {\n          regex: /}/,\n          onMatch: function onMatch(val, state, stack) {\n            return [stack.length ? stack.shift() : val];\n          }\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: TabstopToken\n        }, {\n          regex: /\\$\\{[\\dA-Z_a-z]+/,\n          onMatch: function onMatch(str, state, stack) {\n            var t = TabstopToken(str.substr(1));\n            stack.unshift(t[0]);\n            return t;\n          },\n          next: \"snippetVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }],\n        snippetVar: [{\n          regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\",\n          onMatch: function onMatch(val, state, stack) {\n            var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n              return operator.length == 2 ? operator[1] : \"\\x00\";\n            }).split(\"\\x00\").map(function (value) {\n              return {\n                value: value\n              };\n            });\n            stack[0].choices = choices;\n            return [choices[0]];\n          },\n          next: \"start\"\n        }, formatMatcher, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"start\"\n        }],\n        formatString: [{\n          regex: /:/,\n          onMatch: function onMatch(val, state, stack) {\n            if (stack.length && stack[0].expectElse) {\n              stack[0].expectElse = false;\n              stack[0].ifEnd = {\n                elseEnd: stack[0]\n              };\n              return [stack[0].ifEnd];\n            }\n\n            return \":\";\n          }\n        }, {\n          regex: /\\\\./,\n          onMatch: function onMatch(val, state, stack) {\n            var ch = val[1];\n            if (ch == \"}\" && stack.length) val = ch;else if (\"`$\\\\\".indexOf(ch) != -1) val = ch;else if (ch == \"n\") val = \"\\n\";else if (ch == \"t\") val = \"\\t\";else if (\"ulULE\".indexOf(ch) != -1) val = {\n              changeCase: ch,\n              local: ch > \"a\"\n            };\n            return [val];\n          }\n        }, {\n          regex: \"/\\\\w*}\",\n          onMatch: function onMatch(val, state, stack) {\n            var next = stack.shift();\n            if (next) next.flag = val.slice(1, -1);\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: function onMatch(val, state, stack) {\n            return [{\n              text: val.slice(1)\n            }];\n          }\n        }, {\n          regex: /\\${\\w+/,\n          onMatch: function onMatch(val, state, stack) {\n            var token = {\n              text: val.slice(2)\n            };\n            stack.unshift(token);\n            return [token];\n          },\n          next: \"formatStringVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }, {\n          regex: /}/,\n          onMatch: function onMatch(val, state, stack) {\n            var next = stack.shift();\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }],\n        formatStringVar: [{\n          regex: /:\\/\\w+}/,\n          onMatch: function onMatch(val, state, stack) {\n            var ts = stack[0];\n            ts.formatFunction = val.slice(2, -1);\n            return [stack.shift()];\n          },\n          next: \"formatString\"\n        }, formatMatcher, {\n          regex: /:[\\?\\-+]?/,\n          onMatch: function onMatch(val, state, stack) {\n            if (val[1] == \"+\") stack[0].ifEnd = stack[0];\n            if (val[1] == \"?\") stack[0].expectElse = true;\n          },\n          next: \"formatString\"\n        }, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"formatString\"\n        }]\n      });\n      return SnippetManager.$tokenizer;\n    };\n\n    this.tokenizeTmSnippet = function (str, startState) {\n      return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n        return x.value || x;\n      });\n    };\n\n    this.getVariableValue = function (editor, name, indentation) {\n      if (/^\\d+$/.test(name)) return (this.variables.__ || {})[name] || \"\";\n      if (/^[A-Z]\\d+$/.test(name)) return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n      name = name.replace(/^TM_/, \"\");\n      if (!this.variables.hasOwnProperty(name)) return \"\";\n      var value = this.variables[name];\n      if (typeof value == \"function\") value = this.variables[name](editor, name, indentation);\n      return value == null ? \"\" : value;\n    };\n\n    this.variables = VARIABLES;\n\n    this.tmStrFormat = function (str, ch, editor) {\n      if (!ch.fmt) return str;\n      var flag = ch.flag || \"\";\n      var re = ch.guard;\n      re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n      var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n\n      var _self = this;\n\n      var formatted = str.replace(re, function () {\n        var oldArgs = _self.variables.__;\n        _self.variables.__ = [].slice.call(arguments);\n\n        var fmtParts = _self.resolveVariables(fmtTokens, editor);\n\n        var gChangeCase = \"E\";\n\n        for (var i = 0; i < fmtParts.length; i++) {\n          var ch = fmtParts[i];\n\n          if (typeof ch == \"object\") {\n            fmtParts[i] = \"\";\n\n            if (ch.changeCase && ch.local) {\n              var next = fmtParts[i + 1];\n\n              if (next && typeof next == \"string\") {\n                if (ch.changeCase == \"u\") fmtParts[i] = next[0].toUpperCase();else fmtParts[i] = next[0].toLowerCase();\n                fmtParts[i + 1] = next.substr(1);\n              }\n            } else if (ch.changeCase) {\n              gChangeCase = ch.changeCase;\n            }\n          } else if (gChangeCase == \"U\") {\n            fmtParts[i] = ch.toUpperCase();\n          } else if (gChangeCase == \"L\") {\n            fmtParts[i] = ch.toLowerCase();\n          }\n        }\n\n        _self.variables.__ = oldArgs;\n        return fmtParts.join(\"\");\n      });\n      return formatted;\n    };\n\n    this.tmFormatFunction = function (str, ch, editor) {\n      if (ch.formatFunction == \"upcase\") return str.toUpperCase();\n      if (ch.formatFunction == \"downcase\") return str.toLowerCase();\n      return str;\n    };\n\n    this.resolveVariables = function (snippet, editor) {\n      var result = [];\n      var indentation = \"\";\n      var afterNewLine = true;\n\n      for (var i = 0; i < snippet.length; i++) {\n        var ch = snippet[i];\n\n        if (typeof ch == \"string\") {\n          result.push(ch);\n\n          if (ch == \"\\n\") {\n            afterNewLine = true;\n            indentation = \"\";\n          } else if (afterNewLine) {\n            indentation = /^\\t*/.exec(ch)[0];\n            afterNewLine = /\\S/.test(ch);\n          }\n\n          continue;\n        }\n\n        if (!ch) continue;\n        afterNewLine = false;\n\n        if (ch.fmtString) {\n          var j = snippet.indexOf(ch, i + 1);\n          if (j == -1) j = snippet.length;\n          ch.fmt = snippet.slice(i + 1, j);\n          i = j;\n        }\n\n        if (ch.text) {\n          var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n          if (ch.fmtString) value = this.tmStrFormat(value, ch, editor);\n          if (ch.formatFunction) value = this.tmFormatFunction(value, ch, editor);\n\n          if (value && !ch.ifEnd) {\n            result.push(value);\n            gotoNext(ch);\n          } else if (!value && ch.ifEnd) {\n            gotoNext(ch.ifEnd);\n          }\n        } else if (ch.elseEnd) {\n          gotoNext(ch.elseEnd);\n        } else if (ch.tabstopId != null) {\n          result.push(ch);\n        } else if (ch.changeCase != null) {\n          result.push(ch);\n        }\n      }\n\n      function gotoNext(ch) {\n        var i1 = snippet.indexOf(ch, i + 1);\n        if (i1 != -1) i = i1;\n      }\n\n      return result;\n    };\n\n    var processSnippetText = function processSnippetText(editor, snippetText, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var tabString = editor.session.getTabString();\n      var indentString = line.match(/^\\s*/)[0];\n      if (cursor.column < indentString.length) indentString = indentString.slice(0, cursor.column);\n      snippetText = snippetText.replace(/\\r/g, \"\");\n      var tokens = this.tokenizeTmSnippet(snippetText);\n      tokens = this.resolveVariables(tokens, editor);\n      tokens = tokens.map(function (x) {\n        if (x == \"\\n\" && !options.excludeExtraIndent) return x + indentString;\n        if (typeof x == \"string\") return x.replace(/\\t/g, tabString);\n        return x;\n      });\n      var tabstops = [];\n      tokens.forEach(function (p, i) {\n        if (typeof p != \"object\") return;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n\n        if (!ts) {\n          ts = tabstops[id] = [];\n          ts.index = id;\n          ts.value = \"\";\n          ts.parents = {};\n        }\n\n        if (ts.indexOf(p) !== -1) return;\n        if (p.choices && !ts.choices) ts.choices = p.choices;\n        ts.push(p);\n        var i1 = tokens.indexOf(p, i + 1);\n        if (i1 === -1) return;\n        var value = tokens.slice(i + 1, i1);\n        var isNested = value.some(function (t) {\n          return typeof t === \"object\";\n        });\n\n        if (isNested && !ts.value) {\n          ts.value = value;\n        } else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n          ts.value = value.join(\"\");\n        }\n      });\n      tabstops.forEach(function (ts) {\n        ts.length = 0;\n      });\n      var expanding = {};\n\n      function copyValue(val) {\n        var copy = [];\n\n        for (var i = 0; i < val.length; i++) {\n          var p = val[i];\n\n          if (typeof p == \"object\") {\n            if (expanding[p.tabstopId]) continue;\n            var j = val.lastIndexOf(p, i - 1);\n            p = copy[j] || {\n              tabstopId: p.tabstopId\n            };\n          }\n\n          copy[i] = p;\n        }\n\n        return copy;\n      }\n\n      for (var i = 0; i < tokens.length; i++) {\n        var p = tokens[i];\n        if (typeof p != \"object\") continue;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        var i1 = tokens.indexOf(p, i + 1);\n\n        if (expanding[id]) {\n          if (expanding[id] === p) {\n            delete expanding[id];\n            Object.keys(expanding).forEach(function (parentId) {\n              ts.parents[parentId] = true;\n            });\n          }\n\n          continue;\n        }\n\n        expanding[id] = p;\n        var value = ts.value;\n        if (typeof value !== \"string\") value = copyValue(value);else if (p.fmt) value = this.tmStrFormat(value, p, editor);\n        tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n        if (ts.indexOf(p) === -1) ts.push(p);\n      }\n\n      var row = 0,\n          column = 0;\n      var text = \"\";\n      tokens.forEach(function (t) {\n        if (typeof t === \"string\") {\n          var lines = t.split(\"\\n\");\n\n          if (lines.length > 1) {\n            column = lines[lines.length - 1].length;\n            row += lines.length - 1;\n          } else column += t.length;\n\n          text += t;\n        } else if (t) {\n          if (!t.start) t.start = {\n            row: row,\n            column: column\n          };else t.end = {\n            row: row,\n            column: column\n          };\n        }\n      });\n      return {\n        text: text,\n        tabstops: tabstops,\n        tokens: tokens\n      };\n    };\n\n    this.getDisplayTextForSnippet = function (editor, snippetText) {\n      var processedSnippet = processSnippetText.call(this, editor, snippetText);\n      return processedSnippet.text;\n    };\n\n    this.insertSnippetForSelection = function (editor, snippetText, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var processedSnippet = processSnippetText.call(this, editor, snippetText, options);\n      var range = editor.getSelectionRange();\n\n      if (options.range && options.range.compareRange(range) === 0) {\n        range = options.range;\n      }\n\n      var end = editor.session.replace(range, processedSnippet.text);\n      var tabstopManager = new TabstopManager(editor);\n      var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n      tabstopManager.addTabstops(processedSnippet.tabstops, range.start, end, selectionId);\n    };\n\n    this.insertSnippet = function (editor, snippetText, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var self = this;\n      if (options.range && !(options.range instanceof Range)) options.range = Range.fromPoints(options.range.start, options.range.end);\n      if (editor.inVirtualSelectionMode) return self.insertSnippetForSelection(editor, snippetText, options);\n      editor.forEachSelection(function () {\n        self.insertSnippetForSelection(editor, snippetText, options);\n      }, null, {\n        keepOrder: true\n      });\n      if (editor.tabstopManager) editor.tabstopManager.tabNext();\n    };\n\n    this.$getScope = function (editor) {\n      var scope = editor.session.$mode.$id || \"\";\n      scope = scope.split(\"/\").pop();\n\n      if (scope === \"html\" || scope === \"php\") {\n        if (scope === \"php\" && !editor.session.$mode.inlinePhp) scope = \"html\";\n        var c = editor.getCursorPosition();\n        var state = editor.session.getState(c.row);\n\n        if (typeof state === \"object\") {\n          state = state[0];\n        }\n\n        if (state.substring) {\n          if (state.substring(0, 3) == \"js-\") scope = \"javascript\";else if (state.substring(0, 4) == \"css-\") scope = \"css\";else if (state.substring(0, 4) == \"php-\") scope = \"php\";\n        }\n      }\n\n      return scope;\n    };\n\n    this.getActiveScopes = function (editor) {\n      var scope = this.$getScope(editor);\n      var scopes = [scope];\n      var snippetMap = this.snippetMap;\n\n      if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n        scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n      }\n\n      scopes.push(\"_\");\n      return scopes;\n    };\n\n    this.expandWithTab = function (editor, options) {\n      var self = this;\n      var result = editor.forEachSelection(function () {\n        return self.expandSnippetForSelection(editor, options);\n      }, null, {\n        keepOrder: true\n      });\n      if (result && editor.tabstopManager) editor.tabstopManager.tabNext();\n      return result;\n    };\n\n    this.expandSnippetForSelection = function (editor, options) {\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var before = line.substring(0, cursor.column);\n      var after = line.substr(cursor.column);\n      var snippetMap = this.snippetMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = this.findMatchingSnippet(snippets, before, after);\n        return !!snippet;\n      }, this);\n      if (!snippet) return false;\n      if (options && options.dryRun) return true;\n      editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n      this.variables.M__ = snippet.matchBefore;\n      this.variables.T__ = snippet.matchAfter;\n      this.insertSnippetForSelection(editor, snippet.content);\n      this.variables.M__ = this.variables.T__ = null;\n      return true;\n    };\n\n    this.findMatchingSnippet = function (snippetList, before, after) {\n      for (var i = snippetList.length; i--;) {\n        var s = snippetList[i];\n        if (s.startRe && !s.startRe.test(before)) continue;\n        if (s.endRe && !s.endRe.test(after)) continue;\n        if (!s.startRe && !s.endRe) continue;\n        s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n        s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n        s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n        s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n        return s;\n      }\n    };\n\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n\n    this.register = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n      var self = this;\n      if (!snippets) snippets = [];\n\n      function wrapRegexp(src) {\n        if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src)) src = \"(?:\" + src + \")\";\n        return src || \"\";\n      }\n\n      function guardedRegexp(re, guard, opening) {\n        re = wrapRegexp(re);\n        guard = wrapRegexp(guard);\n\n        if (opening) {\n          re = guard + re;\n          if (re && re[re.length - 1] != \"$\") re = re + \"$\";\n        } else {\n          re = re + guard;\n          if (re && re[0] != \"^\") re = \"^\" + re;\n        }\n\n        return new RegExp(re);\n      }\n\n      function addSnippet(s) {\n        if (!s.scope) s.scope = scope || \"_\";\n        scope = s.scope;\n\n        if (!snippetMap[scope]) {\n          snippetMap[scope] = [];\n          snippetNameMap[scope] = {};\n        }\n\n        var map = snippetNameMap[scope];\n\n        if (s.name) {\n          var old = map[s.name];\n          if (old) self.unregister(old);\n          map[s.name] = s;\n        }\n\n        snippetMap[scope].push(s);\n        if (s.prefix) s.tabTrigger = s.prefix;\n        if (!s.content && s.body) s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n\n        if (s.tabTrigger && !s.trigger) {\n          if (!s.guard && /^\\w/.test(s.tabTrigger)) s.guard = \"\\\\b\";\n          s.trigger = lang.escapeRegExp(s.tabTrigger);\n        }\n\n        if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard) return;\n        s.startRe = guardedRegexp(s.trigger, s.guard, true);\n        s.triggerRe = new RegExp(s.trigger);\n        s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n        s.endTriggerRe = new RegExp(s.endTrigger);\n      }\n\n      if (Array.isArray(snippets)) {\n        snippets.forEach(addSnippet);\n      } else {\n        Object.keys(snippets).forEach(function (key) {\n          addSnippet(snippets[key]);\n        });\n      }\n\n      this._signal(\"registerSnippets\", {\n        scope: scope\n      });\n    };\n\n    this.unregister = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n\n      function removeSnippet(s) {\n        var nameMap = snippetNameMap[s.scope || scope];\n\n        if (nameMap && nameMap[s.name]) {\n          delete nameMap[s.name];\n          var map = snippetMap[s.scope || scope];\n          var i = map && map.indexOf(s);\n          if (i >= 0) map.splice(i, 1);\n        }\n      }\n\n      if (snippets.content) removeSnippet(snippets);else if (Array.isArray(snippets)) snippets.forEach(removeSnippet);\n    };\n\n    this.parseSnippetFile = function (str) {\n      str = str.replace(/\\r/g, \"\");\n      var list = [],\n          snippet = {};\n      var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n      var m;\n\n      while (m = re.exec(str)) {\n        if (m[1]) {\n          try {\n            snippet = JSON.parse(m[1]);\n            list.push(snippet);\n          } catch (e) {}\n        }\n\n        if (m[4]) {\n          snippet.content = m[4].replace(/^\\t/gm, \"\");\n          list.push(snippet);\n          snippet = {};\n        } else {\n          var key = m[2],\n              val = m[3];\n\n          if (key == \"regex\") {\n            var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n            snippet.guard = guardRe.exec(val)[1];\n            snippet.trigger = guardRe.exec(val)[1];\n            snippet.endTrigger = guardRe.exec(val)[1];\n            snippet.endGuard = guardRe.exec(val)[1];\n          } else if (key == \"snippet\") {\n            snippet.tabTrigger = val.match(/^\\S*/)[0];\n            if (!snippet.name) snippet.name = val;\n          } else if (key) {\n            snippet[key] = val;\n          }\n        }\n      }\n\n      return list;\n    };\n\n    this.getSnippetByName = function (name, editor) {\n      var snippetMap = this.snippetNameMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = snippets[name];\n        return !!snippet;\n      }, this);\n      return snippet;\n    };\n  }).call(SnippetManager.prototype);\n\n  var TabstopManager = function TabstopManager(editor) {\n    if (editor.tabstopManager) return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n  };\n\n  (function () {\n    this.attach = function (editor) {\n      this.index = 0;\n      this.ranges = [];\n      this.tabstops = [];\n      this.$openTabstops = null;\n      this.selectedTabstop = null;\n      this.editor = editor;\n      this.editor.on(\"change\", this.$onChange);\n      this.editor.on(\"changeSelection\", this.$onChangeSelection);\n      this.editor.on(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n\n    this.detach = function () {\n      this.tabstops.forEach(this.removeTabstopMarkers, this);\n      this.ranges = null;\n      this.tabstops = null;\n      this.selectedTabstop = null;\n      this.editor.removeListener(\"change\", this.$onChange);\n      this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n      this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n      this.editor.tabstopManager = null;\n      this.editor = null;\n    };\n\n    this.onChange = function (delta) {\n      var isRemove = delta.action[0] == \"r\";\n      var selectedTabstop = this.selectedTabstop || {};\n      var parents = selectedTabstop.parents || {};\n      var tabstops = (this.tabstops || []).slice();\n\n      for (var i = 0; i < tabstops.length; i++) {\n        var ts = tabstops[i];\n        var active = ts == selectedTabstop || parents[ts.index];\n        ts.rangeList.$bias = active ? 0 : 1;\n\n        if (delta.action == \"remove\" && ts !== selectedTabstop) {\n          var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n          var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n          startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n          var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n          endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n          var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n\n          for (var j = 0; j < toRemove.length; j++) {\n            this.removeRange(toRemove[j]);\n          }\n        }\n\n        ts.rangeList.$onChange(delta);\n      }\n\n      var session = this.editor.session;\n      if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue()) this.detach();\n    };\n\n    this.updateLinkedFields = function () {\n      var ts = this.selectedTabstop;\n      if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked) return;\n      this.$inChange = true;\n      var session = this.editor.session;\n      var text = session.getTextRange(ts.firstNonLinked);\n\n      for (var i = 0; i < ts.length; i++) {\n        var range = ts[i];\n        if (!range.linked) continue;\n        var original = range.original;\n        var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n        session.replace(range, fmt);\n      }\n\n      this.$inChange = false;\n    };\n\n    this.onAfterExec = function (e) {\n      if (e.command && !e.command.readOnly) this.updateLinkedFields();\n    };\n\n    this.onChangeSelection = function () {\n      if (!this.editor) return;\n      var lead = this.editor.selection.lead;\n      var anchor = this.editor.selection.anchor;\n      var isEmpty = this.editor.selection.isEmpty();\n\n      for (var i = 0; i < this.ranges.length; i++) {\n        if (this.ranges[i].linked) continue;\n        var containsLead = this.ranges[i].contains(lead.row, lead.column);\n        var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n        if (containsLead && containsAnchor) return;\n      }\n\n      this.detach();\n    };\n\n    this.onChangeSession = function () {\n      this.detach();\n    };\n\n    this.tabNext = function (dir) {\n      var max = this.tabstops.length;\n      var index = this.index + (dir || 1);\n      index = Math.min(Math.max(index, 1), max);\n      if (index == max) index = 0;\n      this.selectTabstop(index);\n      if (index === 0) this.detach();\n    };\n\n    this.selectTabstop = function (index) {\n      this.$openTabstops = null;\n      var ts = this.tabstops[this.index];\n      if (ts) this.addTabstopMarkers(ts);\n      this.index = index;\n      ts = this.tabstops[this.index];\n      if (!ts || !ts.length) return;\n      this.selectedTabstop = ts;\n      var range = ts.firstNonLinked || ts;\n      if (ts.choices) range.cursor = range.start;\n\n      if (!this.editor.inVirtualSelectionMode) {\n        var sel = this.editor.multiSelect;\n        sel.toSingleRange(range);\n\n        for (var i = 0; i < ts.length; i++) {\n          if (ts.hasLinkedRanges && ts[i].linked) continue;\n          sel.addRange(ts[i].clone(), true);\n        }\n      } else {\n        this.editor.selection.fromOrientedRange(range);\n      }\n\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n      if (this.selectedTabstop && this.selectedTabstop.choices) this.editor.execCommand(\"startAutocomplete\", {\n        matches: this.selectedTabstop.choices\n      });\n    };\n\n    this.addTabstops = function (tabstops, start, end) {\n      var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n      if (!this.$openTabstops) this.$openTabstops = [];\n\n      if (!tabstops[0]) {\n        var p = Range.fromPoints(end, end);\n        moveRelative(p.start, start);\n        moveRelative(p.end, start);\n        tabstops[0] = [p];\n        tabstops[0].index = 0;\n      }\n\n      var i = this.index;\n      var arg = [i + 1, 0];\n      var ranges = this.ranges;\n      tabstops.forEach(function (ts, index) {\n        var dest = this.$openTabstops[index] || ts;\n\n        for (var i = 0; i < ts.length; i++) {\n          var p = ts[i];\n          var range = Range.fromPoints(p.start, p.end || p.start);\n          movePoint(range.start, start);\n          movePoint(range.end, start);\n          range.original = p;\n          range.tabstop = dest;\n          ranges.push(range);\n          if (dest != ts) dest.unshift(range);else dest[i] = range;\n\n          if (p.fmtString || dest.firstNonLinked && useLink) {\n            range.linked = true;\n            dest.hasLinkedRanges = true;\n          } else if (!dest.firstNonLinked) dest.firstNonLinked = range;\n        }\n\n        if (!dest.firstNonLinked) dest.hasLinkedRanges = false;\n\n        if (dest === ts) {\n          arg.push(dest);\n          this.$openTabstops[index] = dest;\n        }\n\n        this.addTabstopMarkers(dest);\n        dest.rangeList = dest.rangeList || new RangeList();\n        dest.rangeList.$bias = 0;\n        dest.rangeList.addList(dest);\n      }, this);\n\n      if (arg.length > 2) {\n        if (this.tabstops.length) arg.push(arg.splice(2, 1)[0]);\n        this.tabstops.splice.apply(this.tabstops, arg);\n      }\n    };\n\n    this.addTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        if (!range.markerId) range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n      });\n    };\n\n    this.removeTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        session.removeMarker(range.markerId);\n        range.markerId = null;\n      });\n    };\n\n    this.removeRange = function (range) {\n      var i = range.tabstop.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      i = this.ranges.indexOf(range);\n      if (i != -1) this.ranges.splice(i, 1);\n      i = range.tabstop.rangeList.ranges.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      this.editor.session.removeMarker(range.markerId);\n\n      if (!range.tabstop.length) {\n        i = this.tabstops.indexOf(range.tabstop);\n        if (i != -1) this.tabstops.splice(i, 1);\n        if (!this.tabstops.length) this.detach();\n      }\n    };\n\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n      \"Tab\": function Tab(editor) {\n        if (exports.snippetManager && exports.snippetManager.expandWithTab(editor)) return;\n        editor.tabstopManager.tabNext(1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Shift-Tab\": function ShiftTab(editor) {\n        editor.tabstopManager.tabNext(-1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Esc\": function Esc(editor) {\n        editor.tabstopManager.detach();\n      }\n    });\n  }).call(TabstopManager.prototype);\n\n  var movePoint = function movePoint(point, diff) {\n    if (point.row == 0) point.column += diff.column;\n    point.row += diff.row;\n  };\n\n  var moveRelative = function moveRelative(point, start) {\n    if (point.row == start.row) point.column -= start.column;\n    point.row -= start.row;\n  };\n\n  dom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\n  exports.snippetManager = new SnippetManager();\n\n  var Editor = require(\"./editor\").Editor;\n\n  (function () {\n    this.insertSnippet = function (content, options) {\n      return exports.snippetManager.insertSnippet(this, content, options);\n    };\n\n    this.expandSnippet = function (options) {\n      return exports.snippetManager.expandWithTab(this, options);\n    };\n  }).call(Editor.prototype);\n});\nace.define(\"ace/autocomplete/popup\", [\"require\", \"exports\", \"module\", \"ace/virtual_renderer\", \"ace/editor\", \"ace/range\", \"ace/lib/event\", \"ace/lib/lang\", \"ace/lib/dom\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var Renderer = require(\"../virtual_renderer\").VirtualRenderer;\n\n  var Editor = require(\"../editor\").Editor;\n\n  var Range = require(\"../range\").Range;\n\n  var event = require(\"../lib/event\");\n\n  var lang = require(\"../lib/lang\");\n\n  var dom = require(\"../lib/dom\");\n\n  var nls = require(\"../config\").nls;\n\n  var getAriaId = function getAriaId(index) {\n    return \"suggest-aria-id:\".concat(index);\n  };\n\n  var $singleLineEditor = function $singleLineEditor(el) {\n    var renderer = new Renderer(el);\n    renderer.$maxLines = 4;\n    var editor = new Editor(renderer);\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n    return editor;\n  };\n\n  var AcePopup =\n  /** @class */\n  function () {\n    function AcePopup(parentNode) {\n      var el = dom.createElement(\"div\");\n      var popup = new $singleLineEditor(el);\n      if (parentNode) parentNode.appendChild(el);\n      el.style.display = \"none\";\n      popup.renderer.content.style.cursor = \"default\";\n      popup.renderer.setStyle(\"ace_autocomplete\");\n      popup.renderer.container.setAttribute(\"role\", \"listbox\");\n      popup.renderer.container.setAttribute(\"aria-label\", nls(\"Autocomplete suggestions\"));\n      popup.setOption(\"displayIndentGuides\", false);\n      popup.setOption(\"dragDelay\", 150);\n\n      var noop = function noop() {};\n\n      popup.focus = noop;\n      popup.$isFocused = true;\n      popup.renderer.$cursorLayer.restartTimer = noop;\n      popup.renderer.$cursorLayer.element.style.opacity = 0;\n      popup.renderer.$maxLines = 8;\n      popup.renderer.$keepTextAreaAtCursor = false;\n      popup.setHighlightActiveLine(false);\n      popup.session.highlight(\"\");\n      popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n      popup.on(\"mousedown\", function (e) {\n        var pos = e.getDocumentPosition();\n        popup.selection.moveToPosition(pos);\n        selectionMarker.start.row = selectionMarker.end.row = pos.row;\n        e.stop();\n      });\n      var lastMouseEvent;\n      var hoverMarker = new Range(-1, 0, -1, Infinity);\n      var selectionMarker = new Range(-1, 0, -1, Infinity);\n      selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n\n      popup.setSelectOnHover = function (val) {\n        if (!val) {\n          hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n        } else if (hoverMarker.id) {\n          popup.session.removeMarker(hoverMarker.id);\n          hoverMarker.id = null;\n        }\n      };\n\n      popup.setSelectOnHover(false);\n      popup.on(\"mousemove\", function (e) {\n        if (!lastMouseEvent) {\n          lastMouseEvent = e;\n          return;\n        }\n\n        if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n          return;\n        }\n\n        lastMouseEvent = e;\n        lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n        var row = lastMouseEvent.getDocumentPosition().row;\n\n        if (hoverMarker.start.row != row) {\n          if (!hoverMarker.id) popup.setRow(row);\n          setHoverMarker(row);\n        }\n      });\n      popup.renderer.on(\"beforeRender\", function () {\n        if (lastMouseEvent && hoverMarker.start.row != -1) {\n          lastMouseEvent.$pos = null;\n          var row = lastMouseEvent.getDocumentPosition().row;\n          if (!hoverMarker.id) popup.setRow(row);\n          setHoverMarker(row, true);\n        }\n      });\n      popup.renderer.on(\"afterRender\", function () {\n        var row = popup.getRow();\n        var t = popup.renderer.$textLayer;\n        var selected = t.element.childNodes[row - t.config.firstRow];\n        var el = document.activeElement; // Active element is textarea of main editor\n\n        if (selected !== t.selectedNode && t.selectedNode) {\n          dom.removeCssClass(t.selectedNode, \"ace_selected\");\n          el.removeAttribute(\"aria-activedescendant\");\n          t.selectedNode.removeAttribute(\"id\");\n        }\n\n        t.selectedNode = selected;\n\n        if (selected) {\n          dom.addCssClass(selected, \"ace_selected\");\n          var ariaId = getAriaId(row);\n          selected.id = ariaId;\n          popup.renderer.container.setAttribute(\"aria-activedescendant\", ariaId);\n          el.setAttribute(\"aria-activedescendant\", ariaId);\n          selected.setAttribute(\"role\", \"option\");\n          selected.setAttribute(\"aria-label\", popup.getData(row).value);\n          selected.setAttribute(\"aria-setsize\", popup.data.length);\n          selected.setAttribute(\"aria-posinset\", row);\n        }\n      });\n\n      var hideHoverMarker = function hideHoverMarker() {\n        setHoverMarker(-1);\n      };\n\n      var setHoverMarker = function setHoverMarker(row, suppressRedraw) {\n        if (row !== hoverMarker.start.row) {\n          hoverMarker.start.row = hoverMarker.end.row = row;\n          if (!suppressRedraw) popup.session._emit(\"changeBackMarker\");\n\n          popup._emit(\"changeHoverMarker\");\n        }\n      };\n\n      popup.getHoveredRow = function () {\n        return hoverMarker.start.row;\n      };\n\n      event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n      popup.on(\"hide\", hideHoverMarker);\n      popup.on(\"changeSelection\", hideHoverMarker);\n\n      popup.session.doc.getLength = function () {\n        return popup.data.length;\n      };\n\n      popup.session.doc.getLine = function (i) {\n        var data = popup.data[i];\n        if (typeof data == \"string\") return data;\n        return data && data.value || \"\";\n      };\n\n      var bgTokenizer = popup.session.bgTokenizer;\n\n      bgTokenizer.$tokenizeRow = function (row) {\n        var data = popup.data[row];\n        var tokens = [];\n        if (!data) return tokens;\n        if (typeof data == \"string\") data = {\n          value: data\n        };\n        var caption = data.caption || data.value || data.name;\n\n        function addToken(value, className) {\n          value && tokens.push({\n            type: (data.className || \"\") + (className || \"\"),\n            value: value\n          });\n        }\n\n        var lower = caption.toLowerCase();\n        var filterText = (popup.filterText || \"\").toLowerCase();\n        var lastIndex = 0;\n        var lastI = 0;\n\n        for (var i = 0; i <= filterText.length; i++) {\n          if (i != lastI && (data.matchMask & 1 << i || i == filterText.length)) {\n            var sub = filterText.slice(lastI, i);\n            lastI = i;\n            var index = lower.indexOf(sub, lastIndex);\n            if (index == -1) continue;\n            addToken(caption.slice(lastIndex, index), \"\");\n            lastIndex = index + sub.length;\n            addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n          }\n        }\n\n        addToken(caption.slice(lastIndex, caption.length), \"\");\n        if (data.meta) tokens.push({\n          type: \"completion-meta\",\n          value: data.meta\n        });\n        if (data.message) tokens.push({\n          type: \"completion-message\",\n          value: data.message\n        });\n        return tokens;\n      };\n\n      bgTokenizer.$updateOnChange = noop;\n      bgTokenizer.start = noop;\n\n      popup.session.$computeWidth = function () {\n        return this.screenWidth = 0;\n      };\n\n      popup.isOpen = false;\n      popup.isTopdown = false;\n      popup.autoSelect = true;\n      popup.filterText = \"\";\n      popup.data = [];\n\n      popup.setData = function (list, filterText) {\n        popup.filterText = filterText || \"\";\n        popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n        popup.data = list || [];\n        popup.setRow(0);\n      };\n\n      popup.getData = function (row) {\n        return popup.data[row];\n      };\n\n      popup.getRow = function () {\n        return selectionMarker.start.row;\n      };\n\n      popup.setRow = function (line) {\n        line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n\n        if (selectionMarker.start.row != line) {\n          popup.selection.clearSelection();\n          selectionMarker.start.row = selectionMarker.end.row = line || 0;\n\n          popup.session._emit(\"changeBackMarker\");\n\n          popup.moveCursorTo(line || 0, 0);\n          if (popup.isOpen) popup._signal(\"select\");\n        }\n      };\n\n      popup.on(\"changeSelection\", function () {\n        if (popup.isOpen) popup.setRow(popup.selection.lead.row);\n        popup.renderer.scrollCursorIntoView();\n      });\n\n      popup.hide = function () {\n        this.container.style.display = \"none\";\n        popup.anchorPos = null;\n        popup.anchor = null;\n\n        if (popup.isOpen) {\n          popup.isOpen = false;\n\n          this._signal(\"hide\");\n        }\n      };\n\n      popup.tryShow = function (pos, lineHeight, anchor, forceShow) {\n        if (!forceShow && popup.isOpen && popup.anchorPos && popup.anchor && popup.anchorPos.top === pos.top && popup.anchorPos.left === pos.left && popup.anchor === anchor) {\n          return true;\n        }\n\n        var el = this.container;\n        var screenHeight = window.innerHeight;\n        var screenWidth = window.innerWidth;\n        var renderer = this.renderer;\n        var maxH = renderer.$maxLines * lineHeight * 1.4;\n        var dims = {\n          top: 0,\n          bottom: 0,\n          left: 0\n        };\n        var spaceBelow = screenHeight - pos.top - 3 * this.$borderSize - lineHeight;\n        var spaceAbove = pos.top - 3 * this.$borderSize;\n\n        if (!anchor) {\n          if (spaceAbove <= spaceBelow || spaceBelow >= maxH) {\n            anchor = \"bottom\";\n          } else {\n            anchor = \"top\";\n          }\n        }\n\n        if (anchor === \"top\") {\n          dims.bottom = pos.top - this.$borderSize;\n          dims.top = dims.bottom - maxH;\n        } else if (anchor === \"bottom\") {\n          dims.top = pos.top + lineHeight + this.$borderSize;\n          dims.bottom = dims.top + maxH;\n        }\n\n        var fitsX = dims.top >= 0 && dims.bottom <= screenHeight;\n\n        if (!forceShow && !fitsX) {\n          return false;\n        }\n\n        if (!fitsX) {\n          if (anchor === \"top\") {\n            renderer.$maxPixelHeight = spaceAbove;\n          } else {\n            renderer.$maxPixelHeight = spaceBelow;\n          }\n        } else {\n          renderer.$maxPixelHeight = null;\n        }\n\n        if (anchor === \"top\") {\n          el.style.top = \"\";\n          el.style.bottom = screenHeight - dims.bottom + \"px\";\n          popup.isTopdown = false;\n        } else {\n          el.style.top = dims.top + \"px\";\n          el.style.bottom = \"\";\n          popup.isTopdown = true;\n        }\n\n        el.style.display = \"\";\n        var left = pos.left;\n        if (left + el.offsetWidth > screenWidth) left = screenWidth - el.offsetWidth;\n        el.style.left = left + \"px\";\n        el.style.right = \"\";\n\n        if (!popup.isOpen) {\n          popup.isOpen = true;\n\n          this._signal(\"show\");\n\n          lastMouseEvent = null;\n        }\n\n        popup.anchorPos = pos;\n        popup.anchor = anchor;\n        return true;\n      };\n\n      popup.show = function (pos, lineHeight, topdownOnly) {\n        this.tryShow(pos, lineHeight, topdownOnly ? \"bottom\" : undefined, true);\n      };\n\n      popup.goTo = function (where) {\n        var row = this.getRow();\n        var max = this.session.getLength() - 1;\n\n        switch (where) {\n          case \"up\":\n            row = row <= 0 ? max : row - 1;\n            break;\n\n          case \"down\":\n            row = row >= max ? -1 : row + 1;\n            break;\n\n          case \"start\":\n            row = 0;\n            break;\n\n          case \"end\":\n            row = max;\n            break;\n        }\n\n        this.setRow(row);\n      };\n\n      popup.getTextLeftOffset = function () {\n        return this.$borderSize + this.renderer.$padding + this.$imageSize;\n      };\n\n      popup.$imageSize = 0;\n      popup.$borderSize = 1;\n      return popup;\n    }\n\n    return AcePopup;\n  }();\n\n  dom.importCssString(\"\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #CAD6FA;\\n    z-index: 1;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #3a674e;\\n}\\n.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid #abbffe;\\n    margin-top: -1px;\\n    background: rgba(233,233,253,0.4);\\n    position: absolute;\\n    z-index: 2;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\n    background: rgba(58, 103, 78, 0.62);\\n}\\n.ace_completion-meta {\\n    opacity: 0.5;\\n    margin: 0 0.9em;\\n}\\n.ace_completion-message {\\n    color: blue;\\n}\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #2d69c7;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #93ca12;\\n}\\n.ace_editor.ace_autocomplete {\\n    width: 300px;\\n    z-index: 200000;\\n    border: 1px lightgray solid;\\n    position: fixed;\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n    line-height: 1.4;\\n    background: #fefefe;\\n    color: #111;\\n}\\n.ace_dark.ace_editor.ace_autocomplete {\\n    border: 1px #484747 solid;\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\n    line-height: 1.4;\\n    background: #25282c;\\n    color: #c1c1c1;\\n}\\n.ace_autocomplete_right .ace_text-layer  {\\n    width: calc(100% - 8px);\\n}\\n.ace_autocomplete_right .ace_line {\\n    display: flex;\\n}\\n.ace_autocomplete_right .ace_completion-meta {\\n    flex: 1;\\n    text-align: right;\\n}\\n\", \"autocompletion.css\", false);\n  exports.AcePopup = AcePopup;\n  exports.$singleLineEditor = $singleLineEditor;\n  exports.getAriaId = getAriaId;\n});\nace.define(\"ace/autocomplete/inline\", [\"require\", \"exports\", \"module\", \"ace/snippets\"], function (require, exports, module) {\n  \"use strict\";\n\n  var snippetManager = require(\"../snippets\").snippetManager;\n\n  var AceInline =\n  /** @class */\n  function () {\n    function AceInline() {\n      this.editor = null;\n    }\n\n    AceInline.prototype.show = function (editor, completion, prefix) {\n      prefix = prefix || \"\";\n\n      if (editor && this.editor && this.editor !== editor) {\n        this.hide();\n        this.editor = null;\n      }\n\n      if (!editor || !completion) {\n        return false;\n      }\n\n      var displayText = completion.snippet ? snippetManager.getDisplayTextForSnippet(editor, completion.snippet) : completion.value;\n\n      if (!displayText || !displayText.startsWith(prefix)) {\n        return false;\n      }\n\n      this.editor = editor;\n      displayText = displayText.slice(prefix.length);\n\n      if (displayText === \"\") {\n        editor.removeGhostText();\n      } else {\n        editor.setGhostText(displayText);\n      }\n\n      return true;\n    };\n\n    AceInline.prototype.isOpen = function () {\n      if (!this.editor) {\n        return false;\n      }\n\n      return !!this.editor.renderer.$ghostText;\n    };\n\n    AceInline.prototype.hide = function () {\n      if (!this.editor) {\n        return false;\n      }\n\n      this.editor.removeGhostText();\n      return true;\n    };\n\n    AceInline.prototype.destroy = function () {\n      this.hide();\n      this.editor = null;\n    };\n\n    return AceInline;\n  }();\n\n  exports.AceInline = AceInline;\n});\nace.define(\"ace/autocomplete/util\", [\"require\", \"exports\", \"module\"], function (require, exports, module) {\n  \"use strict\";\n\n  exports.parForEach = function (array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0) callback();\n\n    for (var i = 0; i < arLength; i++) {\n      fn(array[i], function (result, err) {\n        completed++;\n        if (completed === arLength) callback(result, err);\n      });\n    }\n  };\n\n  var ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\n\n  exports.retrievePrecedingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n\n    for (var i = pos - 1; i >= 0; i--) {\n      if (regex.test(text[i])) buf.push(text[i]);else break;\n    }\n\n    return buf.reverse().join(\"\");\n  };\n\n  exports.retrieveFollowingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n\n    for (var i = pos; i < text.length; i++) {\n      if (regex.test(text[i])) buf.push(text[i]);else break;\n    }\n\n    return buf;\n  };\n\n  exports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function (completer) {\n      if (completer.identifierRegexps) {\n        completer.identifierRegexps.forEach(function (identifierRegex) {\n          if (!prefix && identifierRegex) prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n        }.bind(this));\n      }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n  };\n});\nace.define(\"ace/autocomplete\", [\"require\", \"exports\", \"module\", \"ace/keyboard/hash_handler\", \"ace/autocomplete/popup\", \"ace/autocomplete/inline\", \"ace/autocomplete/popup\", \"ace/autocomplete/util\", \"ace/lib/lang\", \"ace/lib/dom\", \"ace/snippets\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\n\n  var AcePopup = require(\"./autocomplete/popup\").AcePopup;\n\n  var AceInline = require(\"./autocomplete/inline\").AceInline;\n\n  var getAriaId = require(\"./autocomplete/popup\").getAriaId;\n\n  var util = require(\"./autocomplete/util\");\n\n  var lang = require(\"./lib/lang\");\n\n  var dom = require(\"./lib/dom\");\n\n  var snippetManager = require(\"./snippets\").snippetManager;\n\n  var config = require(\"./config\");\n\n  var destroyCompleter = function destroyCompleter(e, editor) {\n    editor.completer && editor.completer.destroy();\n  };\n\n  var Autocomplete =\n  /** @class */\n  function () {\n    function Autocomplete() {\n      this.autoInsert = false;\n      this.autoSelect = true;\n      this.exactMatch = false;\n      this.inlineEnabled = false;\n      this.keyboardHandler = new HashHandler();\n      this.keyboardHandler.bindKeys(this.commands);\n      this.blurListener = this.blurListener.bind(this);\n      this.changeListener = this.changeListener.bind(this);\n      this.mousedownListener = this.mousedownListener.bind(this);\n      this.mousewheelListener = this.mousewheelListener.bind(this);\n      this.changeTimer = lang.delayedCall(function () {\n        this.updateCompletions(true);\n      }.bind(this));\n      this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n    }\n\n    Autocomplete.prototype.$init = function () {\n      this.popup = new AcePopup(document.body || document.documentElement);\n      this.popup.on(\"click\", function (e) {\n        this.insertMatch();\n        e.stop();\n      }.bind(this));\n      this.popup.focus = this.editor.focus.bind(this.editor);\n      this.popup.on(\"show\", this.$onPopupChange.bind(this));\n      this.popup.on(\"hide\", this.$onHidePopup.bind(this));\n      this.popup.on(\"select\", this.$onPopupChange.bind(this));\n      this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n      return this.popup;\n    };\n\n    Autocomplete.prototype.$initInline = function () {\n      if (!this.inlineEnabled || this.inlineRenderer) return;\n      this.inlineRenderer = new AceInline();\n      return this.inlineRenderer;\n    };\n\n    Autocomplete.prototype.getPopup = function () {\n      return this.popup || this.$init();\n    };\n\n    Autocomplete.prototype.$onHidePopup = function () {\n      if (this.inlineRenderer) {\n        this.inlineRenderer.hide();\n      }\n\n      this.hideDocTooltip();\n    };\n\n    Autocomplete.prototype.$onPopupChange = function (hide) {\n      if (this.inlineRenderer && this.inlineEnabled) {\n        var completion = hide ? null : this.popup.getData(this.popup.getRow());\n        var prefix = util.getCompletionPrefix(this.editor);\n\n        if (!this.inlineRenderer.show(this.editor, completion, prefix)) {\n          this.inlineRenderer.hide();\n        }\n\n        this.$updatePopupPosition();\n      }\n\n      this.tooltipTimer.call(null, null);\n    };\n\n    Autocomplete.prototype.$updatePopupPosition = function () {\n      var editor = this.editor;\n      var renderer = editor.renderer;\n      var lineHeight = renderer.layerConfig.lineHeight;\n      var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n      pos.left -= this.popup.getTextLeftOffset();\n      var rect = editor.container.getBoundingClientRect();\n      pos.top += rect.top - renderer.layerConfig.offset;\n      pos.left += rect.left - editor.renderer.scrollLeft;\n      pos.left += renderer.gutterWidth;\n      var posGhostText = {\n        top: pos.top,\n        left: pos.left\n      };\n\n      if (renderer.$ghostText && renderer.$ghostTextWidget) {\n        if (this.base.row === renderer.$ghostText.position.row) {\n          posGhostText.top += renderer.$ghostTextWidget.el.offsetHeight;\n        }\n      }\n\n      if (this.popup.tryShow(posGhostText, lineHeight, \"bottom\")) {\n        return;\n      }\n\n      if (this.popup.tryShow(pos, lineHeight, \"top\")) {\n        return;\n      }\n\n      this.popup.show(pos, lineHeight);\n    };\n\n    Autocomplete.prototype.openPopup = function (editor, prefix, keepPopupPosition) {\n      if (!this.popup) this.$init();\n      if (this.inlineEnabled && !this.inlineRenderer) this.$initInline();\n      this.popup.autoSelect = this.autoSelect;\n      this.popup.setData(this.completions.filtered, this.completions.filterText);\n\n      if (this.editor.textInput.setAriaOptions) {\n        this.editor.textInput.setAriaOptions({\n          activeDescendant: getAriaId(this.popup.getRow()),\n          inline: this.inlineEnabled\n        });\n      }\n\n      editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n      this.popup.setRow(this.autoSelect ? 0 : -1);\n\n      if (!keepPopupPosition) {\n        this.popup.setTheme(editor.getTheme());\n        this.popup.setFontSize(editor.getFontSize());\n        this.$updatePopupPosition();\n\n        if (this.tooltipNode) {\n          this.updateDocTooltip();\n        }\n      } else if (keepPopupPosition && !prefix) {\n        this.detach();\n      }\n\n      this.changeTimer.cancel();\n    };\n\n    Autocomplete.prototype.detach = function () {\n      if (this.editor) {\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.off(\"changeSelection\", this.changeListener);\n        this.editor.off(\"blur\", this.blurListener);\n        this.editor.off(\"mousedown\", this.mousedownListener);\n        this.editor.off(\"mousewheel\", this.mousewheelListener);\n      }\n\n      this.changeTimer.cancel();\n      this.hideDocTooltip();\n\n      if (this.completionProvider) {\n        this.completionProvider.detach();\n      }\n\n      if (this.popup && this.popup.isOpen) this.popup.hide();\n      if (this.base) this.base.detach();\n      this.activated = false;\n      this.completionProvider = this.completions = this.base = null;\n    };\n\n    Autocomplete.prototype.changeListener = function (e) {\n      var cursor = this.editor.selection.lead;\n\n      if (cursor.row != this.base.row || cursor.column < this.base.column) {\n        this.detach();\n      }\n\n      if (this.activated) this.changeTimer.schedule();else this.detach();\n    };\n\n    Autocomplete.prototype.blurListener = function (e) {\n      var el = document.activeElement;\n      var text = this.editor.textInput.getElement();\n      var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n      var container = this.popup && this.popup.container;\n\n      if (el != text && el.parentNode != container && !fromTooltip && el != this.tooltipNode && e.relatedTarget != text) {\n        this.detach();\n      }\n    };\n\n    Autocomplete.prototype.mousedownListener = function (e) {\n      this.detach();\n    };\n\n    Autocomplete.prototype.mousewheelListener = function (e) {\n      this.detach();\n    };\n\n    Autocomplete.prototype.goTo = function (where) {\n      this.popup.goTo(where);\n    };\n\n    Autocomplete.prototype.insertMatch = function (data, options) {\n      if (!data) data = this.popup.getData(this.popup.getRow());\n      if (!data) return false;\n      var completions = this.completions;\n      var result = this.getCompletionProvider().insertMatch(this.editor, data, completions.filterText, options);\n      if (this.completions == completions) this.detach();\n      return result;\n    };\n\n    Autocomplete.prototype.showPopup = function (editor, options) {\n      if (this.editor) this.detach();\n      this.activated = true;\n      this.editor = editor;\n\n      if (editor.completer != this) {\n        if (editor.completer) editor.completer.detach();\n        editor.completer = this;\n      }\n\n      editor.on(\"changeSelection\", this.changeListener);\n      editor.on(\"blur\", this.blurListener);\n      editor.on(\"mousedown\", this.mousedownListener);\n      editor.on(\"mousewheel\", this.mousewheelListener);\n      this.updateCompletions(false, options);\n    };\n\n    Autocomplete.prototype.getCompletionProvider = function () {\n      if (!this.completionProvider) this.completionProvider = new CompletionProvider();\n      return this.completionProvider;\n    };\n\n    Autocomplete.prototype.gatherCompletions = function (editor, callback) {\n      return this.getCompletionProvider().gatherCompletions(editor, callback);\n    };\n\n    Autocomplete.prototype.updateCompletions = function (keepPopupPosition, options) {\n      if (keepPopupPosition && this.base && this.completions) {\n        var pos = this.editor.getCursorPosition();\n        var prefix = this.editor.session.getTextRange({\n          start: this.base,\n          end: pos\n        });\n        if (prefix == this.completions.filterText) return;\n        this.completions.setFilter(prefix);\n        if (!this.completions.filtered.length) return this.detach();\n        if (this.completions.filtered.length == 1 && this.completions.filtered[0].value == prefix && !this.completions.filtered[0].snippet) return this.detach();\n        this.openPopup(this.editor, prefix, keepPopupPosition);\n        return;\n      }\n\n      if (options && options.matches) {\n        var pos = this.editor.getSelectionRange().start;\n        this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n        this.base.$insertRight = true;\n        this.completions = new FilteredList(options.matches);\n        return this.openPopup(this.editor, \"\", keepPopupPosition);\n      }\n\n      var session = this.editor.getSession();\n      var pos = this.editor.getCursorPosition();\n      var prefix = util.getCompletionPrefix(this.editor);\n      this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n      this.base.$insertRight = true;\n      var completionOptions = {\n        exactMatch: this.exactMatch\n      };\n      this.getCompletionProvider().provideCompletions(this.editor, completionOptions, function (err, completions, finished) {\n        var filtered = completions.filtered;\n        var prefix = util.getCompletionPrefix(this.editor);\n\n        if (finished) {\n          if (!filtered.length) return this.detach();\n          if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet) return this.detach();\n          if (this.autoInsert && filtered.length == 1) return this.insertMatch(filtered[0]);\n        }\n\n        this.completions = completions;\n        this.openPopup(this.editor, prefix, keepPopupPosition);\n      }.bind(this));\n    };\n\n    Autocomplete.prototype.cancelContextMenu = function () {\n      this.editor.$mouseHandler.cancelContextMenu();\n    };\n\n    Autocomplete.prototype.updateDocTooltip = function () {\n      var popup = this.popup;\n      var all = popup.data;\n      var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n      var doc = null;\n      if (!selected || !this.editor || !this.popup.isOpen) return this.hideDocTooltip();\n      var completersLength = this.editor.completers.length;\n\n      for (var i = 0; i < completersLength; i++) {\n        var completer = this.editor.completers[i];\n\n        if (completer.getDocTooltip && selected.completerId === completer.id) {\n          doc = completer.getDocTooltip(selected);\n          break;\n        }\n      }\n\n      if (!doc && typeof selected != \"string\") doc = selected;\n      if (typeof doc == \"string\") doc = {\n        docText: doc\n      };\n      if (!doc || !(doc.docHTML || doc.docText)) return this.hideDocTooltip();\n      this.showDocTooltip(doc);\n    };\n\n    Autocomplete.prototype.showDocTooltip = function (item) {\n      if (!this.tooltipNode) {\n        this.tooltipNode = dom.createElement(\"div\");\n        this.tooltipNode.style.margin = 0;\n        this.tooltipNode.style.pointerEvents = \"auto\";\n        this.tooltipNode.tabIndex = -1;\n        this.tooltipNode.onblur = this.blurListener.bind(this);\n        this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n      }\n\n      var theme = this.editor.renderer.theme;\n      this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip \" + (theme.isDark ? \"ace_dark \" : \"\") + (theme.cssClass || \"\");\n      var tooltipNode = this.tooltipNode;\n\n      if (item.docHTML) {\n        tooltipNode.innerHTML = item.docHTML;\n      } else if (item.docText) {\n        tooltipNode.textContent = item.docText;\n      }\n\n      if (!tooltipNode.parentNode) document.body.appendChild(tooltipNode);\n      var popup = this.popup;\n      var rect = popup.container.getBoundingClientRect();\n      tooltipNode.style.top = popup.container.style.top;\n      tooltipNode.style.bottom = popup.container.style.bottom;\n      tooltipNode.style.display = \"block\";\n\n      if (window.innerWidth - rect.right < 320) {\n        if (rect.left < 320) {\n          if (popup.isTopdown) {\n            tooltipNode.style.top = rect.bottom + \"px\";\n            tooltipNode.style.left = rect.left + \"px\";\n            tooltipNode.style.right = \"\";\n            tooltipNode.style.bottom = \"\";\n          } else {\n            tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n            tooltipNode.style.left = rect.left + \"px\";\n            tooltipNode.style.right = \"\";\n            tooltipNode.style.bottom = \"\";\n          }\n        } else {\n          tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n          tooltipNode.style.left = \"\";\n        }\n      } else {\n        tooltipNode.style.left = rect.right + 1 + \"px\";\n        tooltipNode.style.right = \"\";\n      }\n    };\n\n    Autocomplete.prototype.hideDocTooltip = function () {\n      this.tooltipTimer.cancel();\n      if (!this.tooltipNode) return;\n      var el = this.tooltipNode;\n      if (!this.editor.isFocused() && document.activeElement == el) this.editor.focus();\n      this.tooltipNode = null;\n      if (el.parentNode) el.parentNode.removeChild(el);\n    };\n\n    Autocomplete.prototype.onTooltipClick = function (e) {\n      var a = e.target;\n\n      while (a && a != this.tooltipNode) {\n        if (a.nodeName == \"A\" && a.href) {\n          a.rel = \"noreferrer\";\n          a.target = \"_blank\";\n          break;\n        }\n\n        a = a.parentNode;\n      }\n    };\n\n    Autocomplete.prototype.destroy = function () {\n      this.detach();\n\n      if (this.popup) {\n        this.popup.destroy();\n        var el = this.popup.container;\n        if (el && el.parentNode) el.parentNode.removeChild(el);\n      }\n\n      if (this.editor && this.editor.completer == this) {\n        this.editor.off(\"destroy\", destroyCompleter);\n        this.editor.completer = null;\n      }\n\n      this.inlineRenderer = this.popup = this.editor = null;\n    };\n\n    return Autocomplete;\n  }();\n\n  Autocomplete.prototype.commands = {\n    \"Up\": function Up(editor) {\n      editor.completer.goTo(\"up\");\n    },\n    \"Down\": function Down(editor) {\n      editor.completer.goTo(\"down\");\n    },\n    \"Ctrl-Up|Ctrl-Home\": function CtrlUpCtrlHome(editor) {\n      editor.completer.goTo(\"start\");\n    },\n    \"Ctrl-Down|Ctrl-End\": function CtrlDownCtrlEnd(editor) {\n      editor.completer.goTo(\"end\");\n    },\n    \"Esc\": function Esc(editor) {\n      editor.completer.detach();\n    },\n    \"Return\": function Return(editor) {\n      return editor.completer.insertMatch();\n    },\n    \"Shift-Return\": function ShiftReturn(editor) {\n      editor.completer.insertMatch(null, {\n        deleteSuffix: true\n      });\n    },\n    \"Tab\": function Tab(editor) {\n      var result = editor.completer.insertMatch();\n      if (!result && !editor.tabstopManager) editor.completer.goTo(\"down\");else return result;\n    },\n    \"PageUp\": function PageUp(editor) {\n      editor.completer.popup.gotoPageUp();\n    },\n    \"PageDown\": function PageDown(editor) {\n      editor.completer.popup.gotoPageDown();\n    }\n  };\n\n  Autocomplete.for = function (editor) {\n    if (editor.completer instanceof Autocomplete) {\n      return editor.completer;\n    }\n\n    if (editor.completer) {\n      editor.completer.destroy();\n      editor.completer = null;\n    }\n\n    if (config.get(\"sharedPopups\")) {\n      if (!Autocomplete.$sharedInstance) Autocomplete.$sharedInstance = new Autocomplete();\n      editor.completer = Autocomplete.$sharedInstance;\n    } else {\n      editor.completer = new Autocomplete();\n      editor.once(\"destroy\", destroyCompleter);\n    }\n\n    return editor.completer;\n  };\n\n  Autocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function exec(editor, options) {\n      var completer = Autocomplete.for(editor);\n      completer.autoInsert = false;\n      completer.autoSelect = true;\n      completer.showPopup(editor, options);\n      completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n  };\n\n  var CompletionProvider =\n  /** @class */\n  function () {\n    function CompletionProvider() {\n      this.active = true;\n    }\n\n    CompletionProvider.prototype.insertByIndex = function (editor, index, options) {\n      if (!this.completions || !this.completions.filtered) {\n        return false;\n      }\n\n      return this.insertMatch(editor, this.completions.filtered[index], options);\n    };\n\n    CompletionProvider.prototype.insertMatch = function (editor, data, options) {\n      if (!data) return false;\n      editor.startOperation({\n        command: {\n          name: \"insertMatch\"\n        }\n      });\n\n      if (data.completer && data.completer.insertMatch) {\n        data.completer.insertMatch(editor, data);\n      } else {\n        if (!this.completions) return false;\n\n        if (this.completions.filterText) {\n          var ranges;\n\n          if (editor.selection.getAllRanges) {\n            ranges = editor.selection.getAllRanges();\n          } else {\n            ranges = [editor.getSelectionRange()];\n          }\n\n          for (var i = 0, range; range = ranges[i]; i++) {\n            range.start.column -= this.completions.filterText.length;\n            editor.session.remove(range);\n          }\n        }\n\n        if (data.snippet) snippetManager.insertSnippet(editor, data.snippet, {\n          range: data.range\n        });else {\n          this.$insertString(editor, data);\n        }\n\n        if (data.command && data.command === \"startAutocomplete\") {\n          editor.execCommand(data.command);\n        }\n      }\n\n      editor.endOperation();\n      return true;\n    };\n\n    CompletionProvider.prototype.$insertString = function (editor, data) {\n      var text = data.value || data;\n\n      if (data.range) {\n        if (editor.inVirtualSelectionMode) {\n          return editor.session.replace(data.range, text);\n        }\n\n        editor.forEachSelection(function () {\n          var range = editor.getSelectionRange();\n\n          if (data.range.compareRange(range) === 0) {\n            editor.session.replace(data.range, text);\n          } else {\n            editor.insert(text);\n          }\n        }, null, {\n          keepOrder: true\n        });\n      } else {\n        editor.execCommand(\"insertstring\", text);\n      }\n    };\n\n    CompletionProvider.prototype.gatherCompletions = function (editor, callback) {\n      var session = editor.getSession();\n      var pos = editor.getCursorPosition();\n      var prefix = util.getCompletionPrefix(editor);\n      var matches = [];\n      var total = editor.completers.length;\n      editor.completers.forEach(function (completer, i) {\n        completer.getCompletions(editor, session, pos, prefix, function (err, results) {\n          if (!err && results) matches = matches.concat(results);\n          callback(null, {\n            prefix: util.getCompletionPrefix(editor),\n            matches: matches,\n            finished: --total === 0\n          });\n        });\n      });\n      return true;\n    };\n\n    CompletionProvider.prototype.provideCompletions = function (editor, options, callback) {\n      var processResults = function (results) {\n        var prefix = results.prefix;\n        var matches = results.matches;\n        this.completions = new FilteredList(matches);\n        if (options.exactMatch) this.completions.exactMatch = true;\n        if (options.ignoreCaption) this.completions.ignoreCaption = true;\n        this.completions.setFilter(prefix);\n        if (results.finished || this.completions.filtered.length) callback(null, this.completions, results.finished);\n      }.bind(this);\n\n      var isImmediate = true;\n      var immediateResults = null;\n      this.gatherCompletions(editor, function (err, results) {\n        if (!this.active) {\n          return;\n        }\n\n        if (err) {\n          callback(err, [], true);\n          this.detach();\n        }\n\n        var prefix = results.prefix;\n        if (prefix.indexOf(results.prefix) !== 0) return;\n\n        if (isImmediate) {\n          immediateResults = results;\n          return;\n        }\n\n        processResults(results);\n      }.bind(this));\n      isImmediate = false;\n\n      if (immediateResults) {\n        var results = immediateResults;\n        immediateResults = null;\n        processResults(results);\n      }\n    };\n\n    CompletionProvider.prototype.detach = function () {\n      this.active = false;\n    };\n\n    return CompletionProvider;\n  }();\n\n  var FilteredList =\n  /** @class */\n  function () {\n    function FilteredList(array, filterText) {\n      this.all = array;\n      this.filtered = array;\n      this.filterText = filterText || \"\";\n      this.exactMatch = false;\n      this.ignoreCaption = false;\n    }\n\n    FilteredList.prototype.setFilter = function (str) {\n      if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0) var matches = this.filtered;else var matches = this.all;\n      this.filterText = str;\n      matches = this.filterCompletions(matches, this.filterText);\n      matches = matches.sort(function (a, b) {\n        return b.exactMatch - a.exactMatch || b.$score - a.$score || (a.caption || a.value).localeCompare(b.caption || b.value);\n      });\n      var prev = null;\n      matches = matches.filter(function (item) {\n        var caption = item.snippet || item.caption || item.value;\n        if (caption === prev) return false;\n        prev = caption;\n        return true;\n      });\n      this.filtered = matches;\n    };\n\n    FilteredList.prototype.filterCompletions = function (items, needle) {\n      var results = [];\n      var upper = needle.toUpperCase();\n      var lower = needle.toLowerCase();\n\n      loop: for (var i = 0, item; item = items[i]; i++) {\n        var caption = !this.ignoreCaption && item.caption || item.value || item.snippet;\n        if (!caption) continue;\n        var lastIndex = -1;\n        var matchMask = 0;\n        var penalty = 0;\n        var index, distance;\n\n        if (this.exactMatch) {\n          if (needle !== caption.substr(0, needle.length)) continue loop;\n        } else {\n          var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n\n          if (fullMatchIndex > -1) {\n            penalty = fullMatchIndex;\n          } else {\n            for (var j = 0; j < needle.length; j++) {\n              var i1 = caption.indexOf(lower[j], lastIndex + 1);\n              var i2 = caption.indexOf(upper[j], lastIndex + 1);\n              index = i1 >= 0 ? i2 < 0 || i1 < i2 ? i1 : i2 : i2;\n              if (index < 0) continue loop;\n              distance = index - lastIndex - 1;\n\n              if (distance > 0) {\n                if (lastIndex === -1) penalty += 10;\n                penalty += distance;\n                matchMask = matchMask | 1 << j;\n              }\n\n              lastIndex = index;\n            }\n          }\n        }\n\n        item.matchMask = matchMask;\n        item.exactMatch = penalty ? 0 : 1;\n        item.$score = (item.score || 0) - penalty;\n        results.push(item);\n      }\n\n      return results;\n    };\n\n    return FilteredList;\n  }();\n\n  exports.Autocomplete = Autocomplete;\n  exports.CompletionProvider = CompletionProvider;\n  exports.FilteredList = FilteredList;\n});\nace.define(\"ace/autocomplete/text_completer\", [\"require\", \"exports\", \"module\", \"ace/range\"], function (require, exports, module) {\n  var Range = require(\"../range\").Range;\n\n  var splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\n\n  function getWordIndex(doc, pos) {\n    var textBefore = doc.getTextRange(Range.fromPoints({\n      row: 0,\n      column: 0\n    }, pos));\n    return textBefore.split(splitRegex).length - 1;\n  }\n\n  function wordDistance(doc, pos) {\n    var prefixPos = getWordIndex(doc, pos);\n    var words = doc.getValue().split(splitRegex);\n    var wordScores = Object.create(null);\n    var currentWord = words[prefixPos];\n    words.forEach(function (word, idx) {\n      if (!word || word === currentWord) return;\n      var distance = Math.abs(prefixPos - idx);\n      var score = words.length - distance;\n\n      if (wordScores[word]) {\n        wordScores[word] = Math.max(score, wordScores[word]);\n      } else {\n        wordScores[word] = score;\n      }\n    });\n    return wordScores;\n  }\n\n  exports.getCompletions = function (editor, session, pos, prefix, callback) {\n    var wordScore = wordDistance(session, pos);\n    var wordList = Object.keys(wordScore);\n    callback(null, wordList.map(function (word) {\n      return {\n        caption: word,\n        value: word,\n        score: wordScore[word],\n        meta: \"local\"\n      };\n    }));\n  };\n});\nace.define(\"ace/ext/language_tools\", [\"require\", \"exports\", \"module\", \"ace/snippets\", \"ace/autocomplete\", \"ace/config\", \"ace/lib/lang\", \"ace/autocomplete/util\", \"ace/autocomplete/text_completer\", \"ace/editor\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var snippetManager = require(\"../snippets\").snippetManager;\n\n  var Autocomplete = require(\"../autocomplete\").Autocomplete;\n\n  var config = require(\"../config\");\n\n  var lang = require(\"../lib/lang\");\n\n  var util = require(\"../autocomplete/util\");\n\n  var textCompleter = require(\"../autocomplete/text_completer\");\n\n  var keyWordCompleter = {\n    getCompletions: function getCompletions(editor, session, pos, prefix, callback) {\n      if (session.$mode.completer) {\n        return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n      }\n\n      var state = editor.session.getState(pos.row);\n      var completions = session.$mode.getCompletions(state, session, pos, prefix);\n      completions = completions.map(function (el) {\n        el.completerId = keyWordCompleter.id;\n        return el;\n      });\n      callback(null, completions);\n    },\n    id: \"keywordCompleter\"\n  };\n\n  var transformSnippetTooltip = function transformSnippetTooltip(str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function (_, p1, p2, p3) {\n      return record[p1] = p3 || '';\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n      return record[p1];\n    });\n  };\n\n  var snippetCompleter = {\n    getCompletions: function getCompletions(editor, session, pos, prefix, callback) {\n      var scopes = [];\n      var token = session.getTokenAt(pos.row, pos.column);\n      if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/)) scopes.push('html-tag');else scopes = snippetManager.getActiveScopes(editor);\n      var snippetMap = snippetManager.snippetMap;\n      var completions = [];\n      scopes.forEach(function (scope) {\n        var snippets = snippetMap[scope] || [];\n\n        for (var i = snippets.length; i--;) {\n          var s = snippets[i];\n          var caption = s.name || s.tabTrigger;\n          if (!caption) continue;\n          completions.push({\n            caption: caption,\n            snippet: s.content,\n            meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n            completerId: snippetCompleter.id\n          });\n        }\n      }, this);\n      callback(null, completions);\n    },\n    getDocTooltip: function getDocTooltip(item) {\n      if (item.snippet && !item.docHTML) {\n        item.docHTML = [\"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\", lang.escapeHTML(transformSnippetTooltip(item.snippet))].join(\"\");\n      }\n    },\n    id: \"snippetCompleter\"\n  };\n  var completers = [snippetCompleter, textCompleter, keyWordCompleter];\n\n  exports.setCompleters = function (val) {\n    completers.length = 0;\n    if (val) completers.push.apply(completers, val);\n  };\n\n  exports.addCompleter = function (completer) {\n    completers.push(completer);\n  };\n\n  exports.textCompleter = textCompleter;\n  exports.keyWordCompleter = keyWordCompleter;\n  exports.snippetCompleter = snippetCompleter;\n  var expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function exec(editor) {\n      return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n  };\n\n  var onChangeMode = function onChangeMode(e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n  };\n\n  var loadSnippetsForMode = function loadSnippetsForMode(mode) {\n    if (typeof mode == \"string\") mode = config.$modes[mode];\n    if (!mode) return;\n    if (!snippetManager.files) snippetManager.files = {};\n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes) mode.modes.forEach(loadSnippetsForMode);\n  };\n\n  var loadSnippetFile = function loadSnippetFile(id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id]) return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function (m) {\n      if (!m) return;\n      snippetManager.files[id] = m;\n      if (!m.snippets && m.snippetText) m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippetManager.register(m.snippets || [], m.scope);\n\n      if (m.includeScopes) {\n        snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n        m.includeScopes.forEach(function (x) {\n          loadSnippetsForMode(\"ace/mode/\" + x);\n        });\n      }\n    });\n  };\n\n  var doLiveAutocomplete = function doLiveAutocomplete(e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n\n    if (e.command.name === \"backspace\") {\n      if (hasCompleter && !util.getCompletionPrefix(editor)) editor.completer.detach();\n    } else if (e.command.name === \"insertstring\") {\n      var prefix = util.getCompletionPrefix(editor);\n\n      if (prefix && !hasCompleter) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.showPopup(editor);\n      }\n    }\n  };\n\n  var Editor = require(\"../editor\").Editor;\n\n  require(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n      set: function set(val) {\n        if (val) {\n          if (!this.completers) this.completers = Array.isArray(val) ? val : completers;\n          this.commands.addCommand(Autocomplete.startCommand);\n        } else {\n          this.commands.removeCommand(Autocomplete.startCommand);\n        }\n      },\n      value: false\n    },\n    enableLiveAutocompletion: {\n      set: function set(val) {\n        if (val) {\n          if (!this.completers) this.completers = Array.isArray(val) ? val : completers;\n          this.commands.on('afterExec', doLiveAutocomplete);\n        } else {\n          this.commands.removeListener('afterExec', doLiveAutocomplete);\n        }\n      },\n      value: false\n    },\n    enableSnippets: {\n      set: function set(val) {\n        if (val) {\n          this.commands.addCommand(expandSnippet);\n          this.on(\"changeMode\", onChangeMode);\n          onChangeMode(null, this);\n        } else {\n          this.commands.removeCommand(expandSnippet);\n          this.off(\"changeMode\", onChangeMode);\n        }\n      },\n      value: false\n    }\n  });\n});\n\n(function () {\n  ace.require([\"ace/ext/language_tools\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"sources":["/home/amogha/btp/deploy/VReqST-2/VReqST-main/VReqST/frontend/client/node_modules/ace-builds/src-noconflict/ext-language_tools.js"],"names":["ace","define","require","exports","module","dom","oop","EventEmitter","lang","Range","RangeList","HashHandler","Tokenizer","clipboard","VARIABLES","CURRENT_WORD","editor","session","getTextRange","getWordRange","SELECTION","name","indentation","text","replace","CURRENT_LINE","getLine","getCursorPosition","row","PREV_LINE","LINE_INDEX","LINE_NUMBER","SOFT_TABS","getUseSoftTabs","TAB_SIZE","getTabSize","CLIPBOARD","getText","FILENAME","exec","FILEPATH","FILENAME_BASE","DIRECTORY","WORKSPACE_NAME","FULLNAME","BLOCK_COMMENT_START","mode","$mode","blockComment","start","BLOCK_COMMENT_END","end","LINE_COMMENT","lineCommentStart","CURRENT_YEAR","date","bind","year","CURRENT_YEAR_SHORT","CURRENT_MONTH","month","CURRENT_MONTH_NAME","CURRENT_MONTH_NAME_SHORT","CURRENT_DATE","day","CURRENT_DAY_NAME","weekday","CURRENT_DAY_NAME_SHORT","CURRENT_HOUR","hour","hour12","CURRENT_MINUTE","minute","CURRENT_SECOND","second","SELECTED_TEXT","dateFormat","str","Date","toLocaleString","length","SnippetManager","snippetMap","snippetNameMap","implement","getTokenizer","$tokenizer","createTokenizer","TabstopToken","substr","test","tabstopId","parseInt","escape","ch","formatMatcher","regex","onMatch","val","state","stack","ts","fmtString","guard","slice","flag","next","indexOf","shift","t","unshift","token","merge","snippetVar","choices","operator","split","map","value","formatString","expectElse","ifEnd","elseEnd","changeCase","local","formatStringVar","formatFunction","tokenizeTmSnippet","startState","getLineTokens","tokens","x","getVariableValue","variables","__","hasOwnProperty","tmStrFormat","fmt","re","RegExp","fmtTokens","_self","formatted","oldArgs","call","arguments","fmtParts","resolveVariables","gChangeCase","i","toUpperCase","toLowerCase","join","tmFormatFunction","snippet","result","afterNewLine","push","j","gotoNext","i1","processSnippetText","snippetText","options","cursor","line","tabString","getTabString","indentString","match","column","excludeExtraIndent","tabstops","forEach","p","id","index","parents","isNested","some","expanding","copyValue","copy","lastIndexOf","Object","keys","parentId","splice","apply","Math","max","concat","lines","getDisplayTextForSnippet","processedSnippet","insertSnippetForSelection","range","getSelectionRange","compareRange","tabstopManager","TabstopManager","selectionId","inVirtualSelectionMode","selection","addTabstops","insertSnippet","self","fromPoints","forEachSelection","keepOrder","tabNext","$getScope","scope","$id","pop","inlinePhp","c","getState","substring","getActiveScopes","scopes","includeScopes","expandWithTab","expandSnippetForSelection","before","after","snippets","findMatchingSnippet","dryRun","doc","removeInLine","replaceBefore","replaceAfter","M__","matchBefore","T__","matchAfter","content","snippetList","s","startRe","endRe","triggerRe","endTriggerRe","register","wrapRegexp","src","guardedRegexp","opening","addSnippet","old","unregister","prefix","tabTrigger","body","Array","isArray","trigger","escapeRegExp","endTrigger","endGuard","key","_signal","removeSnippet","nameMap","parseSnippetFile","list","m","JSON","parse","e","guardRe","getSnippetByName","prototype","$onChange","onChange","$onChangeSelection","delayedCall","onChangeSelection","schedule","$onChangeSession","onChangeSession","$onAfterExec","onAfterExec","attach","ranges","$openTabstops","selectedTabstop","on","commands","keyBinding","addKeyboardHandler","keyboardHandler","detach","removeTabstopMarkers","removeListener","removeKeyboardHandler","delta","isRemove","action","active","rangeList","$bias","parentActive","startIndex","pointIndex","endIndex","toRemove","removeRange","$inChange","getLength","getValue","updateLinkedFields","hasLinkedRanges","firstNonLinked","linked","original","snippetManager","command","readOnly","lead","anchor","isEmpty","containsLead","contains","containsAnchor","dir","min","selectTabstop","addTabstopMarkers","sel","multiSelect","toSingleRange","addRange","clone","fromOrientedRange","execCommand","matches","useLink","getOption","moveRelative","arg","dest","movePoint","tabstop","addList","markerId","addMarker","removeMarker","bindKeys","renderer","scrollCursorIntoView","point","diff","importCssString","Editor","expandSnippet","Renderer","VirtualRenderer","event","nls","getAriaId","$singleLineEditor","el","$maxLines","setHighlightActiveLine","setShowPrintMargin","setShowGutter","setHighlightGutterLine","$mouseHandler","$focusTimeout","$highlightTagPending","AcePopup","parentNode","createElement","popup","appendChild","style","display","setStyle","container","setAttribute","setOption","noop","focus","$isFocused","$cursorLayer","restartTimer","element","opacity","$keepTextAreaAtCursor","highlight","$searchHighlight","clazz","pos","getDocumentPosition","moveToPosition","selectionMarker","stop","lastMouseEvent","hoverMarker","Infinity","setSelectOnHover","y","scrollTop","setRow","setHoverMarker","$pos","getRow","$textLayer","selected","childNodes","config","firstRow","document","activeElement","selectedNode","removeCssClass","removeAttribute","addCssClass","ariaId","getData","data","hideHoverMarker","suppressRedraw","_emit","getHoveredRow","addListener","bgTokenizer","$tokenizeRow","caption","addToken","className","type","lower","filterText","lastIndex","lastI","matchMask","sub","meta","message","$updateOnChange","$computeWidth","screenWidth","isOpen","isTopdown","autoSelect","setData","setValue","stringRepeat","clearSelection","moveCursorTo","hide","anchorPos","tryShow","lineHeight","forceShow","top","left","screenHeight","window","innerHeight","innerWidth","maxH","dims","bottom","spaceBelow","$borderSize","spaceAbove","fitsX","$maxPixelHeight","offsetWidth","right","show","topdownOnly","undefined","goTo","where","getTextLeftOffset","$padding","$imageSize","AceInline","completion","displayText","startsWith","removeGhostText","setGhostText","$ghostText","destroy","parForEach","array","fn","callback","completed","arLength","err","ID_REGEX","retrievePrecedingIdentifier","buf","reverse","retrieveFollowingIdentifier","getCompletionPrefix","completers","completer","identifierRegexps","identifierRegex","util","destroyCompleter","Autocomplete","autoInsert","exactMatch","inlineEnabled","blurListener","changeListener","mousedownListener","mousewheelListener","changeTimer","updateCompletions","tooltipTimer","updateDocTooltip","$init","documentElement","insertMatch","$onPopupChange","$onHidePopup","$initInline","inlineRenderer","getPopup","hideDocTooltip","$updatePopupPosition","layerConfig","getPixelPosition","base","rect","getBoundingClientRect","offset","scrollLeft","gutterWidth","posGhostText","$ghostTextWidget","position","offsetHeight","openPopup","keepPopupPosition","completions","filtered","textInput","setAriaOptions","activeDescendant","inline","setTheme","getTheme","setFontSize","getFontSize","tooltipNode","cancel","off","completionProvider","activated","getElement","fromTooltip","relatedTarget","getCompletionProvider","showPopup","CompletionProvider","gatherCompletions","setFilter","createAnchor","$insertRight","FilteredList","getSession","completionOptions","provideCompletions","finished","cancelContextMenu","all","completersLength","getDocTooltip","completerId","docText","docHTML","showDocTooltip","item","margin","pointerEvents","tabIndex","onblur","onclick","onTooltipClick","theme","isDark","cssClass","innerHTML","textContent","offsetTop","isFocused","removeChild","a","target","nodeName","href","rel","deleteSuffix","gotoPageUp","gotoPageDown","for","get","$sharedInstance","once","startCommand","bindKey","insertByIndex","startOperation","getAllRanges","remove","$insertString","endOperation","insert","total","getCompletions","results","processResults","ignoreCaption","isImmediate","immediateResults","filterCompletions","sort","b","$score","localeCompare","prev","filter","items","needle","upper","loop","penalty","distance","fullMatchIndex","i2","score","splitRegex","getWordIndex","textBefore","wordDistance","prefixPos","words","wordScores","create","currentWord","word","idx","abs","wordScore","wordList","textCompleter","keyWordCompleter","transformSnippetTooltip","record","_","p1","p2","p3","snippetCompleter","getTokenAt","escapeHTML","setCompleters","addCompleter","onChangeMode","loadSnippetsForMode","$modes","files","loadSnippetFile","snippetFileId","modes","snippetFilePath","loadModule","doLiveAutocomplete","hasCompleter","defineOptions","enableBasicAutocompletion","set","addCommand","removeCommand","enableLiveAutocompletion","enableSnippets"],"mappings":"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","sourcesContent":["ace.define(\"ace/snippets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/lang\",\"ace/range\",\"ace/range_list\",\"ace/keyboard/hash_handler\",\"ace/tokenizer\",\"ace/clipboard\",\"ace/editor\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\nvar VARIABLES = {\n    CURRENT_WORD: function (editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function () { return \"Unknown\"; },\n    FULLNAME: function () { return \"Unknown\"; },\n    BLOCK_COMMENT_START: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, { year: \"numeric\" }),\n    CURRENT_YEAR_SHORT: date.bind(null, { year: \"2-digit\" }),\n    CURRENT_MONTH: date.bind(null, { month: \"numeric\" }),\n    CURRENT_MONTH_NAME: date.bind(null, { month: \"long\" }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, { month: \"short\" }),\n    CURRENT_DATE: date.bind(null, { day: \"2-digit\" }),\n    CURRENT_DAY_NAME: date.bind(null, { weekday: \"long\" }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, { weekday: \"short\" }),\n    CURRENT_HOUR: date.bind(null, { hour: \"2-digit\", hour12: false }),\n    CURRENT_MINUTE: date.bind(null, { minute: \"2-digit\" }),\n    CURRENT_SECOND: date.bind(null, { second: \"2-digit\" })\n};\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\nvar SnippetManager = function () {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.getTokenizer = function () {\n        return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    this.createTokenizer = function () {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{ tabstopId: parseInt(str, 10) }];\n            return [{ text: str }];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\",\n            onMatch: function (val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        SnippetManager.$tokenizer = new Tokenizer({\n            start: [\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length) {\n                            val = ch;\n                        }\n                        else if (\"`$\\\\\".indexOf(ch) != -1) {\n                            val = ch;\n                        }\n                        return [val];\n                    } },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        return [stack.length ? stack.shift() : val];\n                    } },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken },\n                { regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function (str, state, stack) {\n                        var t = TabstopToken(str.substr(1));\n                        stack.unshift(t[0]);\n                        return t;\n                    }, next: \"snippetVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false }\n            ],\n            snippetVar: [\n                { regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function (val, state, stack) {\n                        var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n                            return operator.length == 2 ? operator[1] : \"\\x00\";\n                        }).split(\"\\x00\").map(function (value) {\n                            return { value: value };\n                        });\n                        stack[0].choices = choices;\n                        return [choices[0]];\n                    }, next: \"start\" },\n                formatMatcher,\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\" }\n            ],\n            formatString: [\n                { regex: /:/, onMatch: function (val, state, stack) {\n                        if (stack.length && stack[0].expectElse) {\n                            stack[0].expectElse = false;\n                            stack[0].ifEnd = { elseEnd: stack[0] };\n                            return [stack[0].ifEnd];\n                        }\n                        return \":\";\n                    } },\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length)\n                            val = ch;\n                        else if (\"`$\\\\\".indexOf(ch) != -1)\n                            val = ch;\n                        else if (ch == \"n\")\n                            val = \"\\n\";\n                        else if (ch == \"t\")\n                            val = \"\\t\";\n                        else if (\"ulULE\".indexOf(ch) != -1)\n                            val = { changeCase: ch, local: ch > \"a\" };\n                        return [val];\n                    } },\n                { regex: \"/\\\\w*}\", onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        if (next)\n                            next.flag = val.slice(1, -1);\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: function (val, state, stack) {\n                        return [{ text: val.slice(1) }];\n                    } },\n                { regex: /\\${\\w+/, onMatch: function (val, state, stack) {\n                        var token = { text: val.slice(2) };\n                        stack.unshift(token);\n                        return [token];\n                    }, next: \"formatStringVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" }\n            ],\n            formatStringVar: [\n                { regex: /:\\/\\w+}/, onMatch: function (val, state, stack) {\n                        var ts = stack[0];\n                        ts.formatFunction = val.slice(2, -1);\n                        return [stack.shift()];\n                    }, next: \"formatString\" },\n                formatMatcher,\n                { regex: /:[\\?\\-+]?/, onMatch: function (val, state, stack) {\n                        if (val[1] == \"+\")\n                            stack[0].ifEnd = stack[0];\n                        if (val[1] == \"?\")\n                            stack[0].expectElse = true;\n                    }, next: \"formatString\" },\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\" }\n            ]\n        });\n        return SnippetManager.$tokenizer;\n    };\n    this.tokenizeTmSnippet = function (str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n            return x.value || x;\n        });\n    };\n    this.getVariableValue = function (editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    this.variables = VARIABLES;\n    this.tmStrFormat = function (str, ch, editor) {\n        if (!ch.fmt)\n            return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function () {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    }\n                    else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                }\n                else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                }\n                else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    this.tmFormatFunction = function (str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n    this.resolveVariables = function (snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)\n                continue;\n            afterNewLine = false;\n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1)\n                    j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                }\n                else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            }\n            else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            }\n            else if (ch.tabstopId != null) {\n                result.push(ch);\n            }\n            else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n    var processSnippetText = function (editor, snippetText, options) {\n        if (options === void 0) { options = {}; }\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var tabString = editor.session.getTabString();\n        var indentString = line.match(/^\\s*/)[0];\n        if (cursor.column < indentString.length)\n            indentString = indentString.slice(0, cursor.column);\n        snippetText = snippetText.replace(/\\r/g, \"\");\n        var tokens = this.tokenizeTmSnippet(snippetText);\n        tokens = this.resolveVariables(tokens, editor);\n        tokens = tokens.map(function (x) {\n            if (x == \"\\n\" && !options.excludeExtraIndent)\n                return x + indentString;\n            if (typeof x == \"string\")\n                return x.replace(/\\t/g, tabString);\n            return x;\n        });\n        var tabstops = [];\n        tokens.forEach(function (p, i) {\n            if (typeof p != \"object\")\n                return;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            if (!ts) {\n                ts = tabstops[id] = [];\n                ts.index = id;\n                ts.value = \"\";\n                ts.parents = {};\n            }\n            if (ts.indexOf(p) !== -1)\n                return;\n            if (p.choices && !ts.choices)\n                ts.choices = p.choices;\n            ts.push(p);\n            var i1 = tokens.indexOf(p, i + 1);\n            if (i1 === -1)\n                return;\n            var value = tokens.slice(i + 1, i1);\n            var isNested = value.some(function (t) { return typeof t === \"object\"; });\n            if (isNested && !ts.value) {\n                ts.value = value;\n            }\n            else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n                ts.value = value.join(\"\");\n            }\n        });\n        tabstops.forEach(function (ts) { ts.length = 0; });\n        var expanding = {};\n        function copyValue(val) {\n            var copy = [];\n            for (var i = 0; i < val.length; i++) {\n                var p = val[i];\n                if (typeof p == \"object\") {\n                    if (expanding[p.tabstopId])\n                        continue;\n                    var j = val.lastIndexOf(p, i - 1);\n                    p = copy[j] || { tabstopId: p.tabstopId };\n                }\n                copy[i] = p;\n            }\n            return copy;\n        }\n        for (var i = 0; i < tokens.length; i++) {\n            var p = tokens[i];\n            if (typeof p != \"object\")\n                continue;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            var i1 = tokens.indexOf(p, i + 1);\n            if (expanding[id]) {\n                if (expanding[id] === p) {\n                    delete expanding[id];\n                    Object.keys(expanding).forEach(function (parentId) {\n                        ts.parents[parentId] = true;\n                    });\n                }\n                continue;\n            }\n            expanding[id] = p;\n            var value = ts.value;\n            if (typeof value !== \"string\")\n                value = copyValue(value);\n            else if (p.fmt)\n                value = this.tmStrFormat(value, p, editor);\n            tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n            if (ts.indexOf(p) === -1)\n                ts.push(p);\n        }\n        var row = 0, column = 0;\n        var text = \"\";\n        tokens.forEach(function (t) {\n            if (typeof t === \"string\") {\n                var lines = t.split(\"\\n\");\n                if (lines.length > 1) {\n                    column = lines[lines.length - 1].length;\n                    row += lines.length - 1;\n                }\n                else\n                    column += t.length;\n                text += t;\n            }\n            else if (t) {\n                if (!t.start)\n                    t.start = { row: row, column: column };\n                else\n                    t.end = { row: row, column: column };\n            }\n        });\n        return {\n            text: text,\n            tabstops: tabstops,\n            tokens: tokens\n        };\n    };\n    this.getDisplayTextForSnippet = function (editor, snippetText) {\n        var processedSnippet = processSnippetText.call(this, editor, snippetText);\n        return processedSnippet.text;\n    };\n    this.insertSnippetForSelection = function (editor, snippetText, options) {\n        if (options === void 0) { options = {}; }\n        var processedSnippet = processSnippetText.call(this, editor, snippetText, options);\n        var range = editor.getSelectionRange();\n        if (options.range && options.range.compareRange(range) === 0) {\n            range = options.range;\n        }\n        var end = editor.session.replace(range, processedSnippet.text);\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(processedSnippet.tabstops, range.start, end, selectionId);\n    };\n    this.insertSnippet = function (editor, snippetText, options) {\n        if (options === void 0) { options = {}; }\n        var self = this;\n        if (options.range && !(options.range instanceof Range))\n            options.range = Range.fromPoints(options.range.start, options.range.end);\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText, options);\n        editor.forEachSelection(function () {\n            self.insertSnippetForSelection(editor, snippetText, options);\n        }, null, { keepOrder: true });\n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n    this.$getScope = function (editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp)\n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        return scope;\n    };\n    this.getActiveScopes = function (editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n    this.expandWithTab = function (editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function () {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, { keepOrder: true });\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    this.expandSnippetForSelection = function (editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n    this.findMatchingSnippet = function (snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        if (!snippets)\n            snippets = [];\n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            }\n            else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        }\n        else {\n            Object.keys(snippets).forEach(function (key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        this._signal(\"registerSnippets\", { scope: scope });\n    };\n    this.unregister = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope || scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope || scope];\n                var i = map && map.indexOf(s);\n                if (i >= 0)\n                    map.splice(i, 1);\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function (str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                }\n                catch (e) { }\n            }\n            if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            }\n            else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                }\n                else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                }\n                else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    this.getSnippetByName = function (name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n}).call(SnippetManager.prototype);\nvar TabstopManager = function (editor) {\n    if (editor.tabstopManager)\n        return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n};\n(function () {\n    this.attach = function (editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n        this.editor = editor;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function () {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges = null;\n        this.tabstops = null;\n        this.selectedTabstop = null;\n        this.editor.removeListener(\"change\", this.$onChange);\n        this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n        this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.editor = null;\n    };\n    this.onChange = function (delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = (this.tabstops || []).slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.editor.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    this.updateLinkedFields = function () {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.editor.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    this.onAfterExec = function (e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    this.onChangeSelection = function () {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    this.onChangeSession = function () {\n        this.detach();\n    };\n    this.tabNext = function (dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        if (index === 0)\n            this.detach();\n    };\n    this.selectTabstop = function (index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices)\n            range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        }\n        else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", { matches: this.selectedTabstop.choices });\n    };\n    this.addTabstops = function (tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        tabstops.forEach(function (ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                }\n                else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        if (arg.length > 2) {\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n    this.addTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            if (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    this.removeTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    this.removeRange = function (range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1)\n            this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        this.editor.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n        \"Tab\": function (editor) {\n            if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n                return;\n            editor.tabstopManager.tabNext(1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Shift-Tab\": function (editor) {\n            editor.tabstopManager.tabNext(-1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Esc\": function (editor) {\n            editor.tabstopManager.detach();\n        }\n    });\n}).call(TabstopManager.prototype);\nvar movePoint = function (point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\nvar moveRelative = function (point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\ndom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\nexports.snippetManager = new SnippetManager();\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.insertSnippet = function (content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n\n});\n\nace.define(\"ace/autocomplete/popup\",[\"require\",\"exports\",\"module\",\"ace/virtual_renderer\",\"ace/editor\",\"ace/range\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar Renderer = require(\"../virtual_renderer\").VirtualRenderer;\nvar Editor = require(\"../editor\").Editor;\nvar Range = require(\"../range\").Range;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\nvar nls = require(\"../config\").nls;\nvar getAriaId = function (index) {\n    return \"suggest-aria-id:\".concat(index);\n};\nvar $singleLineEditor = function (el) {\n    var renderer = new Renderer(el);\n    renderer.$maxLines = 4;\n    var editor = new Editor(renderer);\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n    return editor;\n};\nvar AcePopup = /** @class */ (function () {\n    function AcePopup(parentNode) {\n        var el = dom.createElement(\"div\");\n        var popup = new $singleLineEditor(el);\n        if (parentNode)\n            parentNode.appendChild(el);\n        el.style.display = \"none\";\n        popup.renderer.content.style.cursor = \"default\";\n        popup.renderer.setStyle(\"ace_autocomplete\");\n        popup.renderer.container.setAttribute(\"role\", \"listbox\");\n        popup.renderer.container.setAttribute(\"aria-label\", nls(\"Autocomplete suggestions\"));\n        popup.setOption(\"displayIndentGuides\", false);\n        popup.setOption(\"dragDelay\", 150);\n        var noop = function () { };\n        popup.focus = noop;\n        popup.$isFocused = true;\n        popup.renderer.$cursorLayer.restartTimer = noop;\n        popup.renderer.$cursorLayer.element.style.opacity = 0;\n        popup.renderer.$maxLines = 8;\n        popup.renderer.$keepTextAreaAtCursor = false;\n        popup.setHighlightActiveLine(false);\n        popup.session.highlight(\"\");\n        popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n        popup.on(\"mousedown\", function (e) {\n            var pos = e.getDocumentPosition();\n            popup.selection.moveToPosition(pos);\n            selectionMarker.start.row = selectionMarker.end.row = pos.row;\n            e.stop();\n        });\n        var lastMouseEvent;\n        var hoverMarker = new Range(-1, 0, -1, Infinity);\n        var selectionMarker = new Range(-1, 0, -1, Infinity);\n        selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n        popup.setSelectOnHover = function (val) {\n            if (!val) {\n                hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n            }\n            else if (hoverMarker.id) {\n                popup.session.removeMarker(hoverMarker.id);\n                hoverMarker.id = null;\n            }\n        };\n        popup.setSelectOnHover(false);\n        popup.on(\"mousemove\", function (e) {\n            if (!lastMouseEvent) {\n                lastMouseEvent = e;\n                return;\n            }\n            if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n                return;\n            }\n            lastMouseEvent = e;\n            lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n            var row = lastMouseEvent.getDocumentPosition().row;\n            if (hoverMarker.start.row != row) {\n                if (!hoverMarker.id)\n                    popup.setRow(row);\n                setHoverMarker(row);\n            }\n        });\n        popup.renderer.on(\"beforeRender\", function () {\n            if (lastMouseEvent && hoverMarker.start.row != -1) {\n                lastMouseEvent.$pos = null;\n                var row = lastMouseEvent.getDocumentPosition().row;\n                if (!hoverMarker.id)\n                    popup.setRow(row);\n                setHoverMarker(row, true);\n            }\n        });\n        popup.renderer.on(\"afterRender\", function () {\n            var row = popup.getRow();\n            var t = popup.renderer.$textLayer;\n            var selected = t.element.childNodes[row - t.config.firstRow];\n            var el = document.activeElement; // Active element is textarea of main editor\n            if (selected !== t.selectedNode && t.selectedNode) {\n                dom.removeCssClass(t.selectedNode, \"ace_selected\");\n                el.removeAttribute(\"aria-activedescendant\");\n                t.selectedNode.removeAttribute(\"id\");\n            }\n            t.selectedNode = selected;\n            if (selected) {\n                dom.addCssClass(selected, \"ace_selected\");\n                var ariaId = getAriaId(row);\n                selected.id = ariaId;\n                popup.renderer.container.setAttribute(\"aria-activedescendant\", ariaId);\n                el.setAttribute(\"aria-activedescendant\", ariaId);\n                selected.setAttribute(\"role\", \"option\");\n                selected.setAttribute(\"aria-label\", popup.getData(row).value);\n                selected.setAttribute(\"aria-setsize\", popup.data.length);\n                selected.setAttribute(\"aria-posinset\", row);\n            }\n        });\n        var hideHoverMarker = function () { setHoverMarker(-1); };\n        var setHoverMarker = function (row, suppressRedraw) {\n            if (row !== hoverMarker.start.row) {\n                hoverMarker.start.row = hoverMarker.end.row = row;\n                if (!suppressRedraw)\n                    popup.session._emit(\"changeBackMarker\");\n                popup._emit(\"changeHoverMarker\");\n            }\n        };\n        popup.getHoveredRow = function () {\n            return hoverMarker.start.row;\n        };\n        event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n        popup.on(\"hide\", hideHoverMarker);\n        popup.on(\"changeSelection\", hideHoverMarker);\n        popup.session.doc.getLength = function () {\n            return popup.data.length;\n        };\n        popup.session.doc.getLine = function (i) {\n            var data = popup.data[i];\n            if (typeof data == \"string\")\n                return data;\n            return (data && data.value) || \"\";\n        };\n        var bgTokenizer = popup.session.bgTokenizer;\n        bgTokenizer.$tokenizeRow = function (row) {\n            var data = popup.data[row];\n            var tokens = [];\n            if (!data)\n                return tokens;\n            if (typeof data == \"string\")\n                data = { value: data };\n            var caption = data.caption || data.value || data.name;\n            function addToken(value, className) {\n                value && tokens.push({\n                    type: (data.className || \"\") + (className || \"\"),\n                    value: value\n                });\n            }\n            var lower = caption.toLowerCase();\n            var filterText = (popup.filterText || \"\").toLowerCase();\n            var lastIndex = 0;\n            var lastI = 0;\n            for (var i = 0; i <= filterText.length; i++) {\n                if (i != lastI && (data.matchMask & (1 << i) || i == filterText.length)) {\n                    var sub = filterText.slice(lastI, i);\n                    lastI = i;\n                    var index = lower.indexOf(sub, lastIndex);\n                    if (index == -1)\n                        continue;\n                    addToken(caption.slice(lastIndex, index), \"\");\n                    lastIndex = index + sub.length;\n                    addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n                }\n            }\n            addToken(caption.slice(lastIndex, caption.length), \"\");\n            if (data.meta)\n                tokens.push({ type: \"completion-meta\", value: data.meta });\n            if (data.message)\n                tokens.push({ type: \"completion-message\", value: data.message });\n            return tokens;\n        };\n        bgTokenizer.$updateOnChange = noop;\n        bgTokenizer.start = noop;\n        popup.session.$computeWidth = function () {\n            return this.screenWidth = 0;\n        };\n        popup.isOpen = false;\n        popup.isTopdown = false;\n        popup.autoSelect = true;\n        popup.filterText = \"\";\n        popup.data = [];\n        popup.setData = function (list, filterText) {\n            popup.filterText = filterText || \"\";\n            popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n            popup.data = list || [];\n            popup.setRow(0);\n        };\n        popup.getData = function (row) {\n            return popup.data[row];\n        };\n        popup.getRow = function () {\n            return selectionMarker.start.row;\n        };\n        popup.setRow = function (line) {\n            line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n            if (selectionMarker.start.row != line) {\n                popup.selection.clearSelection();\n                selectionMarker.start.row = selectionMarker.end.row = line || 0;\n                popup.session._emit(\"changeBackMarker\");\n                popup.moveCursorTo(line || 0, 0);\n                if (popup.isOpen)\n                    popup._signal(\"select\");\n            }\n        };\n        popup.on(\"changeSelection\", function () {\n            if (popup.isOpen)\n                popup.setRow(popup.selection.lead.row);\n            popup.renderer.scrollCursorIntoView();\n        });\n        popup.hide = function () {\n            this.container.style.display = \"none\";\n            popup.anchorPos = null;\n            popup.anchor = null;\n            if (popup.isOpen) {\n                popup.isOpen = false;\n                this._signal(\"hide\");\n            }\n        };\n        popup.tryShow = function (pos, lineHeight, anchor, forceShow) {\n            if (!forceShow && popup.isOpen && popup.anchorPos && popup.anchor &&\n                popup.anchorPos.top === pos.top && popup.anchorPos.left === pos.left &&\n                popup.anchor === anchor) {\n                return true;\n            }\n            var el = this.container;\n            var screenHeight = window.innerHeight;\n            var screenWidth = window.innerWidth;\n            var renderer = this.renderer;\n            var maxH = renderer.$maxLines * lineHeight * 1.4;\n            var dims = { top: 0, bottom: 0, left: 0 };\n            var spaceBelow = screenHeight - pos.top - 3 * this.$borderSize - lineHeight;\n            var spaceAbove = pos.top - 3 * this.$borderSize;\n            if (!anchor) {\n                if (spaceAbove <= spaceBelow || spaceBelow >= maxH) {\n                    anchor = \"bottom\";\n                }\n                else {\n                    anchor = \"top\";\n                }\n            }\n            if (anchor === \"top\") {\n                dims.bottom = pos.top - this.$borderSize;\n                dims.top = dims.bottom - maxH;\n            }\n            else if (anchor === \"bottom\") {\n                dims.top = pos.top + lineHeight + this.$borderSize;\n                dims.bottom = dims.top + maxH;\n            }\n            var fitsX = dims.top >= 0 && dims.bottom <= screenHeight;\n            if (!forceShow && !fitsX) {\n                return false;\n            }\n            if (!fitsX) {\n                if (anchor === \"top\") {\n                    renderer.$maxPixelHeight = spaceAbove;\n                }\n                else {\n                    renderer.$maxPixelHeight = spaceBelow;\n                }\n            }\n            else {\n                renderer.$maxPixelHeight = null;\n            }\n            if (anchor === \"top\") {\n                el.style.top = \"\";\n                el.style.bottom = (screenHeight - dims.bottom) + \"px\";\n                popup.isTopdown = false;\n            }\n            else {\n                el.style.top = dims.top + \"px\";\n                el.style.bottom = \"\";\n                popup.isTopdown = true;\n            }\n            el.style.display = \"\";\n            var left = pos.left;\n            if (left + el.offsetWidth > screenWidth)\n                left = screenWidth - el.offsetWidth;\n            el.style.left = left + \"px\";\n            el.style.right = \"\";\n            if (!popup.isOpen) {\n                popup.isOpen = true;\n                this._signal(\"show\");\n                lastMouseEvent = null;\n            }\n            popup.anchorPos = pos;\n            popup.anchor = anchor;\n            return true;\n        };\n        popup.show = function (pos, lineHeight, topdownOnly) {\n            this.tryShow(pos, lineHeight, topdownOnly ? \"bottom\" : undefined, true);\n        };\n        popup.goTo = function (where) {\n            var row = this.getRow();\n            var max = this.session.getLength() - 1;\n            switch (where) {\n                case \"up\":\n                    row = row <= 0 ? max : row - 1;\n                    break;\n                case \"down\":\n                    row = row >= max ? -1 : row + 1;\n                    break;\n                case \"start\":\n                    row = 0;\n                    break;\n                case \"end\":\n                    row = max;\n                    break;\n            }\n            this.setRow(row);\n        };\n        popup.getTextLeftOffset = function () {\n            return this.$borderSize + this.renderer.$padding + this.$imageSize;\n        };\n        popup.$imageSize = 0;\n        popup.$borderSize = 1;\n        return popup;\n    }\n    return AcePopup;\n}());\ndom.importCssString(\"\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #CAD6FA;\\n    z-index: 1;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #3a674e;\\n}\\n.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid #abbffe;\\n    margin-top: -1px;\\n    background: rgba(233,233,253,0.4);\\n    position: absolute;\\n    z-index: 2;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\n    background: rgba(58, 103, 78, 0.62);\\n}\\n.ace_completion-meta {\\n    opacity: 0.5;\\n    margin: 0 0.9em;\\n}\\n.ace_completion-message {\\n    color: blue;\\n}\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #2d69c7;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #93ca12;\\n}\\n.ace_editor.ace_autocomplete {\\n    width: 300px;\\n    z-index: 200000;\\n    border: 1px lightgray solid;\\n    position: fixed;\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n    line-height: 1.4;\\n    background: #fefefe;\\n    color: #111;\\n}\\n.ace_dark.ace_editor.ace_autocomplete {\\n    border: 1px #484747 solid;\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\n    line-height: 1.4;\\n    background: #25282c;\\n    color: #c1c1c1;\\n}\\n.ace_autocomplete_right .ace_text-layer  {\\n    width: calc(100% - 8px);\\n}\\n.ace_autocomplete_right .ace_line {\\n    display: flex;\\n}\\n.ace_autocomplete_right .ace_completion-meta {\\n    flex: 1;\\n    text-align: right;\\n}\\n\", \"autocompletion.css\", false);\nexports.AcePopup = AcePopup;\nexports.$singleLineEditor = $singleLineEditor;\nexports.getAriaId = getAriaId;\n\n});\n\nace.define(\"ace/autocomplete/inline\",[\"require\",\"exports\",\"module\",\"ace/snippets\"], function(require, exports, module){\"use strict\";\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar AceInline = /** @class */ (function () {\n    function AceInline() {\n        this.editor = null;\n    }\n    AceInline.prototype.show = function (editor, completion, prefix) {\n        prefix = prefix || \"\";\n        if (editor && this.editor && this.editor !== editor) {\n            this.hide();\n            this.editor = null;\n        }\n        if (!editor || !completion) {\n            return false;\n        }\n        var displayText = completion.snippet ? snippetManager.getDisplayTextForSnippet(editor, completion.snippet) : completion.value;\n        if (!displayText || !displayText.startsWith(prefix)) {\n            return false;\n        }\n        this.editor = editor;\n        displayText = displayText.slice(prefix.length);\n        if (displayText === \"\") {\n            editor.removeGhostText();\n        }\n        else {\n            editor.setGhostText(displayText);\n        }\n        return true;\n    };\n    AceInline.prototype.isOpen = function () {\n        if (!this.editor) {\n            return false;\n        }\n        return !!this.editor.renderer.$ghostText;\n    };\n    AceInline.prototype.hide = function () {\n        if (!this.editor) {\n            return false;\n        }\n        this.editor.removeGhostText();\n        return true;\n    };\n    AceInline.prototype.destroy = function () {\n        this.hide();\n        this.editor = null;\n    };\n    return AceInline;\n}());\nexports.AceInline = AceInline;\n\n});\n\nace.define(\"ace/autocomplete/util\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.parForEach = function (array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0)\n        callback();\n    for (var i = 0; i < arLength; i++) {\n        fn(array[i], function (result, err) {\n            completed++;\n            if (completed === arLength)\n                callback(result, err);\n        });\n    }\n};\nvar ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\nexports.retrievePrecedingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos - 1; i >= 0; i--) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf.reverse().join(\"\");\n};\nexports.retrieveFollowingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf;\n};\nexports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function (completer) {\n        if (completer.identifierRegexps) {\n            completer.identifierRegexps.forEach(function (identifierRegex) {\n                if (!prefix && identifierRegex)\n                    prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n            }.bind(this));\n        }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n};\n\n});\n\nace.define(\"ace/autocomplete\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\",\"ace/autocomplete/popup\",\"ace/autocomplete/inline\",\"ace/autocomplete/popup\",\"ace/autocomplete/util\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/snippets\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar AcePopup = require(\"./autocomplete/popup\").AcePopup;\nvar AceInline = require(\"./autocomplete/inline\").AceInline;\nvar getAriaId = require(\"./autocomplete/popup\").getAriaId;\nvar util = require(\"./autocomplete/util\");\nvar lang = require(\"./lib/lang\");\nvar dom = require(\"./lib/dom\");\nvar snippetManager = require(\"./snippets\").snippetManager;\nvar config = require(\"./config\");\nvar destroyCompleter = function (e, editor) {\n    editor.completer && editor.completer.destroy();\n};\nvar Autocomplete = /** @class */ (function () {\n    function Autocomplete() {\n        this.autoInsert = false;\n        this.autoSelect = true;\n        this.exactMatch = false;\n        this.inlineEnabled = false;\n        this.keyboardHandler = new HashHandler();\n        this.keyboardHandler.bindKeys(this.commands);\n        this.blurListener = this.blurListener.bind(this);\n        this.changeListener = this.changeListener.bind(this);\n        this.mousedownListener = this.mousedownListener.bind(this);\n        this.mousewheelListener = this.mousewheelListener.bind(this);\n        this.changeTimer = lang.delayedCall(function () {\n            this.updateCompletions(true);\n        }.bind(this));\n        this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n    }\n    Autocomplete.prototype.$init = function () {\n        this.popup = new AcePopup(document.body || document.documentElement);\n        this.popup.on(\"click\", function (e) {\n            this.insertMatch();\n            e.stop();\n        }.bind(this));\n        this.popup.focus = this.editor.focus.bind(this.editor);\n        this.popup.on(\"show\", this.$onPopupChange.bind(this));\n        this.popup.on(\"hide\", this.$onHidePopup.bind(this));\n        this.popup.on(\"select\", this.$onPopupChange.bind(this));\n        this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n        return this.popup;\n    };\n    Autocomplete.prototype.$initInline = function () {\n        if (!this.inlineEnabled || this.inlineRenderer)\n            return;\n        this.inlineRenderer = new AceInline();\n        return this.inlineRenderer;\n    };\n    Autocomplete.prototype.getPopup = function () {\n        return this.popup || this.$init();\n    };\n    Autocomplete.prototype.$onHidePopup = function () {\n        if (this.inlineRenderer) {\n            this.inlineRenderer.hide();\n        }\n        this.hideDocTooltip();\n    };\n    Autocomplete.prototype.$onPopupChange = function (hide) {\n        if (this.inlineRenderer && this.inlineEnabled) {\n            var completion = hide ? null : this.popup.getData(this.popup.getRow());\n            var prefix = util.getCompletionPrefix(this.editor);\n            if (!this.inlineRenderer.show(this.editor, completion, prefix)) {\n                this.inlineRenderer.hide();\n            }\n            this.$updatePopupPosition();\n        }\n        this.tooltipTimer.call(null, null);\n    };\n    Autocomplete.prototype.$updatePopupPosition = function () {\n        var editor = this.editor;\n        var renderer = editor.renderer;\n        var lineHeight = renderer.layerConfig.lineHeight;\n        var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n        pos.left -= this.popup.getTextLeftOffset();\n        var rect = editor.container.getBoundingClientRect();\n        pos.top += rect.top - renderer.layerConfig.offset;\n        pos.left += rect.left - editor.renderer.scrollLeft;\n        pos.left += renderer.gutterWidth;\n        var posGhostText = {\n            top: pos.top,\n            left: pos.left\n        };\n        if (renderer.$ghostText && renderer.$ghostTextWidget) {\n            if (this.base.row === renderer.$ghostText.position.row) {\n                posGhostText.top += renderer.$ghostTextWidget.el.offsetHeight;\n            }\n        }\n        if (this.popup.tryShow(posGhostText, lineHeight, \"bottom\")) {\n            return;\n        }\n        if (this.popup.tryShow(pos, lineHeight, \"top\")) {\n            return;\n        }\n        this.popup.show(pos, lineHeight);\n    };\n    Autocomplete.prototype.openPopup = function (editor, prefix, keepPopupPosition) {\n        if (!this.popup)\n            this.$init();\n        if (this.inlineEnabled && !this.inlineRenderer)\n            this.$initInline();\n        this.popup.autoSelect = this.autoSelect;\n        this.popup.setData(this.completions.filtered, this.completions.filterText);\n        if (this.editor.textInput.setAriaOptions) {\n            this.editor.textInput.setAriaOptions({\n                activeDescendant: getAriaId(this.popup.getRow()),\n                inline: this.inlineEnabled\n            });\n        }\n        editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        this.popup.setRow(this.autoSelect ? 0 : -1);\n        if (!keepPopupPosition) {\n            this.popup.setTheme(editor.getTheme());\n            this.popup.setFontSize(editor.getFontSize());\n            this.$updatePopupPosition();\n            if (this.tooltipNode) {\n                this.updateDocTooltip();\n            }\n        }\n        else if (keepPopupPosition && !prefix) {\n            this.detach();\n        }\n        this.changeTimer.cancel();\n    };\n    Autocomplete.prototype.detach = function () {\n        if (this.editor) {\n            this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n            this.editor.off(\"changeSelection\", this.changeListener);\n            this.editor.off(\"blur\", this.blurListener);\n            this.editor.off(\"mousedown\", this.mousedownListener);\n            this.editor.off(\"mousewheel\", this.mousewheelListener);\n        }\n        this.changeTimer.cancel();\n        this.hideDocTooltip();\n        if (this.completionProvider) {\n            this.completionProvider.detach();\n        }\n        if (this.popup && this.popup.isOpen)\n            this.popup.hide();\n        if (this.base)\n            this.base.detach();\n        this.activated = false;\n        this.completionProvider = this.completions = this.base = null;\n    };\n    Autocomplete.prototype.changeListener = function (e) {\n        var cursor = this.editor.selection.lead;\n        if (cursor.row != this.base.row || cursor.column < this.base.column) {\n            this.detach();\n        }\n        if (this.activated)\n            this.changeTimer.schedule();\n        else\n            this.detach();\n    };\n    Autocomplete.prototype.blurListener = function (e) {\n        var el = document.activeElement;\n        var text = this.editor.textInput.getElement();\n        var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n        var container = this.popup && this.popup.container;\n        if (el != text && el.parentNode != container && !fromTooltip\n            && el != this.tooltipNode && e.relatedTarget != text) {\n            this.detach();\n        }\n    };\n    Autocomplete.prototype.mousedownListener = function (e) {\n        this.detach();\n    };\n    Autocomplete.prototype.mousewheelListener = function (e) {\n        this.detach();\n    };\n    Autocomplete.prototype.goTo = function (where) {\n        this.popup.goTo(where);\n    };\n    Autocomplete.prototype.insertMatch = function (data, options) {\n        if (!data)\n            data = this.popup.getData(this.popup.getRow());\n        if (!data)\n            return false;\n        var completions = this.completions;\n        var result = this.getCompletionProvider().insertMatch(this.editor, data, completions.filterText, options);\n        if (this.completions == completions)\n            this.detach();\n        return result;\n    };\n    Autocomplete.prototype.showPopup = function (editor, options) {\n        if (this.editor)\n            this.detach();\n        this.activated = true;\n        this.editor = editor;\n        if (editor.completer != this) {\n            if (editor.completer)\n                editor.completer.detach();\n            editor.completer = this;\n        }\n        editor.on(\"changeSelection\", this.changeListener);\n        editor.on(\"blur\", this.blurListener);\n        editor.on(\"mousedown\", this.mousedownListener);\n        editor.on(\"mousewheel\", this.mousewheelListener);\n        this.updateCompletions(false, options);\n    };\n    Autocomplete.prototype.getCompletionProvider = function () {\n        if (!this.completionProvider)\n            this.completionProvider = new CompletionProvider();\n        return this.completionProvider;\n    };\n    Autocomplete.prototype.gatherCompletions = function (editor, callback) {\n        return this.getCompletionProvider().gatherCompletions(editor, callback);\n    };\n    Autocomplete.prototype.updateCompletions = function (keepPopupPosition, options) {\n        if (keepPopupPosition && this.base && this.completions) {\n            var pos = this.editor.getCursorPosition();\n            var prefix = this.editor.session.getTextRange({ start: this.base, end: pos });\n            if (prefix == this.completions.filterText)\n                return;\n            this.completions.setFilter(prefix);\n            if (!this.completions.filtered.length)\n                return this.detach();\n            if (this.completions.filtered.length == 1\n                && this.completions.filtered[0].value == prefix\n                && !this.completions.filtered[0].snippet)\n                return this.detach();\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            return;\n        }\n        if (options && options.matches) {\n            var pos = this.editor.getSelectionRange().start;\n            this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n            this.base.$insertRight = true;\n            this.completions = new FilteredList(options.matches);\n            return this.openPopup(this.editor, \"\", keepPopupPosition);\n        }\n        var session = this.editor.getSession();\n        var pos = this.editor.getCursorPosition();\n        var prefix = util.getCompletionPrefix(this.editor);\n        this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n        this.base.$insertRight = true;\n        var completionOptions = { exactMatch: this.exactMatch };\n        this.getCompletionProvider().provideCompletions(this.editor, completionOptions, function (err, completions, finished) {\n            var filtered = completions.filtered;\n            var prefix = util.getCompletionPrefix(this.editor);\n            if (finished) {\n                if (!filtered.length)\n                    return this.detach();\n                if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet)\n                    return this.detach();\n                if (this.autoInsert && filtered.length == 1)\n                    return this.insertMatch(filtered[0]);\n            }\n            this.completions = completions;\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n        }.bind(this));\n    };\n    Autocomplete.prototype.cancelContextMenu = function () {\n        this.editor.$mouseHandler.cancelContextMenu();\n    };\n    Autocomplete.prototype.updateDocTooltip = function () {\n        var popup = this.popup;\n        var all = popup.data;\n        var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n        var doc = null;\n        if (!selected || !this.editor || !this.popup.isOpen)\n            return this.hideDocTooltip();\n        var completersLength = this.editor.completers.length;\n        for (var i = 0; i < completersLength; i++) {\n            var completer = this.editor.completers[i];\n            if (completer.getDocTooltip && selected.completerId === completer.id) {\n                doc = completer.getDocTooltip(selected);\n                break;\n            }\n        }\n        if (!doc && typeof selected != \"string\")\n            doc = selected;\n        if (typeof doc == \"string\")\n            doc = { docText: doc };\n        if (!doc || !(doc.docHTML || doc.docText))\n            return this.hideDocTooltip();\n        this.showDocTooltip(doc);\n    };\n    Autocomplete.prototype.showDocTooltip = function (item) {\n        if (!this.tooltipNode) {\n            this.tooltipNode = dom.createElement(\"div\");\n            this.tooltipNode.style.margin = 0;\n            this.tooltipNode.style.pointerEvents = \"auto\";\n            this.tooltipNode.tabIndex = -1;\n            this.tooltipNode.onblur = this.blurListener.bind(this);\n            this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n        }\n        var theme = this.editor.renderer.theme;\n        this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip \" +\n            (theme.isDark ? \"ace_dark \" : \"\") + (theme.cssClass || \"\");\n        var tooltipNode = this.tooltipNode;\n        if (item.docHTML) {\n            tooltipNode.innerHTML = item.docHTML;\n        }\n        else if (item.docText) {\n            tooltipNode.textContent = item.docText;\n        }\n        if (!tooltipNode.parentNode)\n            document.body.appendChild(tooltipNode);\n        var popup = this.popup;\n        var rect = popup.container.getBoundingClientRect();\n        tooltipNode.style.top = popup.container.style.top;\n        tooltipNode.style.bottom = popup.container.style.bottom;\n        tooltipNode.style.display = \"block\";\n        if (window.innerWidth - rect.right < 320) {\n            if (rect.left < 320) {\n                if (popup.isTopdown) {\n                    tooltipNode.style.top = rect.bottom + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n                else {\n                    tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n            }\n            else {\n                tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n                tooltipNode.style.left = \"\";\n            }\n        }\n        else {\n            tooltipNode.style.left = (rect.right + 1) + \"px\";\n            tooltipNode.style.right = \"\";\n        }\n    };\n    Autocomplete.prototype.hideDocTooltip = function () {\n        this.tooltipTimer.cancel();\n        if (!this.tooltipNode)\n            return;\n        var el = this.tooltipNode;\n        if (!this.editor.isFocused() && document.activeElement == el)\n            this.editor.focus();\n        this.tooltipNode = null;\n        if (el.parentNode)\n            el.parentNode.removeChild(el);\n    };\n    Autocomplete.prototype.onTooltipClick = function (e) {\n        var a = e.target;\n        while (a && a != this.tooltipNode) {\n            if (a.nodeName == \"A\" && a.href) {\n                a.rel = \"noreferrer\";\n                a.target = \"_blank\";\n                break;\n            }\n            a = a.parentNode;\n        }\n    };\n    Autocomplete.prototype.destroy = function () {\n        this.detach();\n        if (this.popup) {\n            this.popup.destroy();\n            var el = this.popup.container;\n            if (el && el.parentNode)\n                el.parentNode.removeChild(el);\n        }\n        if (this.editor && this.editor.completer == this) {\n            this.editor.off(\"destroy\", destroyCompleter);\n            this.editor.completer = null;\n        }\n        this.inlineRenderer = this.popup = this.editor = null;\n    };\n    return Autocomplete;\n}());\nAutocomplete.prototype.commands = {\n    \"Up\": function (editor) { editor.completer.goTo(\"up\"); },\n    \"Down\": function (editor) { editor.completer.goTo(\"down\"); },\n    \"Ctrl-Up|Ctrl-Home\": function (editor) { editor.completer.goTo(\"start\"); },\n    \"Ctrl-Down|Ctrl-End\": function (editor) { editor.completer.goTo(\"end\"); },\n    \"Esc\": function (editor) { editor.completer.detach(); },\n    \"Return\": function (editor) { return editor.completer.insertMatch(); },\n    \"Shift-Return\": function (editor) { editor.completer.insertMatch(null, { deleteSuffix: true }); },\n    \"Tab\": function (editor) {\n        var result = editor.completer.insertMatch();\n        if (!result && !editor.tabstopManager)\n            editor.completer.goTo(\"down\");\n        else\n            return result;\n    },\n    \"PageUp\": function (editor) { editor.completer.popup.gotoPageUp(); },\n    \"PageDown\": function (editor) { editor.completer.popup.gotoPageDown(); }\n};\nAutocomplete.for = function (editor) {\n    if (editor.completer instanceof Autocomplete) {\n        return editor.completer;\n    }\n    if (editor.completer) {\n        editor.completer.destroy();\n        editor.completer = null;\n    }\n    if (config.get(\"sharedPopups\")) {\n        if (!Autocomplete.$sharedInstance)\n            Autocomplete.$sharedInstance = new Autocomplete();\n        editor.completer = Autocomplete.$sharedInstance;\n    }\n    else {\n        editor.completer = new Autocomplete();\n        editor.once(\"destroy\", destroyCompleter);\n    }\n    return editor.completer;\n};\nAutocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function (editor, options) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.autoSelect = true;\n        completer.showPopup(editor, options);\n        completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n};\nvar CompletionProvider = /** @class */ (function () {\n    function CompletionProvider() {\n        this.active = true;\n    }\n    CompletionProvider.prototype.insertByIndex = function (editor, index, options) {\n        if (!this.completions || !this.completions.filtered) {\n            return false;\n        }\n        return this.insertMatch(editor, this.completions.filtered[index], options);\n    };\n    CompletionProvider.prototype.insertMatch = function (editor, data, options) {\n        if (!data)\n            return false;\n        editor.startOperation({ command: { name: \"insertMatch\" } });\n        if (data.completer && data.completer.insertMatch) {\n            data.completer.insertMatch(editor, data);\n        }\n        else {\n            if (!this.completions)\n                return false;\n            if (this.completions.filterText) {\n                var ranges;\n                if (editor.selection.getAllRanges) {\n                    ranges = editor.selection.getAllRanges();\n                }\n                else {\n                    ranges = [editor.getSelectionRange()];\n                }\n                for (var i = 0, range; range = ranges[i]; i++) {\n                    range.start.column -= this.completions.filterText.length;\n                    editor.session.remove(range);\n                }\n            }\n            if (data.snippet)\n                snippetManager.insertSnippet(editor, data.snippet, { range: data.range });\n            else {\n                this.$insertString(editor, data);\n            }\n            if (data.command && data.command === \"startAutocomplete\") {\n                editor.execCommand(data.command);\n            }\n        }\n        editor.endOperation();\n        return true;\n    };\n    CompletionProvider.prototype.$insertString = function (editor, data) {\n        var text = data.value || data;\n        if (data.range) {\n            if (editor.inVirtualSelectionMode) {\n                return editor.session.replace(data.range, text);\n            }\n            editor.forEachSelection(function () {\n                var range = editor.getSelectionRange();\n                if (data.range.compareRange(range) === 0) {\n                    editor.session.replace(data.range, text);\n                }\n                else {\n                    editor.insert(text);\n                }\n            }, null, { keepOrder: true });\n        }\n        else {\n            editor.execCommand(\"insertstring\", text);\n        }\n    };\n    CompletionProvider.prototype.gatherCompletions = function (editor, callback) {\n        var session = editor.getSession();\n        var pos = editor.getCursorPosition();\n        var prefix = util.getCompletionPrefix(editor);\n        var matches = [];\n        var total = editor.completers.length;\n        editor.completers.forEach(function (completer, i) {\n            completer.getCompletions(editor, session, pos, prefix, function (err, results) {\n                if (!err && results)\n                    matches = matches.concat(results);\n                callback(null, {\n                    prefix: util.getCompletionPrefix(editor),\n                    matches: matches,\n                    finished: (--total === 0)\n                });\n            });\n        });\n        return true;\n    };\n    CompletionProvider.prototype.provideCompletions = function (editor, options, callback) {\n        var processResults = function (results) {\n            var prefix = results.prefix;\n            var matches = results.matches;\n            this.completions = new FilteredList(matches);\n            if (options.exactMatch)\n                this.completions.exactMatch = true;\n            if (options.ignoreCaption)\n                this.completions.ignoreCaption = true;\n            this.completions.setFilter(prefix);\n            if (results.finished || this.completions.filtered.length)\n                callback(null, this.completions, results.finished);\n        }.bind(this);\n        var isImmediate = true;\n        var immediateResults = null;\n        this.gatherCompletions(editor, function (err, results) {\n            if (!this.active) {\n                return;\n            }\n            if (err) {\n                callback(err, [], true);\n                this.detach();\n            }\n            var prefix = results.prefix;\n            if (prefix.indexOf(results.prefix) !== 0)\n                return;\n            if (isImmediate) {\n                immediateResults = results;\n                return;\n            }\n            processResults(results);\n        }.bind(this));\n        isImmediate = false;\n        if (immediateResults) {\n            var results = immediateResults;\n            immediateResults = null;\n            processResults(results);\n        }\n    };\n    CompletionProvider.prototype.detach = function () {\n        this.active = false;\n    };\n    return CompletionProvider;\n}());\nvar FilteredList = /** @class */ (function () {\n    function FilteredList(array, filterText) {\n        this.all = array;\n        this.filtered = array;\n        this.filterText = filterText || \"\";\n        this.exactMatch = false;\n        this.ignoreCaption = false;\n    }\n    FilteredList.prototype.setFilter = function (str) {\n        if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0)\n            var matches = this.filtered;\n        else\n            var matches = this.all;\n        this.filterText = str;\n        matches = this.filterCompletions(matches, this.filterText);\n        matches = matches.sort(function (a, b) {\n            return b.exactMatch - a.exactMatch || b.$score - a.$score\n                || (a.caption || a.value).localeCompare(b.caption || b.value);\n        });\n        var prev = null;\n        matches = matches.filter(function (item) {\n            var caption = item.snippet || item.caption || item.value;\n            if (caption === prev)\n                return false;\n            prev = caption;\n            return true;\n        });\n        this.filtered = matches;\n    };\n    FilteredList.prototype.filterCompletions = function (items, needle) {\n        var results = [];\n        var upper = needle.toUpperCase();\n        var lower = needle.toLowerCase();\n        loop: for (var i = 0, item; item = items[i]; i++) {\n            var caption = (!this.ignoreCaption && item.caption) || item.value || item.snippet;\n            if (!caption)\n                continue;\n            var lastIndex = -1;\n            var matchMask = 0;\n            var penalty = 0;\n            var index, distance;\n            if (this.exactMatch) {\n                if (needle !== caption.substr(0, needle.length))\n                    continue loop;\n            }\n            else {\n                var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n                if (fullMatchIndex > -1) {\n                    penalty = fullMatchIndex;\n                }\n                else {\n                    for (var j = 0; j < needle.length; j++) {\n                        var i1 = caption.indexOf(lower[j], lastIndex + 1);\n                        var i2 = caption.indexOf(upper[j], lastIndex + 1);\n                        index = (i1 >= 0) ? ((i2 < 0 || i1 < i2) ? i1 : i2) : i2;\n                        if (index < 0)\n                            continue loop;\n                        distance = index - lastIndex - 1;\n                        if (distance > 0) {\n                            if (lastIndex === -1)\n                                penalty += 10;\n                            penalty += distance;\n                            matchMask = matchMask | (1 << j);\n                        }\n                        lastIndex = index;\n                    }\n                }\n            }\n            item.matchMask = matchMask;\n            item.exactMatch = penalty ? 0 : 1;\n            item.$score = (item.score || 0) - penalty;\n            results.push(item);\n        }\n        return results;\n    };\n    return FilteredList;\n}());\nexports.Autocomplete = Autocomplete;\nexports.CompletionProvider = CompletionProvider;\nexports.FilteredList = FilteredList;\n\n});\n\nace.define(\"ace/autocomplete/text_completer\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){var Range = require(\"../range\").Range;\nvar splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\nfunction getWordIndex(doc, pos) {\n    var textBefore = doc.getTextRange(Range.fromPoints({\n        row: 0,\n        column: 0\n    }, pos));\n    return textBefore.split(splitRegex).length - 1;\n}\nfunction wordDistance(doc, pos) {\n    var prefixPos = getWordIndex(doc, pos);\n    var words = doc.getValue().split(splitRegex);\n    var wordScores = Object.create(null);\n    var currentWord = words[prefixPos];\n    words.forEach(function (word, idx) {\n        if (!word || word === currentWord)\n            return;\n        var distance = Math.abs(prefixPos - idx);\n        var score = words.length - distance;\n        if (wordScores[word]) {\n            wordScores[word] = Math.max(score, wordScores[word]);\n        }\n        else {\n            wordScores[word] = score;\n        }\n    });\n    return wordScores;\n}\nexports.getCompletions = function (editor, session, pos, prefix, callback) {\n    var wordScore = wordDistance(session, pos);\n    var wordList = Object.keys(wordScore);\n    callback(null, wordList.map(function (word) {\n        return {\n            caption: word,\n            value: word,\n            score: wordScore[word],\n            meta: \"local\"\n        };\n    }));\n};\n\n});\n\nace.define(\"ace/ext/language_tools\",[\"require\",\"exports\",\"module\",\"ace/snippets\",\"ace/autocomplete\",\"ace/config\",\"ace/lib/lang\",\"ace/autocomplete/util\",\"ace/autocomplete/text_completer\",\"ace/editor\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Autocomplete = require(\"../autocomplete\").Autocomplete;\nvar config = require(\"../config\");\nvar lang = require(\"../lib/lang\");\nvar util = require(\"../autocomplete/util\");\nvar textCompleter = require(\"../autocomplete/text_completer\");\nvar keyWordCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        if (session.$mode.completer) {\n            return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n        }\n        var state = editor.session.getState(pos.row);\n        var completions = session.$mode.getCompletions(state, session, pos, prefix);\n        completions = completions.map(function (el) {\n            el.completerId = keyWordCompleter.id;\n            return el;\n        });\n        callback(null, completions);\n    },\n    id: \"keywordCompleter\"\n};\nvar transformSnippetTooltip = function (str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function (_, p1, p2, p3) {\n        return (record[p1] = p3 || '');\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n        return record[p1];\n    });\n};\nvar snippetCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        var scopes = [];\n        var token = session.getTokenAt(pos.row, pos.column);\n        if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/))\n            scopes.push('html-tag');\n        else\n            scopes = snippetManager.getActiveScopes(editor);\n        var snippetMap = snippetManager.snippetMap;\n        var completions = [];\n        scopes.forEach(function (scope) {\n            var snippets = snippetMap[scope] || [];\n            for (var i = snippets.length; i--;) {\n                var s = snippets[i];\n                var caption = s.name || s.tabTrigger;\n                if (!caption)\n                    continue;\n                completions.push({\n                    caption: caption,\n                    snippet: s.content,\n                    meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n                    completerId: snippetCompleter.id\n                });\n            }\n        }, this);\n        callback(null, completions);\n    },\n    getDocTooltip: function (item) {\n        if (item.snippet && !item.docHTML) {\n            item.docHTML = [\n                \"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\",\n                lang.escapeHTML(transformSnippetTooltip(item.snippet))\n            ].join(\"\");\n        }\n    },\n    id: \"snippetCompleter\"\n};\nvar completers = [snippetCompleter, textCompleter, keyWordCompleter];\nexports.setCompleters = function (val) {\n    completers.length = 0;\n    if (val)\n        completers.push.apply(completers, val);\n};\nexports.addCompleter = function (completer) {\n    completers.push(completer);\n};\nexports.textCompleter = textCompleter;\nexports.keyWordCompleter = keyWordCompleter;\nexports.snippetCompleter = snippetCompleter;\nvar expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function (editor) {\n        return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n};\nvar onChangeMode = function (e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n};\nvar loadSnippetsForMode = function (mode) {\n    if (typeof mode == \"string\")\n        mode = config.$modes[mode];\n    if (!mode)\n        return;\n    if (!snippetManager.files)\n        snippetManager.files = {};\n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes)\n        mode.modes.forEach(loadSnippetsForMode);\n};\nvar loadSnippetFile = function (id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id])\n        return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function (m) {\n        if (!m)\n            return;\n        snippetManager.files[id] = m;\n        if (!m.snippets && m.snippetText)\n            m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n        snippetManager.register(m.snippets || [], m.scope);\n        if (m.includeScopes) {\n            snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n            m.includeScopes.forEach(function (x) {\n                loadSnippetsForMode(\"ace/mode/\" + x);\n            });\n        }\n    });\n};\nvar doLiveAutocomplete = function (e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n    if (e.command.name === \"backspace\") {\n        if (hasCompleter && !util.getCompletionPrefix(editor))\n            editor.completer.detach();\n    }\n    else if (e.command.name === \"insertstring\") {\n        var prefix = util.getCompletionPrefix(editor);\n        if (prefix && !hasCompleter) {\n            var completer = Autocomplete.for(editor);\n            completer.autoInsert = false;\n            completer.showPopup(editor);\n        }\n    }\n};\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n        set: function (val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.addCommand(Autocomplete.startCommand);\n            }\n            else {\n                this.commands.removeCommand(Autocomplete.startCommand);\n            }\n        },\n        value: false\n    },\n    enableLiveAutocompletion: {\n        set: function (val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.on('afterExec', doLiveAutocomplete);\n            }\n            else {\n                this.commands.removeListener('afterExec', doLiveAutocomplete);\n            }\n        },\n        value: false\n    },\n    enableSnippets: {\n        set: function (val) {\n            if (val) {\n                this.commands.addCommand(expandSnippet);\n                this.on(\"changeMode\", onChangeMode);\n                onChangeMode(null, this);\n            }\n            else {\n                this.commands.removeCommand(expandSnippet);\n                this.off(\"changeMode\", onChangeMode);\n            }\n        },\n        value: false\n    }\n});\n\n});                (function() {\n                    ace.require([\"ace/ext/language_tools\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "]},"metadata":{},"sourceType":"script"}