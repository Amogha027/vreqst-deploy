{"ast":null,"code":"import _regeneratorRuntime from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amogha/btp/deploy/deployed/vreqst/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ChevronRightIcon}from\"@chakra-ui/icons\";import{Breadcrumb,BreadcrumbItem,BreadcrumbLink,Flex,Spinner,useToast}from\"@chakra-ui/react\";import Axios from\"axios\";import{Step,Steps,useSteps}from\"chakra-ui-steps\";import React,{useEffect,useState}from\"react\";import{Link,useParams}from\"react-router-dom\";import{backend}from\"../../server_urls\";import ProjectPageContent from\"./ProjectPageContent\";import{DndProvider}from'react-dnd';import{HTML5Backend}from'react-dnd-html5-backend';var steps=[{label:\"Step 1\",description:\"Scene(s)\"},{label:\"Step 2\",description:\"Article(s)\"},{label:\"Step 3\",description:\"Action-Response(s)\"},{label:\"Step 4\",description:\"Behaviour(s)\"},{label:\"Step 5\",description:\"Timeline\"}];var ProjectPage=function ProjectPage(){var _useSteps=useSteps({initialStep:0}),nextStep=_useSteps.nextStep,prevStep=_useSteps.prevStep,setStep=_useSteps.setStep,reset=_useSteps.reset,activeStep=_useSteps.activeStep;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currProject=_useState2[0],setcurrProject=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var toast=useToast();var _useParams=useParams(),projectid=_useParams.projectid;var jwttoken=localStorage.getItem(\"jwtToken\");var getProject=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;requestOptions={headers:{\"Content-Type\":\"application/json\",token:jwttoken}};_context.next=4;return Axios.get(// `http://localhost:5002/api/project/${projectid}`,\nbackend+\"/api/project/\".concat(projectid),requestOptions);case 4:res=_context.sent;setcurrProject(res.data);// setStep(res.data.step);\n// console.log(res.data.stModel Template\n_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast({title:\"Something went wrong\",status:\"error\",duration:10000,isClosable:true,position:\"top\"});console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getProject(){return _ref.apply(this,arguments);};}();var handleStep=function handleStep(step){if(step<=activeStep){var f=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);_context2.next=4;return getProject();case 4:setLoading(false);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function f(){return _ref2.apply(this,arguments);};}();f();setStep(step);}};useEffect(function(){var f=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setLoading(true);_context3.next=4;return getProject();case 4:setLoading(false);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function f(){return _ref3.apply(this,arguments);};}();f();},[]);{return loading===true||currProject===null?React.createElement(React.Fragment,null,React.createElement(Flex,{width:\"80vw\",height:\"85vh\",justifyContent:\"center\",alignItems:\"center\"},React.createElement(Spinner,{thickness:\"4px\",speed:\"0.65s\",emptyColor:\"gray.200\",color:\"blue.500\",size:\"xl\"}))):React.createElement(Flex,{flexDir:\"column\",minH:\"85vh\"},React.createElement(Breadcrumb,{spacing:\"8px\",pt:5,pl:5,separator:React.createElement(ChevronRightIcon,{color:\"gray.500\"})},React.createElement(BreadcrumbItem,null,React.createElement(BreadcrumbLink,{as:Link,to:\"/projects\"},\"Projects\")),React.createElement(BreadcrumbItem,{isCurrentPage:true},React.createElement(BreadcrumbLink,null,currProject.name))),React.createElement(Flex,{flexDir:\"column\",m:\"30px\"},React.createElement(Steps,{colorScheme:\"yellow\",activeStep:activeStep,onClickStep:handleStep},steps.map(function(_ref4){var label=_ref4.label,description=_ref4.description;return React.createElement(Step,{labelOrientation:\"vertical\",label:label,key:label,description:description},React.createElement(DndProvider,{backend:HTML5Backend},React.createElement(ProjectPageContent,{projectname:currProject.name,nextStep:nextStep,prevStep:prevStep,reset:reset,activeStep:activeStep,stepslen:steps.length,scene:currProject.scene,action:currProject.action,asset:currProject.asset,custom:currProject.custom,timeline:currProject.timeline})));}))));}};export default ProjectPage;","map":{"version":3,"sources":["/home/amogha/btp/deploy/deployed/vreqst/src/Components/Project/ProjectPage.jsx"],"names":["ChevronRightIcon","Breadcrumb","BreadcrumbItem","BreadcrumbLink","Flex","Spinner","useToast","Axios","Step","Steps","useSteps","React","useEffect","useState","Link","useParams","backend","ProjectPageContent","DndProvider","HTML5Backend","steps","label","description","ProjectPage","initialStep","nextStep","prevStep","setStep","reset","activeStep","currProject","setcurrProject","loading","setLoading","toast","projectid","jwttoken","localStorage","getItem","getProject","requestOptions","headers","token","get","res","data","title","status","duration","isClosable","position","console","log","handleStep","step","f","name","map","length","scene","action","asset","custom","timeline"],"mappings":"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","sourcesContent":["import { ChevronRightIcon } from \"@chakra-ui/icons\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  Flex,\n  Spinner,\n  useToast,\n} from \"@chakra-ui/react\";\nimport Axios from \"axios\";\nimport { Step, Steps, useSteps } from \"chakra-ui-steps\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { backend } from \"../../server_urls\";\n\nimport ProjectPageContent from \"./ProjectPageContent\";\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nconst steps = [\n  { label: \"Step 1\", description: \"Scene(s)\" },\n  { label: \"Step 2\", description: \"Article(s)\" },\n  { label: \"Step 3\", description: \"Action-Response(s)\" },\n  { label: \"Step 4\", description: \"Behaviour(s)\" },\n  { label: \"Step 5\", description: \"Timeline\" },\n];\n\nconst ProjectPage = () => {\n  const { nextStep, prevStep, setStep, reset, activeStep } = useSteps({\n    initialStep: 0,\n  });\n\n  const [currProject, setcurrProject] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const toast = useToast();\n\n  const { projectid } = useParams();\n\n  const jwttoken = localStorage.getItem(\"jwtToken\");\n  const getProject = async () => {\n    try {\n      const requestOptions = {\n        headers: { \"Content-Type\": \"application/json\", token: jwttoken },\n      };\n      const res = await Axios.get(\n        // `http://localhost:5002/api/project/${projectid}`,\n        backend + `/api/project/${projectid}`,\n        requestOptions\n      );\n\n      setcurrProject(res.data);\n      // setStep(res.data.step);\n      // console.log(res.data.stModel Template\n    } catch (error) {\n      toast({\n        title: \"Something went wrong\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: \"top\",\n      });\n      console.log(error);\n    }\n  };\n\n  const handleStep = (step) => {\n    if (step <= activeStep) {\n      const f = async () => {\n        try {\n          setLoading(true);\n          await getProject();\n          setLoading(false);\n        } catch (err) {\n          console.log(err);\n        }\n      };\n      f();\n      setStep(step);\n    }\n  }\n\n  useEffect(() => {\n    const f = async () => {\n      try {\n        setLoading(true);\n        await getProject();\n        setLoading(false);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    f();\n  }, []);\n\n  {\n    return loading === true || currProject === null ? (\n      <>\n        <Flex\n          width={\"80vw\"}\n          height={\"85vh\"}\n          justifyContent=\"center\"\n          alignItems={\"center\"}\n        >\n          <Spinner\n            thickness=\"4px\"\n            speed=\"0.65s\"\n            emptyColor=\"gray.200\"\n            color=\"blue.500\"\n            size=\"xl\"\n          />\n        </Flex>\n      </>\n    ) : (\n      <Flex flexDir=\"column\" minH={\"85vh\"}>\n        <Breadcrumb\n          spacing=\"8px\"\n          pt={5}\n          pl={5}\n          separator={<ChevronRightIcon color=\"gray.500\" />}\n        >\n          <BreadcrumbItem>\n            <BreadcrumbLink as={Link} to=\"/projects\">\n              Projects\n            </BreadcrumbLink>\n          </BreadcrumbItem>\n\n          <BreadcrumbItem isCurrentPage>\n            <BreadcrumbLink>{currProject.name}</BreadcrumbLink>\n          </BreadcrumbItem>\n        </Breadcrumb>\n        <Flex flexDir={\"column\"} m=\"30px\">\n          <Steps\n            colorScheme=\"yellow\"\n            activeStep={activeStep}\n            onClickStep={handleStep}\n          >\n            {steps.map(({ label, description }) => (\n              <Step\n                labelOrientation=\"vertical\"\n                label={label}\n                key={label}\n                description={description}\n              >\n                <DndProvider backend={HTML5Backend}>\n                  <ProjectPageContent\n                    projectname={currProject.name}\n                    nextStep={nextStep}\n                    prevStep={prevStep}\n                    reset={reset}\n                    activeStep={activeStep}\n                    stepslen={steps.length}\n                    scene={currProject.scene}\n                    action={currProject.action}\n                    asset={currProject.asset}\n                    custom={currProject.custom}\n                    timeline={currProject.timeline}\n                  />\n                </DndProvider>\n              </Step>\n            ))}\n          </Steps>\n        </Flex>\n      </Flex>\n    );\n  }\n};\n\nexport default ProjectPage;\n"]},"metadata":{},"sourceType":"module"}